<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Jo Hardin">
<title>Foundations of Data Science in R - 1&nbsp; Introduction</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./02-viz.html" rel="next">
<link href="./p1-intro-to-sql.html" rel="prev">
<link href="./images/favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script type="text/x-mathjax-config">
const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers){
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');
  
  // Will this work with TeX on its own line?
  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
  	MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
  	MathJax.Hub.Queue(function(){
      popover.setAttribute('data-content', div.innerHTML);
  	})
  }
}
</script><link rel="shortcut icon" href="figs/favicon.ico">
<link rel="stylesheet" media="screen" href="https://fonts.googleapis.com/css2?family=Quicksand" type="text/css">
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./p1-intro-to-sql.html">Introduction to databases and SQL</a></li><li class="breadcrumb-item"><a href="./01-intro.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Foundations of Data Science in R</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/hardin47/DS002R-FDS" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome to Foundations of Data Science in R</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./p1-intro-to-sql.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to databases and SQL</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-intro.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-viz.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Visualization</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-wrangling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Wrangling</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./p2-using-sql.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using SQL</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-db.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Databases</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-sql-joins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Combining tables in SQL</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./p3-build-db.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Building databases</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-creating-db.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Creating databases</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-change-db.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Changing databases</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-db-etc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title"><strong>SQL</strong> extras</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./p4-regex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regular expressions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-regex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Regular Expressions</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#course-logistics" id="toc-course-logistics" class="nav-link active" data-scroll-target="#course-logistics"><span class="header-section-number">1.1</span> Course Logistics</a></li>
  <li>
<a href="#course-content" id="toc-course-content" class="nav-link" data-scroll-target="#course-content"><span class="header-section-number">1.2</span> Course Content</a>
  <ul class="collapse">
<li><a href="#topics" id="toc-topics" class="nav-link" data-scroll-target="#topics"><span class="header-section-number">1.2.1</span> Topics</a></li>
  <li><a href="#vocabulary" id="toc-vocabulary" class="nav-link" data-scroll-target="#vocabulary"><span class="header-section-number">1.2.2</span> Vocabulary</a></li>
  <li><a href="#the-workflow" id="toc-the-workflow" class="nav-link" data-scroll-target="#the-workflow"><span class="header-section-number">1.2.3</span> The Workflow</a></li>
  <li><a href="#principles-for-the-data-science-process-tldr" id="toc-principles-for-the-data-science-process-tldr" class="nav-link" data-scroll-target="#principles-for-the-data-science-process-tldr"><span class="header-section-number">1.2.4</span> Principles for the Data Science Process tl;dr</a></li>
  </ul>
</li>
  <li>
<a href="#repro" id="toc-repro" class="nav-link" data-scroll-target="#repro"><span class="header-section-number">1.3</span> Reproducibility</a>
  <ul class="collapse">
<li><a href="#need-for-reproducibility" id="toc-need-for-reproducibility" class="nav-link" data-scroll-target="#need-for-reproducibility"><span class="header-section-number">1.3.1</span> Need for Reproducibility</a></li>
  <li><a href="#example-1" id="toc-example-1" class="nav-link" data-scroll-target="#example-1">Example 1</a></li>
  <li><a href="#example-2" id="toc-example-2" class="nav-link" data-scroll-target="#example-2">Example 2</a></li>
  <li><a href="#example-3" id="toc-example-3" class="nav-link" data-scroll-target="#example-3">Example 3</a></li>
  <li><a href="#example-4" id="toc-example-4" class="nav-link" data-scroll-target="#example-4">Example 4</a></li>
  <li><a href="#the-reproducible-data-analysis-process" id="toc-the-reproducible-data-analysis-process" class="nav-link" data-scroll-target="#the-reproducible-data-analysis-process"><span class="header-section-number">1.3.2</span> The reproducible data analysis process</a></li>
  </ul>
</li>
  <li>
<a href="#data-examples" id="toc-data-examples" class="nav-link" data-scroll-target="#data-examples"><span class="header-section-number">1.4</span> Data Examples</a>
  <ul class="collapse">
<li><a href="#college-rankings-systems" id="toc-college-rankings-systems" class="nav-link" data-scroll-target="#college-rankings-systems"><span class="header-section-number">1.4.1</span> College Rankings Systems</a></li>
  <li><a href="#trump-and-twitter" id="toc-trump-and-twitter" class="nav-link" data-scroll-target="#trump-and-twitter"><span class="header-section-number">1.4.2</span> Trump and Twitter</a></li>
  <li><a href="#can-twitter-predict-election-results" id="toc-can-twitter-predict-election-results" class="nav-link" data-scroll-target="#can-twitter-predict-election-results"><span class="header-section-number">1.4.3</span> Can Twitter Predict Election Results?</a></li>
  </ul>
</li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/hardin47/DS002R-FDS/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./p1-intro-to-sql.html">Introduction to databases and SQL</a></li><li class="breadcrumb-item"><a href="./01-intro.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="intro" class="quarto-section-identifier"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="course-logistics" class="level2" data-number="1.1"><h2 data-number="1.1" class="anchored" data-anchor-id="course-logistics">
<span class="header-section-number">1.1</span> Course Logistics</h2>
<p><strong>What is Statistics?</strong> Generally, statistics is the academic discipline which uses data to make claims and predictions about larger populations of interest. It is the science of collecting, wrangling, visualizing, and analyzing data as a representation of a larger whole. It is worth noting that probability represents the majority of mathematical tools used in statistics, but probability as a discipline does not work with data. Having taken a probability class may help you with some of the mathematics covered in the course, but it is not a substitute for understanding the basics of introductory statistics.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="images/probstat.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-1" data-glightbox="description: .lightbox-desc-1" title="Probability vs.&nbsp;Statistics"><img src="images/probstat.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="73" alt="Probability vs.&nbsp;Statistics"></a></p>
</figure>
</div>
<figcaption>Probability vs.&nbsp;Statistics</figcaption></figure>
</div>
</div>
</div>
<ul>
<li>
<em>descriptive statistics</em> describe the sample at hand with no intent on making generalizations.</li>
<li>
<em>inferential statistics</em> use a sample to make claims about a population</li>
</ul>
<p><strong>What is the content of Math 154?</strong> This class will be an introduction to statistical methods that rely heavily on the use of computers. The course will generally have three parts. The first section will include communicating and working with data in a modern era. This includes data wrangling, data visualization, data ethics, and collaborative research (via GitHub). The second part of the course will focus on traditional statistical inference done through computational methods (e.g., permutation tests, bootstrapping, and regression smoothers). The last part of the course will focus on machine learning ideas such as classification, clustering, and dimension reduction techniques. Some of the methods were invented before the ubiquitous use of personal computers, but only because the calculus used to solve the problem was relatively straightforward (or because the method wasn’t actually every used). Some of the methods have been developed within the last few years.</p>
<p><strong>Who should take Math 154?</strong> Computational Statistics will cover many of the concepts and tools for modern data analysis, and therefore the ideas are important for people who would like to do modern data analysis. Some individuals may want to go to graduate school in statistics or data science, some may hope to become data scientists without additional graduate work, and some may hope to use modern techniques in other disciplines (e.g., computational biology, environmental analysis, or political science). All of these groups of individuals will get a lot out of Computational Statistics as they turn to analyzing their own data. Computational Statistics is not, however, a course which is necessary for entry into graduate school in statistics, mathematics, data science, or computer science.</p>
<p><strong>What are the prerequisites for Math 154?</strong> Computational Statistics requires a strong background in both statistics as well as algorithmic thinking. The formal prerequisite is any introductory statistics course, but if you have had only AP Statistics, you may find yourself working very hard in the first few weeks of the class to catch up. If you have taken a lot of mathematics, there are parts of the course that will come easily to you. However, a mathematics degree is not a substitute for introductory statistics, and if you have not taken introductory statistics, the majority of the course work will not be intuitive for you. You must have taken a prior statistics course as a pre-requisite to Math 154; a computer science course is also recommended.</p>
<p>It is worth noting that probability represents the majority of mathematical tools used in statistics, but probability as a discipline does not work with data. Having taken a probability class may help you with some of the mathematics covered in the course, but it is not a substitute for understanding the basics of introductory statistics.</p>
<p><strong>Is there overlap with other classes?</strong> There are many machine learning and data science courses at the 5Cs which overlap with Math 154. Those courses continue to be developed and change, so I cannot speak to all of them. Generally, the Data Science courses taught in other 5C math departments focus slightly more on the mathematics of the tools (e.g., mathematically breaking down sparse matrices) and the Machine Learning courses taught in 5C CS departments focus on the programming aspects of the tools (e.g., how to code a Random Forest). Our focus will be on the inferential aspect of the tools, that is, what do the results say about the larger problem which we are trying to solve? How can we know the results are accurate? What are the sources of variability?</p>
<p><strong>When should I take Math 154?</strong> While the prerequisite for Computational Statistics is Introduction to Statistics, the course moves very quickly and covers a tremendous amount of material. It is not ideally suited for a first year student coming straight out of AP Statistics. Instead, that student should focus on taking more mathematics, CS, interdisciplinary science, or other statistics courses. Most students taking Computational Statistics are juniors and seniors.</p>
<p><strong>What is the workload for Math 154?</strong> There is one homework assignment per week, two in-class midterm exams, two take-home midterm exams, and a final end of the semester project. Many students report working about 8-10 hours per week on this class.</p>
<p><strong>What software will we use? Will there be any real world applications? Will there be any mathematics? Will there be any CS?</strong> All of the work will be done in R (using RStudio as a front end, called an integrated development environment, IDE). You will need to either download R and RStudio (both are free) onto your own computer or use them on Pomona’s server. All assignments will be posted to private repositories on GitHub. The class is a mix of many real world applications and case studies, some higher level math, programming, and communication skills. The final project requires your own analysis of a dataset of your choosing.</p>
<ul>
<li>You may use R on the Pomona server: https://rstudio.pomona.edu/ (All Pomona students will be able to log in immediately. Non-Pomona students need to go to ITS at Pomona to get Pomona login information.)</li>
<li>If you want to use R on your own machine, you may. Please make sure all components are updated: R is freely available at http://www.r-project.org/ and is already installed on college computers. Additionally, installing R Studio is required http://rstudio.org/.</li>
<li>All assignments should be turned in using R Markdown compiled to pdf.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="images/RRstudio.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-2" data-glightbox="description: .lightbox-desc-2" title="Taken from Modern Drive: An introduction to statistical and data sciences via R, by Ismay and Kim"><img src="images/RRstudio.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="255" alt="Taken from Modern Drive: An introduction to statistical and data sciences via R, by Ismay and Kim"></a></p>
</figure>
</div>
<figcaption>Taken from <a href="https://ismayc.github.io/moderndiver-book/">Modern Drive: An introduction to statistical and data sciences via R</a>, by Ismay and Kim</figcaption></figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="images/cookingRstudio.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-3" data-glightbox="description: .lightbox-desc-3" title="Jessica Ward, PhD student at Newcastle University"><img src="images/cookingRstudio.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="155" alt="Jessica Ward, PhD student at Newcastle University"></a></p>
</figure>
</div>
<figcaption><a href="https://jkrward.github.io/">Jessica Ward</a>, PhD student at Newcastle University</figcaption></figure>
</div>
</div>
</div>
</section><section id="course-content" class="level2" data-number="1.2"><h2 data-number="1.2" class="anchored" data-anchor-id="course-content">
<span class="header-section-number">1.2</span> Course Content</h2>
<section id="topics" class="level3" data-number="1.2.1"><h3 data-number="1.2.1" class="anchored" data-anchor-id="topics">
<span class="header-section-number">1.2.1</span> Topics</h3>
<p>Computational Statistics can be a very large umbrella for many ideas. Indeed, sometimes the topics can seem somewhat disjointed. Below, I’ve categorized the topics we will cover into four groups. The four different broad topics all play different roles and can be more or less important depending on the problem at hand. None of the topics should exist on their own, because only with the bigger focus on all topics will any sort of data analysis / interpretation be accurate and compelling.</p>
<p><strong>Letting the computer help:</strong> R, RStudio, Git, GitHub, Reproducibility, Data Viz, Data Wrangling</p>
<p><strong>Statistics:</strong> Simulating, Randomization / Permutation Tests, Bootstrapping, Ethics</p>
<p><strong>Machine Learning:</strong> Classification, Clustering, Regular Expressions</p>
<p><strong>Mathematics:</strong> Support Vector Machines</p>
</section><section id="vocabulary" class="level3" data-number="1.2.2"><h3 data-number="1.2.2" class="anchored" data-anchor-id="vocabulary">
<span class="header-section-number">1.2.2</span> Vocabulary</h3>
<ul>
<li>A <strong>statistic</strong> is a numerical measurement we get from the sample, a function of the data.</li>
<li>A <strong>parameter</strong> is a numerical measurement of the population. We never know the true value of the parameter.</li>
<li>An <strong>estimator</strong> is a function of the unobserved data that tries to approximate the unknown parameter value.</li>
<li>An <strong>estimate</strong> is the value of the estimator for a given set of data. [Estimate and statistic can be used interchangeably.]</li>
</ul>
<blockquote class="blockquote">
<p>One of my goals for this course was to convince students that there are two major kinds of skills one must have in order to be a successful data scientist: technical skills to actually do the analyses; and communication skills in order to present one’s findings to a presumably non-technical audience. <span class="citation" data-cites="Baumer15">(<a href="#ref-Baumer15" role="doc-biblioref">Baumer 2015</a>)</span></p>
</blockquote>
<p>With thanks to Ben Baumer for perspective and sharing course materials.</p>
</section><section id="the-workflow" class="level3" data-number="1.2.3"><h3 data-number="1.2.3" class="anchored" data-anchor-id="the-workflow">
<span class="header-section-number">1.2.3</span> The Workflow</h3>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="images/AnalysisProcessBaumer.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-4" data-glightbox="description: .lightbox-desc-4" title="A schematic of the typical workflow used in data analysis. Most statistics classes focus only on the left side. We will work to address all aspects (including those on the right side). [@Baumer15]"><img src="images/AnalysisProcessBaumer.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="152" alt="A schematic of the typical workflow used in data analysis. Most statistics classes focus only on the left side. We will work to address all aspects (including those on the right side). (Baumer 2015)"></a></p>
</figure>
</div>
<figcaption>A schematic of the typical workflow used in data analysis. Most statistics classes focus only on the left side. We will work to address all aspects (including those on the right side). <span class="citation" data-cites="Baumer15">(<a href="#ref-Baumer15" role="doc-biblioref">Baumer 2015</a>)</span></figcaption></figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="images/SFalg.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5" data-glightbox="description: .lightbox-desc-5" title="Stitch Fix Algorithms Tour"><img src="images/SFalg.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="284" alt="Stitch Fix Algorithms Tour"></a></p>
</figure>
</div>
<figcaption><a href="http://algorithms-tour.stitchfix.com/">Stitch Fix Algorithms Tour</a></figcaption></figure>
</div>
</div>
</div>
</section><section id="principles-for-the-data-science-process-tldr" class="level3" data-number="1.2.4"><h3 data-number="1.2.4" class="anchored" data-anchor-id="principles-for-the-data-science-process-tldr">
<span class="header-section-number">1.2.4</span> Principles for the Data Science Process tl;dr</h3>
<p>(Below are some very good thoughts on the DS Process, but you are not responsible for any of the content in this section.)</p>
<p>Duncan Temple Lang, University of California, Davis</p>
<p>Duncan Temple-Lang is a leader in the area of combining computer science research concepts within the context of statistics and science more generally. Recently, he was invited to participate in a workshop, <em>Training Students to Extract Value from Big Data</em>. The workshop was subsequently summarized in a manuscript of the same name and has been provided free of charge. http://www.nap.edu/catalog.php?record_id=18981 [National Research Council. <em>Training Students to Extract Value from Big Data: Summary of a Workshop</em>. Washington, DC: The National Academies Press, 2014.]</p>
<p>Duncan Temple Lang began by listing the core concepts of data science - items that will need to be taught: statistics and machine learning, computing and technologies, and domain knowledge of each problem. He stressed the importance of interpretation and reasoning - not only methods - in addressing data. Students who work in data science will have to have a broad set of skills - including knowledge of randomness and uncertainty, statistical methods, programming, and technology - and practical experience in them. Students tend to have had few computing and statistics classes on entering graduate school in a domain science.</p>
<p>Temple Lang then described the data analysis pipeline, outlining the steps in one example of a data analysis and exploration process:</p>
<ol type="1">
<li>Asking a general question.</li>
<li>Refining the question, identifying data, and understanding data and metadata. Temple Lang noted that the data used are usually not collected for the specific question at hand, so the original experiment and data set should be understood.</li>
<li>Access to data. This is unrelated to the science but does require computational skill.</li>
<li>Transforming to data structures.</li>
<li>Exploratory data analyses to understand the data and determine whether the results will scale.</li>
</ol>
<p>This is a critical step; Temple Lang noted that 80 percent of a data scientist’s time can be spent in cleaning and preparing the data. 6. Dimension reduction. Temple Lang stressed that it can be difficult or impossible to automate this step. 7. Modeling and estimation. Temple Lang noted that computer and machine learning scientists tend to focus more on predictive models than on modeling of physical behavior or characteristics. 8. Diagnostics. This helps to understand how well the model fits the data and identifies anomalies and aspects for further study. This step has similarities to exploratory data analysis. 9. Quantifying uncertainty. Temple Lang indicated that quantifying uncertainty with statistical techniques is important for understanding and interpreting models and results. 10. Conveying results.</p>
<p>Temple Lang stressed that the data analysis process is highly interactive and iterative and requires the presence of a human in the loop. The next step in data processing is often not clear until the results of the current step are clear, and often something unexpected is uncovered. He also emphasized the importance of abstract skills and concepts and said that people need to be exposed to authentic data analyses, not only to the methods used. Data scientists also need to have a statistical understanding, and Temple Lang described the statistical concepts that should be taught to a student:</p>
<ul>
<li>Mapping the general question to a statistical framework.</li>
<li>Understanding the scope of inference, sampling, biases, and limitations.</li>
<li>Exploratory data analyses, including missing values, data quality, cleaning, matching, and fusing.</li>
<li>Understanding randomness, variability, and uncertainty. Temple Lang noted that many students do not understand sampling variability.</li>
<li>Conditional dependence and heterogeneity.</li>
<li>Dimension reduction, variable selection, and sparsity.</li>
<li>Spurious relationships and multiple testing.</li>
<li>Parameter estimation versus “black box” prediction and classification.</li>
<li>Diagnostics, residuals, and comparing models.</li>
<li>Quantifying the uncertainty of a model.</li>
<li>Sampling structure and dependence for data reduction. Temple Lang noted that modeling of data becomes complicated when variables are not independent, identically distributed.</li>
<li>Statistical accuracy versus computational complexity and efficiency.</li>
</ul>
<p>Temple Lang then briefly discussed some of the practical aspects of computing, including the following:</p>
<ul>
<li>Accessing data.</li>
<li>Manipulating raw data.</li>
<li>Data structures and storage, including correlated data.</li>
<li>Visualization at all stages (particularly in exploratory data analyses and conveying the results).</li>
<li>Parallel computing, which can be challenging for a new student.</li>
<li>Translating high-level descriptions to optimal programs.</li>
</ul>
<p>During the discussion, Temple Lang proposed computing statistics on visualizations to examine data rigorously in a statistical and automated way. He explained that “scagnostics” (from scatter plot diagnostics) is a data analysis technique for graphically exploring the relationships among variables. A small set of statistical measures can characterize scatter plots, and exploratory data analysis can be conducted on the residuals. [More information about scagnostics can be found in (Wilkinson et al., 2005, 2006).]</p>
<p>A workshop participant noted the difference between a data error and a data blunder. A blunder is a large, easily noticeable mistake. The participant gave the example of shipboard observations of cloud cover; blunders, in that case, occur when the location of the ship observation is given to be on land rather than at sea. Another blunder would be a case of a ship’s changing location too quickly. The participant speculated that such blunders could be generalized to detect problematic observations, although the tools would need to be scalable to be applied to large data sets.</p>
</section></section><section id="repro" class="level2" data-number="1.3"><h2 data-number="1.3" class="anchored" data-anchor-id="repro">
<span class="header-section-number">1.3</span> Reproducibility</h2>
<p>Reproducibility has long been considered an important topic for consideration in any research project. However, recently there has been increased press and available examples for understanding the impact that non-reproducible science can have.</p>
<p><span class="citation" data-cites="reprobook">Kitzes, Turek, and Deniz (<a href="#ref-reprobook" role="doc-biblioref">2018</a>)</span> provide a full textbook on the structure of reproducible research as well as dozens of case studies to help hone skills and consider different aspects of the reproducible pipeline. Below are a handful of examples to get us started.</p>
<section id="need-for-reproducibility" class="level3" data-number="1.3.1"><h3 data-number="1.3.1" class="anchored" data-anchor-id="need-for-reproducibility">
<span class="header-section-number">1.3.1</span> Need for Reproducibility</h3>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="images/reproducibility.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-6" data-glightbox="description: .lightbox-desc-6" title="slide taken from Kellie Ottoboni https://github.com/kellieotto/useR2016"><img src="images/reproducibility.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="408" alt="slide taken from Kellie Ottoboni https://github.com/kellieotto/useR2016"></a></p>
</figure>
</div>
<figcaption>slide taken from Kellie Ottoboni https://github.com/kellieotto/useR2016</figcaption></figure>
</div>
</div>
</div>
</section><section id="example-1" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="example-1">Example 1</h3>
<p>Science retracts gay marriage paper without agreement of lead author LaCour</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="images/lacour.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="images/lacour.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="272"></a></p>
</figure>
</div>
</div>
</div>
<ul>
<li>In May 2015 Science retracted a study of how canvassers can sway people’s opinions about gay marriage published just 5 months prior.</li>
<li>Science Editor-in-Chief Marcia McNutt:
<ul>
<li>Original survey data not made available for independent reproduction of results.</li>
<li>Survey incentives misrepresented.</li>
<li>Sponsorship statement false.</li>
</ul>
</li>
<li>Two Berkeley grad students who attempted to replicate the study quickly discovered that the data must have been faked.</li>
<li>Methods we’ll discuss can’t prevent this, but they can make it easier to discover issues.</li>
<li>Source: http://news.sciencemag.org/policy/2015/05/science-retracts-gay-marriage-paper-without-lead-author-s-consent</li>
</ul></section><section id="example-2" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="example-2">Example 2</h3>
<p>Seizure study retracted after authors realize data got “terribly mixed”</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="images/chakrabarti.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="images/chakrabarti.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="218"></a></p>
</figure>
</div>
</div>
</div>
<ul>
<li>From the authors of Low Dose Lidocaine for Refractory Seizures in Preterm Neonates:</li>
</ul>
<blockquote class="blockquote">
<p>The article has been retracted at the request of the authors. After carefully re-examining the data presented in the article, they identified that data of two different hospitals got terribly mixed. The published results cannot be reproduced in accordance with scientific and clinical correctness.</p>
</blockquote>
<ul>
<li>Source: http://retractionwatch.com/2013/02/01/seizure-study-retracted-after-authors-realize-data-got-terribly-mixed/</li>
</ul></section><section id="example-3" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="example-3">Example 3</h3>
<p>Bad spreadsheet merge kills depression paper, quick fix resurrects it</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="images/kern.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="images/kern.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="176"></a></p>
</figure>
</div>
</div>
</div>
<ul>
<li>The authors informed the journal that the merge of lab results and other survey data used in the paper resulted in an error regarding the identification codes. Results of the analyses were based on the data set in which this error occurred. Further analyses established the results reported in this manuscript and interpretation of the data are not correct.</li>
</ul>
<blockquote class="blockquote">
<p>Original conclusion: Lower levels of CSF IL-6 were associated with current depression and with future depression …</p>
</blockquote>
<blockquote class="blockquote">
<p>Revised conclusion: Higher levels of CSF IL-6 and IL-8 were associated with current depression …</p>
</blockquote>
<ul>
<li>Source: http://retractionwatch.com/2014/07/01/bad-spreadsheet-merge-kills-depression-paper-quick-fix-resurrects-it/</li>
</ul></section><section id="example-4" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="example-4">Example 4</h3>
<p>PNAS paper retracted due to problems with figure and reproducibility (April 2016): http://cardiobrief.org/2016/04/06/pnas-paper-by-prominent-cardiologist-and-dean-retracted/</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="images/goldschmidt.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="images/goldschmidt.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="429"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="the-reproducible-data-analysis-process" class="level3" data-number="1.3.2"><h3 data-number="1.3.2" class="anchored" data-anchor-id="the-reproducible-data-analysis-process">
<span class="header-section-number">1.3.2</span> The reproducible data analysis process</h3>
<ul>
<li>Scriptability <span class="math inline">\(\rightarrow\)</span> R</li>
<li>Literate programming <span class="math inline">\(\rightarrow\)</span> R Markdown</li>
<li>Version control <span class="math inline">\(\rightarrow\)</span> Git / GitHub</li>
</ul>
<section id="scripting-and-literate-programming" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="scripting-and-literate-programming">Scripting and literate programming</h4>
<p>Donald Knuth “Literate Programming” (1983)</p>
<blockquote class="blockquote">
<p>Let us change our traditional attitude to the construction of programs: Instead of imagining that our main task is to instruct a computer- what to do, let us concentrate rather on explaining to human beings- what we want a computer to do.</p>
</blockquote>
<ul>
<li>The ideas of literate programming have been around for many years!</li>
<li>and tools for putting them to practice have also been around</li>
<li>but they have never been as accessible as the current tools</li>
</ul></section><section id="reproducibility-checklist" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="reproducibility-checklist">Reproducibility checklist</h4>
<ul>
<li>Are the tables and figures reproducible from the code and data?</li>
<li>Does the code actually do what you think it does?</li>
<li>In addition to what was done, is it clear why it was done? (e.g., how were parameter settings chosen?)</li>
<li>Can the code be used for other data?</li>
<li>Can you extend the code to do other things?</li>
</ul></section><section id="tools-r-r-studio" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="tools-r-r-studio">Tools: R &amp; R Studio</h4>
<p>See this great video (less than 2 min) on a reproducible workflow: https://www.youtube.com/watch?v=s3JldKoA0zw&amp;feature=youtu.be</p>
<ul>
<li>You must use both R and RStudio software programs</li>
<li>R does the programming</li>
<li>R Studio brings everything together</li>
<li>You may use Pomona’s server: https://rstudio.pomona.edu/</li>
<li>See course website for getting started: http://research.pomona.edu/johardin/math154f19/</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="images/RRstudio.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-11" data-glightbox="description: .lightbox-desc-11" title="Taken from Modern Drive: An introduction to statistical and data sciences via R, by Ismay and Kim"><img src="images/RRstudio.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="255" alt="Taken from Modern Drive: An introduction to statistical and data sciences via R, by Ismay and Kim"></a></p>
</figure>
</div>
<figcaption>Taken from <a href="https://ismayc.github.io/moderndiver-book/">Modern Drive: An introduction to statistical and data sciences via R</a>, by Ismay and Kim</figcaption></figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="images/cookingRstudio.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-12" data-glightbox="description: .lightbox-desc-12" title="Jessica Ward, PhD student at Newcastle University"><img src="images/cookingRstudio.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="155" alt="Jessica Ward, PhD student at Newcastle University"></a></p>
</figure>
</div>
<figcaption><a href="https://jkrward.github.io/">Jessica Ward</a>, PhD student at Newcastle University</figcaption></figure>
</div>
</div>
</div>
</section><section id="tools-git-github" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="tools-git-github">Tools: Git &amp; GitHub</h4>
<ul>
<li>You must submit your assignments via GitHub</li>
<li>Follow Jenny Bryan’s advice on how to get set-up: http://happygitwithr.com/</li>
<li>Class specific instructions at https://m154-comp-stats.netlify.app/github.html</li>
</ul>
<p>Admittedly, there is a steep learning curve with Git. However, it is among the tools which you are most likely to use in your future endeavors, so spending a little time focusing on the concepts now may pay off big time in the future. Beyond practicing and working through http://happygitwithr.com/, you may want to read a little bit about waht Git is doing behind the scences. This reference: <a href="https://dev.to/unseenwizzard/learn-git-concepts-not-commands-4gjc">Learn git concepts, not commands</a> is very good and accessible.</p>
</section><section id="tools-a-github-merge-conflict-demo" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="tools-a-github-merge-conflict-demo">Tools: a GitHub merge conflict (demo)</h4>
<ul>
<li>On GitHub (on the web) edit the README document and Commit it with a message describing what you did.</li>
<li>Then, in RStudio also edit the README document with a different change.
<ul>
<li>Commit your changes</li>
<li>Try to push <span class="math inline">\(\rightarrow\)</span> you’ll get an error!</li>
<li>Try pulling</li>
<li>Resolve the merge conflict and then commit and push</li>
</ul>
</li>
<li>As you work in teams you will run into merge conflicts, learning how to resolve them properly will be very important.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="images/git_xkcd.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13" data-glightbox="description: .lightbox-desc-13" title="https://xkcd.com/1597/"><img src="images/git_xkcd.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="106" alt="https://xkcd.com/1597/"></a></p>
</figure>
</div>
<figcaption>https://xkcd.com/1597/</figcaption></figure>
</div>
</div>
</div>
</section><section id="steps-for-weekly-homework" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="steps-for-weekly-homework">Steps for weekly homework</h4>
<ol type="1">
<li>You will get a link to the new assignment (clicking on the link will create a new private repo)<br>
</li>
<li>Use R (within R Studio)
<ul>
<li>New Project, version control, Git<br>
</li>
<li>Clone the repo using SSH<br>
</li>
</ul>
</li>
<li>If it exists, rename the Rmd file to ma154-hw#-lname-fname.Rmd<br>
</li>
<li>Do the assignment
<ul>
<li>
<code>commit</code> and <code>push</code> after every problem<br>
</li>
</ul>
</li>
<li>All necessary files <em>must</em> be in the same folder (e.g., data)</li>
</ol></section></section></section><section id="data-examples" class="level2" data-number="1.4"><h2 data-number="1.4" class="anchored" data-anchor-id="data-examples">
<span class="header-section-number">1.4</span> Data Examples</h2>
<section id="what-cancant-data-science-do" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="what-cancant-data-science-do">What can/can’t Data Science Do?</h4>
<ul>
<li>Can model the data at hand!</li>
<li>Can find patterns &amp; visualizations in large datasets.</li>
<li>Can’t establish causation.</li>
<li>Can’t represent data if it isn’t there.</li>
</ul></section><section id="stats-data-science-math-are-not-apoliticalagnostic" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="stats-data-science-math-are-not-apoliticalagnostic">Stats / Data Science / Math are not apolitical/agnostic</h4>
<ul>
<li>“Inner city crime is reaching record levels” (Donald Trump, 8/30/16)</li>
<li>“The unemployment rate for African-American youth is 59 percent” (Donald Trump 6/20/16)</li>
<li>“Two million more Latinos are in poverty today than when President Obama took his oath of office less than eight years ago” (Donald Trump 8/25/16)</li>
<li>“We are now, for the first time ever, energy independent” (Hillary Clinton 8/10/16)</li>
<li>“If you look worldwide, the number of terrorist incidents have not substantially increased” (Barack Obama 10/13/16)</li>
<li>“Illegal immigration is lower than it’s been in 40 years” (Barack Obama, 3/17/16)</li>
</ul>
<p>Source: http://www.politifact.com/truth-o-meter/statements/</p>
</section><section id="college-rankings-systems" class="level3" data-number="1.4.1"><h3 data-number="1.4.1" class="anchored" data-anchor-id="college-rankings-systems">
<span class="header-section-number">1.4.1</span> College Rankings Systems</h3>
<p><strong>Cheating</strong></p>
<blockquote class="blockquote">
<p>Bucknell University lied about SAT averages from 2006 to 2012, and Emory University sent in biased SAT scores and class ranks for at least 11 years, starting in 2000. Iona College admitted to fudging SAT scores, graduation rates, retention rates, acceptance rates, and student-to-faculty ratios in order to move from 50th place to 30th for nine years before it was discovered. ( <strong>Weapons of Math Destruction</strong>, O’Neil, https://weaponsofmathdestructionbook.com/ and http://www.slate.com/articles/business/moneybox/2016/09/how_big_data_made_applying_to_college_tougher_crueler_and_more_expensive.html)</p>
</blockquote>
<p><strong>Gaming the system</strong></p>
<blockquote class="blockquote">
<p>Point by point, senior staff members tackled different criteria, always with an eye to U.S. News’s methodology. Freeland added faculty, for instance, to reduce class size. “We did play other kinds of games,” he says. “You get credit for the number of classes you have under 20 [students], so we lowered our caps on a lot of our classes to 19 just to make sure.” From 1996 to the 2003 edition (released in 2002), Northeastern rose 20 spots. ( <em>14 Reasons Why US News College Rankings are Meaningless</em> http://www.liberalartscolleges.com/us-news-college-rankings-meaningless/)</p>
</blockquote>
<p>No way to measure “quality of education”</p>
<p>What is “best”? A big part of the ranking system has to do with peer-assessed reputation (feedback loop!).</p>
</section><section id="trump-and-twitter" class="level3" data-number="1.4.2"><h3 data-number="1.4.2" class="anchored" data-anchor-id="trump-and-twitter">
<span class="header-section-number">1.4.2</span> Trump and Twitter</h3>
<p>Analysis of Trump’s tweets with evidence that someone else tweets from his account using an iPhone.</p>
<ul>
<li>Aug 9, 2016 http://varianceexplained.org/r/trump-tweets/</li>
</ul>
<blockquote class="blockquote">
<p>My analysis, shown below, concludes that the Android and iPhone tweets are clearly from different people, posting during different times of day and using hashtags, links, and retweets in distinct ways. What’s more, we can see that the Android tweets are angrier and more negative, while the iPhone tweets tend to be benign announcements and pictures.</p>
</blockquote>
<ul>
<li>Aug 9, 2017 http://varianceexplained.org/r/trump-followup/</li>
</ul>
<blockquote class="blockquote">
<p>There is a year of new data, with over 2700 more tweets. And quite notably, Trump stopped using the Android in March 2017. This is why machine learning approaches like http://didtrumptweetit.com/ are useful, since they can still distinguish Trump’s tweets from his campaign’s by training on the kinds of features I used in my original post.</p>
</blockquote>
<blockquote class="blockquote">
<p>I’ve found a better dataset: in my original analysis, I was working quickly and used the <code>twitteR</code> package (https://cran.r-project.org/web/packages/twitteR/) to query Trump’s tweets. I since learned there’s a bug in the package that caused it to retrieve only about half the tweets that could have been retrieved, and in any case I was able to go back only to January 2016. I’ve since found the truly excellent Trump Twitter Archive (http://www.trumptwitterarchive.com/), which contains all of Trump’s tweets going back to 2009. Below I show some R code for querying it.</p>
</blockquote>
<blockquote class="blockquote">
<p>I’ve heard some interesting questions that I wanted to follow up on: These come from the comments on the original post and other conversations I’ve had since. Two questions included what device Trump tended to use before the campaign, and what types of tweets tended to lead to high engagement.</p>
</blockquote>
</section><section id="can-twitter-predict-election-results" class="level3" data-number="1.4.3"><h3 data-number="1.4.3" class="anchored" data-anchor-id="can-twitter-predict-election-results">
<span class="header-section-number">1.4.3</span> Can Twitter Predict Election Results?</h3>
<!--
http://www.math.smith.edu/~bbaumer/mth292-f14/
-->
<p>In 2013, <span class="citation" data-cites="DiGrazia13">DiGrazia et al. (<a href="#ref-DiGrazia13" role="doc-biblioref">2013</a>)</span> published a provocative paper suggesting that polling could now be replaced by analyzing social media data. They analyzed 406 competitive US congressional races using over 3.5 billion tweets. In an article in <em>The Washington Post</em> one of the co-authors, Rojas, writes: “Anyone with programming skills can write a program that will harvest tweets, sort them for content and analyze the results. This can be done with nothing more than a laptop computer.” <span class="citation" data-cites="Rojas13">(<a href="#ref-Rojas13" role="doc-biblioref">Rojas 2013</a>)</span></p>
<p>What makes using Tweets to predict elections relevant to our class? (See <span class="citation" data-cites="Baumer15">Baumer (<a href="#ref-Baumer15" role="doc-biblioref">2015</a>)</span>.)</p>
<ol type="1">
<li>The data come from neither an experiment nor a random sample - there must be careful thought applied to the question of <em>to whom</em> the analysis can be generalized. The data were also scraped from the internet.</li>
<li>The analysis was done combining domain knowledge (about congressional races) with a data source that seems completely irrelevant at the outset (tweets).</li>
<li>The dataset was quite large! 3.5 billion tweets were collected and a random sample of 500,000 tweets were analyzed.</li>
<li>The researchers were from sociology and computer science - a truly collaborative endeavor, and one that is often quite efficient at producing high quality analyses.</li>
</ol>
<section id="activity" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="activity">Activity</h4>
<p>Spend a few minutes reading the Rojas editorial and skimming the actual paper. Be sure to consider Figure 1 and Table 1 carefully, and address the following questions.</p>
<ul>
<li>working paper: http://papers.ssrn.com/sol3/papers.cfm?abstract_id=2235423</li>
<li>published in <em>PLoS ONE</em>: http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0079449 DiGrazia J, McKelvey K, Bollen J, Rojas F (2013) More Tweets, More Votes: Social Media as a Quantitative Indicator of Political Behavior. <em>PLoS ONE 8</em> (11): e79449.</li>
<li>editorial in <em>The Washington Post</em> by Rojas: http://www.washingtonpost.com/opinions/how-twitter-can-predict-an-election/2013/08/11/35ef885a-0108-11e3-96a8-d3b921c0924a_story.html</li>
<li>editorial in the Huffington Post by Linkins: http://www.huffingtonpost.com/2013/08/14/twitter-predict-elections_n_3755326.html</li>
<li>editorial blog by Gelman: http://andrewgelman.com/2013/04/24/the-tweets-votes-curve/</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="images/twitterscatter.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-14"><img src="images/twitterscatter.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="495"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="images/twitterreg.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-15"><img src="images/twitterreg.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="208"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="statistics-hat" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="statistics-hat">Statistics Hat</h4>
<ol type="1">
<li>Write a sentence summarizing the findings of the paper.</li>
<li>Discuss Figure 1 with your neighbor. What is its purpose? What does it convey? Think critically about this data visualization. What would you do differently?
<ul>
<li>should be proportion for the response variable. The bizarre scaling could dramatically change the results</li>
<li>dots could then be scaled in proportion to the number of tweets</li>
<li>linear fit may be questionable.</li>
<li>How would you improve the plot? I.e., annotate it to make it more convincing / communicative? Does it need enhancement?</li>
</ul>
</li>
<li>Interpret the coefficient of <code>Republican Tweet Share</code> in both models shown in Table 1. Be sure to include units.</li>
<li>Discuss with your neighbor the differences between the <code>Bivariate</code> model and the <code>Full Model</code>. Which one do you think does a better job of predicting the outcome of an election? Which one do you think best addresses the influence of tweets on an election?
<ul>
<li>
<span class="math inline">\(R^2\)</span> is way higher after control variables are included, but duh!</li>
<li>the full model will likely do a better job of predicting</li>
</ul>
</li>
<li>Why do you suppose that the coefficient of <code>Republican Tweet Share</code> is so much larger in the <code>Bivariate</code> model? How does this reflect on the influence of tweets in an election?
<ul>
<li>After controlling for how many Republicans are in the district, most of the effect disappears</li>
<li>While the coefficient of the main term is still statistically significant, the size of the coefficient</li>
<li>(155 +/- 43 votes) is of little practical significance</li>
</ul>
</li>
<li>Do you think the study holds water? Why or why not? What are the shortcomings of this study?
<ul>
<li>Not really. First of all, how many of these races are actually competitive? It’s not 406, it’s probably fewer than 100. If you redid the study on that sample, would the tweet share still be statistically significant in the full model?</li>
</ul>
</li>
</ol></section><section id="data-scientist-hat" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="data-scientist-hat">Data Scientist Hat</h4>
<p>Imagine that your boss, who does not have advanced technical skills or knowledge, asked you to reproduce the study you just read. Discuss the following with your neighbor.</p>
<ol type="1">
<li>What steps are necessary to reproduce this study? Be as specific as you can! Try to list the subtasks that you would have to perform.</li>
<li>What computational tools would you use for each task? Identify all the steps necessary to conduct the study. Could you do it given your current abilities &amp; knowledge? What about the practical considerations? (1) How do you download from Twitter? (2) What is an API (Application Programming Interface), and how does R interface with APIs? (3) How hard is it to store 3.5 billion tweets? (4) How big is a tweet? (5) How do you know which congressional district the person who tweeted was in?</li>
</ol>
<p>How much storage <em>does</em> it take to download 3.5 billion tweets? = 2000+ Gb = 2+ Tb (your hard drive is likely 1Tb, unless you have a small computer). Can you explain the billions of tweets stored at Indiana University? How would you randomly sample from the database? One tweet is about 2/3 of a Kb.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="images/twitter_rojas.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-16"><img src="images/twitter_rojas.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="408"></a></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="images/twitter_linkins.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-17"><img src="images/twitter_linkins.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="272"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="advantages" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="advantages">Advantages</h4>
<ul>
<li>Cheap</li>
<li>Can measure any political race (not just the wealthy ones).</li>
</ul></section><section id="disadvantages" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="disadvantages">Disadvantages</h4>
<ul>
<li>Is it really reflective of the voting populace? Who would it bias toward?</li>
<li>Does simple mention of a candidate always reflect voting patterns? When wouldn’t it?</li>
<li>Margin of error of 2.7%. How is that number typically calculated in a poll? Note: <span class="math inline">\(2 \cdot \sqrt{(1/2)(1/2)/1000} = 0.0316\)</span>.</li>
<li>Tweets feel more free in terms of what you are able to say - is that a good thing or a bad thing with respect to polling?</li>
<li>Can’t measure any demographic information.</li>
</ul></section><section id="what-could-be-done-differently" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="what-could-be-done-differently">What could be done differently?</h4>
<ul>
<li>Gelman: look only at close races</li>
<li>Gelman: “It might make sense to flip it around and predict twitter mentions given candidate popularity. That is, rotate the graph 90 degrees, and see how much variation there is in tweet shares for elections of different degrees of closeness.”</li>
<li>Gelman: “And scale the size of each dot to the total number of tweets for the two candidates in the election.”</li>
<li>Gelman: Make the data publicly available so that others can try to reproduce the results</li>
</ul></section><section id="tweeting-and-r" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="tweeting-and-r">Tweeting and R</h4>
<p>The twitter analysis requires a twitter password, and sorry, I won’t give you mine. If you want to download tweets, follow the instructions at http://stats.seandolinar.com/collecting-twitter-data-introduction/ or maybe one of these: https://www.credera.com/blog/business-intelligence/twitter-analytics-using-r-part-1-extract-tweets/ and http://davetang.org/muse/2013/04/06/using-the-r_twitter-package/ and ask me if you have any questions.</p>


<div class="hidden" aria-hidden="true">
<span class="glightbox-desc lightbox-desc-1">Probability vs.&nbsp;Statistics</span>
<span class="glightbox-desc lightbox-desc-2">Taken from <a href="https://ismayc.github.io/moderndiver-book/">Modern Drive: An introduction to statistical and data sciences via R</a>, by Ismay and Kim</span>
<span class="glightbox-desc lightbox-desc-3"><a href="https://jkrward.github.io/">Jessica Ward</a>, PhD student at Newcastle University</span>
<span class="glightbox-desc lightbox-desc-4">A schematic of the typical workflow used in data analysis. Most statistics classes focus only on the left side. We will work to address all aspects (including those on the right side). <span class="citation" data-cites="Baumer15">(<a href="#ref-Baumer15" role="doc-biblioref">Baumer 2015</a>)</span></span>
<span class="glightbox-desc lightbox-desc-5"><a href="http://algorithms-tour.stitchfix.com/">Stitch Fix Algorithms Tour</a></span>
<span class="glightbox-desc lightbox-desc-6">slide taken from Kellie Ottoboni https://github.com/kellieotto/useR2016</span>
<span class="glightbox-desc lightbox-desc-11">Taken from <a href="https://ismayc.github.io/moderndiver-book/">Modern Drive: An introduction to statistical and data sciences via R</a>, by Ismay and Kim</span>
<span class="glightbox-desc lightbox-desc-12"><a href="https://jkrward.github.io/">Jessica Ward</a>, PhD student at Newcastle University</span>
<span class="glightbox-desc lightbox-desc-13">https://xkcd.com/1597/</span>
</div>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-Baumer15" class="csl-entry" role="listitem">
Baumer, Ben. 2015. <span>“A Data Science Course for Undergraduates: Thinking with Data.”</span> <em>The American Statistician</em>.
</div>
<div id="ref-DiGrazia13" class="csl-entry" role="listitem">
DiGrazia, Joseph, Karissa McKelvey, Johan Bollen, and Fabio Rojas. 2013. <span>“More Tweets, More Votes: Social Media as a Quantitative Indicator of Political Behavior.”</span> <em>PLoS ONE</em> 8 (11): e79449.
</div>
<div id="ref-reprobook" class="csl-entry" role="listitem">
Kitzes, Justin, Daniel Turek, and Fatma Deniz, eds. 2018. In <em>The Practice of Reproducible Research: Case Studies and Lessons from the Data-Intensive Sciences</em>. University of California Press.
</div>
<div id="ref-Rojas13" class="csl-entry" role="listitem">
Rojas, Fabio. 2013. <span>“How <span>T</span>witter Can Predict and Election.”</span> <em>The Washington Post</em>.
</div>
</div>
</section></section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/ds002r-fds\.netlify\.app\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./p1-intro-to-sql.html" class="pagination-link" aria-label="Introduction to databases and SQL">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Introduction to databases and SQL</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./02-viz.html" class="pagination-link" aria-label="Visualization">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Visualization</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>Foundations of Data Science in R, by Jo Hardin.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/hardin47/DS002R-FDS/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>Built with 💚 and <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer><script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","openEffect":"zoom","loop":false,"selector":".lightbox","descPosition":"bottom"});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>


</body></html>