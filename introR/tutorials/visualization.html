<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Visualization | Getting Started with R &amp; RStudio</title>
  <meta name="description" content="Some basics to get people started working with R and the tidyverse." />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Visualization | Getting Started with R &amp; RStudio" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Some basics to get people started working with R and the tidyverse." />
  <meta name="github-repo" content="hardin47/website/introR/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Visualization | Getting Started with R &amp; RStudio" />
  
  <meta name="twitter:description" content="Some basics to get people started working with R and the tidyverse." />
  

<meta name="author" content="Jo Hardin" />


<meta name="date" content="2020-01-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="wrang.html"/>
<link rel="next" href="references.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Computational Statistics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#getting-started"><i class="fa fa-check"></i><b>1.1</b> Getting started</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#reproducibility"><i class="fa fa-check"></i><b>1.2</b> Reproducibility</a><ul>
<li class="chapter" data-level="1.2.1" data-path="intro.html"><a href="intro.html#the-reproducible-data-analysis-process"><i class="fa fa-check"></i><b>1.2.1</b> The reproducible data analysis process</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#reprex"><i class="fa fa-check"></i><b>1.3</b> <code>reprex</code></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="wrang.html"><a href="wrang.html"><i class="fa fa-check"></i><b>2</b> Data Wrangling</a><ul>
<li class="chapter" data-level="2.1" data-path="wrang.html"><a href="wrang.html#datastruc"><i class="fa fa-check"></i><b>2.1</b> Structure of Data</a><ul>
<li class="chapter" data-level="2.1.1" data-path="wrang.html"><a href="wrang.html#building-tidy-data"><i class="fa fa-check"></i><b>2.1.1</b> Building Tidy Data</a></li>
<li class="chapter" data-level="2.1.2" data-path="wrang.html"><a href="wrang.html#examples-of-chaining"><i class="fa fa-check"></i><b>2.1.2</b> Examples of Chaining</a></li>
<li class="chapter" data-level="2.1.3" data-path="wrang.html"><a href="wrang.html#data-verbs-on-single-data-frames"><i class="fa fa-check"></i><b>2.1.3</b> Data Verbs (on single data frames)</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="wrang.html"><a href="wrang.html#r-examples-basic-verbs"><i class="fa fa-check"></i><b>2.2</b> R examples, basic verbs</a><ul>
<li class="chapter" data-level="2.2.1" data-path="wrang.html"><a href="wrang.html#datasets"><i class="fa fa-check"></i><b>2.2.1</b> Datasets</a></li>
<li class="chapter" data-level="2.2.2" data-path="wrang.html"><a href="wrang.html#examples-of-chaining-1"><i class="fa fa-check"></i><b>2.2.2</b> Examples of Chaining</a></li>
<li class="chapter" data-level="2.2.3" data-path="wrang.html"><a href="wrang.html#data-verbs"><i class="fa fa-check"></i><b>2.2.3</b> Data Verbs</a></li>
<li class="chapter" data-level="2.2.4" data-path="wrang.html"><a href="wrang.html#summarize-and-group_by"><i class="fa fa-check"></i><b>2.2.4</b> <code>summarize</code> and <code>group_by</code></a></li>
<li class="chapter" data-level="2.2.5" data-path="wrang.html"><a href="wrang.html#babynames"><i class="fa fa-check"></i><b>2.2.5</b> babynames</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="wrang.html"><a href="wrang.html#highverb"><i class="fa fa-check"></i><b>2.3</b> Higher Level Data Verbs</a></li>
<li class="chapter" data-level="2.4" data-path="wrang.html"><a href="wrang.html#r-examples-higher-level-verbs"><i class="fa fa-check"></i><b>2.4</b> R examples, higher level verbs</a><ul>
<li class="chapter" data-level="2.4.1" data-path="wrang.html"><a href="wrang.html#pivot_longer"><i class="fa fa-check"></i><b>2.4.1</b> <code>pivot_longer</code></a></li>
<li class="chapter" data-level="2.4.2" data-path="wrang.html"><a href="wrang.html#pivot_wider"><i class="fa fa-check"></i><b>2.4.2</b> <code>pivot_wider</code></a></li>
<li class="chapter" data-level="2.4.3" data-path="wrang.html"><a href="wrang.html#join-use-join-to-merge-two-datasets"><i class="fa fa-check"></i><b>2.4.3</b> <code>join</code> (use <code>join</code> to <strong>merge</strong> two datasets)</a></li>
<li class="chapter" data-level="2.4.4" data-path="wrang.html"><a href="wrang.html#lubridate"><i class="fa fa-check"></i><b>2.4.4</b> <code>lubridate</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>3</b> Visualization</a><ul>
<li class="chapter" data-level="3.1" data-path="visualization.html"><a href="visualization.html#deconstruct"><i class="fa fa-check"></i><b>3.1</b> Deconstructing a graph</a><ul>
<li class="chapter" data-level="3.1.1" data-path="visualization.html"><a href="visualization.html#gg"><i class="fa fa-check"></i><b>3.1.1</b> The Grammar of Graphics (<code>gg</code>)</a></li>
<li class="chapter" data-level="3.1.2" data-path="visualization.html"><a href="visualization.html#ggplot2"><i class="fa fa-check"></i><b>3.1.2</b> <code>ggplot2</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://st47s.com/Math154" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Getting Started with R &amp; RStudio</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="visualization" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Visualization</h1>
<p>Data visualization is integral to understanding both data and models. Computational statistics and data science sometimes focus on models or resulting predictions from the models. But there is no doubt that the structure and format of the data are the key to whether or not a model is appropriate or good. A good data analyst will always spend a lot of time and effort on exploratory data analysis, much of which includes making as many visualizations of the data as possible.</p>
<div id="deconstruct" class="section level2">
<h2><span class="header-section-number">3.1</span> Deconstructing a graph</h2>
<div id="gg" class="section level3">
<h3><span class="header-section-number">3.1.1</span> The Grammar of Graphics (<code>gg</code>)</h3>
<p><span class="citation">Yau (<a href="#ref-Yau">2013</a>)</span> and <span class="citation">Wickham (<a href="#ref-Wickham14">2014</a>)</span> have come up with a <em>taxonomy</em> and a <em>grammar</em> for thinking about the parts of a figure just like we conceptualize the parts of a body or the parts of a sentence.</p>
<p>One great way of thinking of the new process: it is not longer necessary to talk about the name of the graph (e.g., boxplot). Instead we now think in glyphs (geoms), and so we can put whatever we want on the plot. Note also that the transition leads you from a passive consumer (I need to make plot XXX because everyone else does, so I just plug in the data) into an active participant (what do I want my data to say? and how can I put that information onto my graphic?)</p>
<p>The most important questions you can ask with respect to creating figures are:</p>
<ol style="list-style-type: decimal">
<li>What do we want R to do? (What is the goal?)</li>
<li>What does R need to know?</li>
</ol>
<div id="the-grammar-of-graphics-in-ggplot2" class="section level4">
<h4><span class="header-section-number">3.1.1.1</span> The grammar of graphics in <code>ggplot2</code></h4>
<p><strong>geom</strong>: the geometric “shape” used to display data</p>
<ul>
<li>bar, point, line, ribbon, text, etc.</li>
</ul>
<p><strong>aesthetic</strong>: an attribute controlling how geom is displayed with respect to variables</p>
<ul>
<li>x position, y position, color, fill, shape, size, etc.</li>
</ul>
<p><strong>scale</strong>: adjust information in the aesthetic to map onto the plot</p>
<ul>
<li><em>particular</em> assignment of colors, shapes, sizes, etc.; making axes continuous or constrained to a particular range of values.</li>
</ul>
<p><strong>guide</strong>: helps user convert visual data back into raw data (legends, axes)</p>
<p><strong>stat</strong>: a transformation applied to data before geom gets it</p>
<ul>
<li>example: histograms work on binned data</li>
</ul>
</div>
</div>
<div id="ggplot2" class="section level3">
<h3><span class="header-section-number">3.1.2</span> <code>ggplot2</code></h3>
<blockquote>
<p>Important note!</p>
</blockquote>
<blockquote>
<p>While <code>dplyr</code> chains functions using <code>%&gt;%</code></p>
</blockquote>
<blockquote>
<p><code>ggplot</code> chains functions using <code>+</code></p>
</blockquote>
<p>In <code>ggplot2</code>, an <em>aesthetic</em> refers to a mapping between a variable and the information it conveys on the plot. Further information about plotting and visualizing information is given in chapter 2 (Data visualization) of <span class="citation">Baumer, Kaplan, and Horton (<a href="#ref-MDSR">2017</a>)</span>. Much of the data in the presentation represents all births from 1978 in the US: the date, the day of the year, and the number of births.</p>
<!---
%Things to talk about:
%layers 
%facets 
%tidy data 
%scale: the computer maps the data to the aesthetic (computer doing the work) 
%guide: the aesthetic gets mapped back to the data (the human interpreting the graph) 
%frame: the variables that define the space (e.g., x & y coordinates and faceting) 
--->
<div id="goals" class="section level5 unnumbered">
<h5>Goals</h5>
<p>What I will try to do</p>
<ul>
<li><p>give a tour of <code>ggplot2</code></p></li>
<li><p>explain how to think about plots the <code>ggplot2</code> way</p></li>
<li><p>prepare/encourage you to learn more later</p></li>
</ul>
<p>What I can’t do in one session</p>
<ul>
<li><p>show every bell and whistle</p></li>
<li><p>make you an expert at using <code>ggplot2</code></p></li>
</ul>
</div>
<div id="getting-help" class="section level5 unnumbered">
<h5>Getting help</h5>
<ol style="list-style-type: decimal">
<li><p>One of the best ways to get started with ggplot is to google what you want to do with the word ggplot. Then look through the images that come up. More often than not, the associated code is there. There are also ggplot galleries of images, one of them is here: <a href="https://plot.ly/ggplot2/" class="uri">https://plot.ly/ggplot2/</a></p></li>
<li><p><code>ggplot2</code> cheat sheet: <a href="https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf" class="uri">https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf</a></p></li>
<li><p>Look at the end of the presentation. More help options there.</p></li>
</ol>
<p><img src="figs/plotly.png" width="476" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb172-1" data-line-number="1"><span class="kw">require</span>(mosaic)</a>
<a class="sourceLine" id="cb172-2" data-line-number="2"><span class="kw">require</span>(lubridate) <span class="co"># package for working with dates</span></a>
<a class="sourceLine" id="cb172-3" data-line-number="3"><span class="kw">data</span>(Births78)     <span class="co"># restore fresh version of Births78</span></a>
<a class="sourceLine" id="cb172-4" data-line-number="4"><span class="kw">head</span>(Births78, <span class="dv">3</span>)</a></code></pre></div>
<pre><code>##         date births wday year month day_of_year day_of_month day_of_week
## 1 1978-01-01   7701  Sun 1978     1           1            1           1
## 2 1978-01-02   7527  Mon 1978     1           2            2           2
## 3 1978-01-03   8825  Tue 1978     1           3            3           3</code></pre>
</div>
<div id="how-can-we-make-the-plot" class="section level5 unnumbered">
<h5>How can we make the plot?</h5>
<p><img src="03-viz_files/figure-html/unnamed-chunk-4-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Two Questions:</p>
<ol style="list-style-type: decimal">
<li><p>What do we want R to do? (What is the goal?)</p></li>
<li><p>What does R need to know?</p>
<ul>
<li><p>data source: <code>Births78</code></p></li>
<li><p>aesthetics:</p>
<ul>
<li><code>date -&gt; x</code></li>
<li><code>births -&gt; y</code></li>
<li>points (!)</li>
</ul></li>
</ul></li>
<li><p>Goal: scatterplot = a plot with points</p>
<ul>
<li><code>ggplot() + geom_point()</code></li>
</ul></li>
<li><p>What does R need to know?</p>
<ul>
<li><p>data source: <code>data = Births78</code></p></li>
<li><p>aesthetics: <code>aes(x = date, y = births)</code></p></li>
</ul></li>
</ol>
</div>
<div id="how-can-we-make-the-plot-1" class="section level5 unnumbered">
<h5>How can we make the plot?</h5>
<p><img src="03-viz_files/figure-html/unnamed-chunk-5-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>What has changed?</p>
<ul>
<li>new aesthetic: mapping color to day of week</li>
</ul>
</div>
<div id="adding-day-of-week-to-the-data-set" class="section level5 unnumbered">
<h5>Adding day of week to the data set</h5>
<p>The <code>wday()</code> function in the <code>lubridate</code> package computes the day of the week from a date.</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb174-1" data-line-number="1">Births78 &lt;-<span class="st">  </span></a>
<a class="sourceLine" id="cb174-2" data-line-number="2"><span class="st">  </span>Births78 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb174-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">wday =</span> lubridate<span class="op">::</span><span class="kw">wday</span>(date, <span class="dt">label=</span><span class="ot">TRUE</span>))</a></code></pre></div>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb175-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data=</span>Births78) <span class="op">+</span></a>
<a class="sourceLine" id="cb175-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x=</span>date, <span class="dt">y=</span>births, <span class="dt">color=</span>wday))<span class="op">+</span></a>
<a class="sourceLine" id="cb175-3" data-line-number="3"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;US Births in 1978&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-7-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="how-can-we-make-the-plot-2" class="section level5 unnumbered">
<h5>How can we make the plot?</h5>
<p><img src="03-viz_files/figure-html/unnamed-chunk-8-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Now we use lines instead of dots</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb176-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data=</span>Births78) <span class="op">+</span></a>
<a class="sourceLine" id="cb176-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">x=</span>date, <span class="dt">y=</span>births, <span class="dt">color=</span>wday)) <span class="op">+</span></a>
<a class="sourceLine" id="cb176-3" data-line-number="3"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;US Births in 1978&quot;</span>)</a></code></pre></div>
</div>
<div id="how-can-we-make-the-plot-3" class="section level5 unnumbered">
<h5>How can we make the plot?</h5>
<p><img src="03-viz_files/figure-html/unnamed-chunk-10-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Now we have two <strong>layers</strong>, one with points and one with
lines</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb177-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data=</span>Births78, </a>
<a class="sourceLine" id="cb177-2" data-line-number="2">       <span class="kw">aes</span>(<span class="dt">x=</span>date, <span class="dt">y=</span>births, <span class="dt">color=</span>wday)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb177-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st">  </span><span class="kw">geom_line</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb177-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;US Births in 1978&quot;</span>)</a></code></pre></div>
<ul>
<li><p>The layers are placed one on top of the other: the points
are <em>below</em> and the lines are <em>above</em>.</p></li>
<li><p><code>data</code> and <code>aes</code> specified in <code>ggplot()</code> affect all geoms</p></li>
</ul>
</div>
<div id="alternative-syntax" class="section level5 unnumbered">
<h5>Alternative Syntax</h5>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb178-1" data-line-number="1">Births78 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb178-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>date, <span class="dt">y=</span>births, <span class="dt">color=</span>wday)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb178-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb178-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_line</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb178-5" data-line-number="5"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;US Births in 1978&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-12-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="what-does-adding-the-color-argument-do" class="section level5 unnumbered">
<h5>What does adding the color argument do?</h5>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb179-1" data-line-number="1">Births78 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb179-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>date, <span class="dt">y=</span>births, <span class="dt">color=</span><span class="st">&quot;navy&quot;</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb179-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_point</span>()  <span class="op">+</span></a>
<a class="sourceLine" id="cb179-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;US Births in 1978&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-14-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Because there is no variable, we have <em>mapped</em> the color aesthetic to a new variable with only one value (“navy”). So all the dots get set to the same color, but it’s not navy.</p>
</div>
<div id="setting-vs.mapping" class="section level5 unnumbered">
<h5>Setting vs. Mapping</h5>
<p>If we want to <em>set</em> the color to be navy for all of the dots, we do it outside the aesthetic, without a dataset variable:</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb180-1" data-line-number="1">Births78 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb180-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>date, <span class="dt">y=</span>births)) <span class="op">+</span><span class="st">   </span><span class="co"># map x &amp; y </span></a>
<a class="sourceLine" id="cb180-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">color =</span> <span class="st">&quot;navy&quot;</span>)   <span class="op">+</span><span class="st">     </span><span class="co"># set color</span></a>
<a class="sourceLine" id="cb180-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;US Births in 1978&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-15-1.png" width="480" style="display: block; margin: auto;" /></p>
<ul>
<li>Note that <code>color = &quot;navy&quot;</code> is now outside of the aesthetics list. That’s how <code>ggplot2</code> distinguishes between mapping and setting.</li>
</ul>
</div>
<div id="how-can-we-make-the-plot-4" class="section level5 unnumbered">
<h5>How can we make the plot?</h5>
<p><img src="03-viz_files/figure-html/unnamed-chunk-16-1.png" width="480" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb181-1" data-line-number="1">Births78 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb181-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>date, <span class="dt">y=</span>births)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb181-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">color=</span>wday)) <span class="op">+</span><span class="st">       </span><span class="co"># map color here</span></a>
<a class="sourceLine" id="cb181-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">color=</span><span class="st">&quot;navy&quot;</span>) <span class="op">+</span><span class="st">          </span><span class="co"># set color here</span></a>
<a class="sourceLine" id="cb181-5" data-line-number="5"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;US Births in 1978&quot;</span>)</a></code></pre></div>
<ul>
<li><p><code>ggplot()</code> establishes the default data and aesthetics for the geoms, but each geom may change the defaults.</p></li>
<li><p>good practice: put into <code>ggplot()</code> the things that affect all (or most) of the layers; rest in <code>geom_blah()</code></p></li>
</ul>
</div>
<div id="setting-vs.mapping-again" class="section level5 unnumbered">
<h5>Setting vs. Mapping (again)</h5>
<p>Information gets passed to the plot via:</p>
<ol style="list-style-type: lower-alpha">
<li><p><code>map</code> the <strong>variable</strong> information inside the aes (aesthetic) command</p></li>
<li><p><code>set</code> the <strong>non-variable</strong> information outside the aes (aesthetic) command</p></li>
</ol>
</div>
<div id="other-geoms" class="section level5 unnumbered">
<h5>Other geoms</h5>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb182-1" data-line-number="1"><span class="kw">apropos</span>(<span class="st">&quot;^geom_&quot;</span>)</a></code></pre></div>
<pre><code> [1] &quot;geom_abline&quot;      &quot;geom_area&quot;        &quot;geom_ash&quot;        
 [4] &quot;geom_bar&quot;         &quot;geom_barh&quot;        &quot;geom_bin2d&quot;      
 [7] &quot;geom_blank&quot;       &quot;geom_boxplot&quot;     &quot;geom_boxploth&quot;   
[10] &quot;geom_col&quot;         &quot;geom_colh&quot;        &quot;geom_contour&quot;    
[13] &quot;geom_count&quot;       &quot;geom_crossbar&quot;    &quot;geom_crossbarh&quot;  
[16] &quot;geom_curve&quot;       &quot;geom_density&quot;     &quot;geom_density_2d&quot; 
[19] &quot;geom_density2d&quot;   &quot;geom_dotplot&quot;     &quot;geom_errorbar&quot;   
[22] &quot;geom_errorbarh&quot;   &quot;geom_errorbarh&quot;   &quot;geom_freqpoly&quot;   
[25] &quot;geom_hex&quot;         &quot;geom_histogram&quot;   &quot;geom_histogramh&quot; 
[28] &quot;geom_hline&quot;       &quot;geom_jitter&quot;      &quot;geom_label&quot;      
[31] &quot;geom_line&quot;        &quot;geom_linerange&quot;   &quot;geom_linerangeh&quot; 
[34] &quot;geom_lm&quot;          &quot;geom_map&quot;         &quot;geom_path&quot;       
[37] &quot;geom_point&quot;       &quot;geom_pointrange&quot;  &quot;geom_pointrangeh&quot;
[40] &quot;geom_polygon&quot;     &quot;geom_qq&quot;          &quot;geom_qq_line&quot;    
[43] &quot;geom_quantile&quot;    &quot;geom_raster&quot;      &quot;geom_rect&quot;       
[46] &quot;geom_ribbon&quot;      &quot;geom_rug&quot;         &quot;geom_segment&quot;    
[49] &quot;geom_sf&quot;          &quot;geom_sf_label&quot;    &quot;geom_sf_text&quot;    
[52] &quot;geom_smooth&quot;      &quot;geom_spline&quot;      &quot;geom_spoke&quot;      
[55] &quot;geom_step&quot;        &quot;geom_text&quot;        &quot;geom_tile&quot;       
[58] &quot;geom_violin&quot;      &quot;geom_violinh&quot;     &quot;geom_vline&quot;      </code></pre>
<p>help pages will tell you their aesthetics, default stats, etc.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb184-1" data-line-number="1">?geom_area             <span class="co"># for example</span></a></code></pre></div>
</div>
<div id="lets-try-geom_area" class="section level5 unnumbered">
<h5>Let’s try <code>geom_area</code></h5>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb185-1" data-line-number="1">Births78 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb185-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>date, <span class="dt">y=</span>births, <span class="dt">fill=</span>wday)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb185-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_area</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb185-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;US Births in 1978&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-20-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Using area does not produce a good plot</p>
<ul>
<li>over plotting is hiding much of the data</li>
<li>extending y-axis to 0 may or may not be desirable.</li>
</ul>
</div>
<div id="side-note-what-makes-a-plot-good" class="section level5 unnumbered">
<h5>Side note: what makes a plot good?</h5>
<p>Most (all?) graphics are intended to help us make comparisons</p>
<ul>
<li>How does something change over time?</li>
<li>Do my treatments matter? How much?</li>
<li>Do men and women respond the same way?</li>
</ul>
<p><strong>Key plot metric:</strong> Does my plot make the comparisons I am interested in</p>
<ul>
<li>easily, and</li>
<li>accurately?</li>
</ul>
</div>
<div id="time-for-some-different-data" class="section level5 unnumbered">
<h5>Time for some different data</h5>
<p><code>HELPrct</code>: Health Evaluation and Linkage to Primary care randomized clinical trial</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb186-1" data-line-number="1"><span class="kw">head</span>(HELPrct)</a></code></pre></div>
<pre><code>##   age anysubstatus anysub cesd d1 daysanysub dayslink drugrisk e2b female
## 1  37            1    yes   49  3        177      225        0  NA      0
## 2  37            1    yes   30 22          2       NA        0  NA      0
## 3  26            1    yes   39  0          3      365       20  NA      0
## 4  39            1    yes   15  2        189      343        0   1      1
## 5  32            1    yes   39 12          2       57        0   1      0
## 6  47            1    yes    6  1         31      365        0  NA      1
##      sex g1b homeless i1 i2 id indtot linkstatus link       mcs      pcs
## 1   male yes   housed 13 26  1     39          1  yes 25.111990 58.41369
## 2   male yes homeless 56 62  2     43         NA &lt;NA&gt; 26.670307 36.03694
## 3   male  no   housed  0  0  3     41          0   no  6.762923 74.80633
## 4 female  no   housed  5  5  4     28          0   no 43.967880 61.93168
## 5   male  no homeless 10 13  5     38          1  yes 21.675755 37.34558
## 6 female  no   housed  4  4  6     29          0   no 55.508991 46.47521
##   pss_fr racegrp satreat sexrisk substance treat avg_drinks max_drinks
## 1      0   black      no       4   cocaine   yes         13         26
## 2      1   white      no       7   alcohol   yes         56         62
## 3     13   black      no       2    heroin    no          0          0
## 4     11   white     yes       4    heroin    no          5          5
## 5     10   black      no       6   cocaine    no         10         13
## 6      5   black      no       5   cocaine   yes          4          4</code></pre>
<p>Subjects admitted for treatment for addiction to one of three substances.</p>
</div>
<div id="who-are-the-people-in-the-study" class="section level5 unnumbered">
<h5>Who are the people in the study?</h5>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb188-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb188-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>substance)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb188-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_bar</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb188-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-22-1.png" width="480" style="display: block; margin: auto;" /></p>
<ul>
<li><p>Hmm. What’s up with <code>y</code>?</p>
<ul>
<li><code>stat_bin()</code> is being applied to the data before the
<code>geom_bar()</code> gets to do its thing. Binning creates the
<code>y</code> values.</li>
</ul></li>
</ul>
</div>
<div id="who-are-the-people-in-the-study-1" class="section level5 unnumbered">
<h5>Who are the people in the study?</h5>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb189-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb189-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>substance, <span class="dt">fill=</span>sex)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb189-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_bar</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb189-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-23-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="who-are-the-people-in-the-study-2" class="section level5 unnumbered">
<h5>Who are the people in the study?</h5>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb190-1" data-line-number="1"><span class="kw">library</span>(scales)</a>
<a class="sourceLine" id="cb190-2" data-line-number="2">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb190-3" data-line-number="3"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>substance, <span class="dt">fill=</span>sex)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb190-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_bar</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb190-5" data-line-number="5"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> percent)<span class="op">+</span></a>
<a class="sourceLine" id="cb190-6" data-line-number="6"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-24-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="who-are-the-people-in-the-study-3" class="section level5 unnumbered">
<h5>Who are the people in the study?</h5>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb191-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb191-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>substance, <span class="dt">fill=</span>sex)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb191-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">position=</span><span class="st">&quot;fill&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb191-4" data-line-number="4"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="st">&quot;actually, percent&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb191-5" data-line-number="5"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-25-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="how-old-are-people-in-the-help-study" class="section level5 unnumbered">
<h5>How old are people in the HELP study?</h5>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb192-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb192-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>age)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb192-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_histogram</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb192-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="03-viz_files/figure-html/unnamed-chunk-26-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Notice the messages</p>
<ul>
<li><p><code>stat_bin</code>: Histograms are not mapping the raw data but binned data.<br />
<code>stat_bin()</code> performs the data transformation.</p></li>
<li><p><code>binwidth</code>: a default <code>binwidth</code> has been selected, but we should really choose our own.</p></li>
</ul>
</div>
<div id="setting-the-binwidth-manually" class="section level5 unnumbered">
<h5>Setting the binwidth manually</h5>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb194-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb194-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>age)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb194-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth=</span><span class="dv">2</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb194-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-27-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="how-old-are-people-in-the-help-study-other-geoms" class="section level5 unnumbered">
<h5>How old are people in the HELP study? – Other geoms</h5>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb195-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb195-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>age)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb195-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_freqpoly</span>(<span class="dt">binwidth=</span><span class="dv">2</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb195-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-28-1.png" width="480" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb196-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb196-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>age)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb196-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_density</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb196-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-29-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="selecting-stat-and-geom-manually" class="section level5 unnumbered">
<h5>Selecting stat and geom manually</h5>
<p>Every geom comes with a default stat</p>
<ul>
<li>for simple cases, the stat is <code>stat_identity()</code> which does nothing</li>
<li>we can mix and match geoms and stats however we like</li>
</ul>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb197-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb197-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>age)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb197-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">stat=</span><span class="st">&quot;density&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb197-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-30-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="selecting-stat-and-geom-manually-1" class="section level5 unnumbered">
<h5>Selecting stat and geom manually</h5>
<p>Every stat comes with a default <code>geom</code>, every geom with a default stat</p>
<ul>
<li>we can specify stats instead of <code>geom</code>, if we prefer</li>
<li>we can mix and match geoms and stats however we like</li>
</ul>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb198-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb198-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>age)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb198-3" data-line-number="3"><span class="st">  </span><span class="kw">stat_density</span>( <span class="dt">geom=</span><span class="st">&quot;line&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb198-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-31-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="more-combinations" class="section level5 unnumbered">
<h5>More combinations</h5>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb199-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb199-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>age)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb199-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">stat=</span><span class="st">&quot;bin&quot;</span>, <span class="dt">binwidth=</span><span class="dv">3</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb199-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">stat=</span><span class="st">&quot;bin&quot;</span>, <span class="dt">binwidth=</span><span class="dv">3</span>)  <span class="op">+</span></a>
<a class="sourceLine" id="cb199-5" data-line-number="5"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-32-1.png" width="480" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb200-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb200-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>age)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb200-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_area</span>(<span class="dt">stat=</span><span class="st">&quot;bin&quot;</span>, <span class="dt">binwidth=</span><span class="dv">3</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb200-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>) </a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-33-1.png" width="480" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb201-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb201-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>age)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb201-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">stat=</span><span class="st">&quot;bin&quot;</span>, <span class="dt">binwidth=</span><span class="dv">3</span>, <span class="kw">aes</span>(<span class="dt">size=</span>..count..)) <span class="op">+</span></a>
<a class="sourceLine" id="cb201-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">stat=</span><span class="st">&quot;bin&quot;</span>, <span class="dt">binwidth=</span><span class="dv">3</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb201-5" data-line-number="5"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-34-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="how-much-do-they-drink-i1" class="section level5 unnumbered">
<h5>How much do they drink? (i1)</h5>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb202-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb202-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>i1)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb202-3" data-line-number="3"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-35-1.png" width="480" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb203-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb203-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>i1)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_density</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb203-3" data-line-number="3"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-36-1.png" width="480" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb204-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb204-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>i1)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_area</span>(<span class="dt">stat=</span><span class="st">&quot;density&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb204-3" data-line-number="3"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-37-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="covariates-adding-in-more-variables" class="section level5 unnumbered">
<h5>Covariates: Adding in more variables</h5>
<p>Using <code>color</code> and <code>linetype</code>:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb205-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb205-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>i1, <span class="dt">color=</span>substance, <span class="dt">linetype=</span>sex)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb205-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">stat=</span><span class="st">&quot;density&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb205-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-38-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>Using <code>color</code> and <code>facet</code>s</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb206-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb206-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>i1, <span class="dt">color=</span>substance)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb206-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">stat=</span><span class="st">&quot;density&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">facet_grid</span>( . <span class="op">~</span><span class="st"> </span>sex )<span class="op">+</span></a>
<a class="sourceLine" id="cb206-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-39-1.png" width="480" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb207-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb207-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>i1, <span class="dt">color=</span>substance)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb207-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">stat=</span><span class="st">&quot;density&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">facet_grid</span>( sex <span class="op">~</span><span class="st"> </span>. )<span class="op">+</span></a>
<a class="sourceLine" id="cb207-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-40-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="boxplots" class="section level5 unnumbered">
<h5>Boxplots</h5>
<p>Boxplots use <code>stat_quantile()</code> which computes a five-number summary (roughly the five quartiles of the data) and uses them to define a “box” and “whiskers”.</p>
<p>The quantitative variable must be <code>y</code>, and there must be an additional <code>x</code> variable.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb208-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb208-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>substance, <span class="dt">y=</span>age, <span class="dt">color=</span>sex)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb208-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_boxplot</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb208-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-41-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="horizontal-boxplots" class="section level5 unnumbered">
<h5>Horizontal boxplots</h5>
<p>Horizontal boxplots are obtained by flipping the coordinate system:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb209-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb209-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>substance, <span class="dt">y=</span>age, <span class="dt">color=</span>sex)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb209-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_boxplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb209-4" data-line-number="4"><span class="st">  </span><span class="kw">coord_flip</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb209-5" data-line-number="5"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-42-1.png" width="480" style="display: block; margin: auto;" /></p>
<ul>
<li><code>coord_flip()</code> may be used with other plots as well to reverse the roles
of <code>x</code> and <code>y</code> on the plot.</li>
</ul>
</div>
<div id="axes-scaling-with-boxplots" class="section level5 unnumbered">
<h5>Axes scaling with boxplots</h5>
<p>We can scale the continuous axis</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb210-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb210-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>substance, <span class="dt">y=</span>age, <span class="dt">color=</span>sex)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb210-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_boxplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb210-4" data-line-number="4"><span class="st">  </span><span class="kw">coord_trans</span>(<span class="dt">y=</span><span class="st">&quot;log&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb210-5" data-line-number="5"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-43-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="give-me-some-space" class="section level5 unnumbered">
<h5>Give me some space</h5>
<p>We’ve triggered a new feature: <code>dodge</code> (for dodging things left/right). We can control how much if we set the dodge manually.</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb211-1" data-line-number="1">HELPrct <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb211-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>substance, <span class="dt">y=</span>age, <span class="dt">color=</span>sex)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb211-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">position=</span><span class="kw">position_dodge</span>(<span class="dt">width=</span><span class="dv">1</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb211-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-44-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="issues-with-bigger-data" class="section level5 unnumbered">
<h5>Issues with bigger data</h5>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb212-1" data-line-number="1"><span class="kw">require</span>(NHANES)</a>
<a class="sourceLine" id="cb212-2" data-line-number="2"><span class="kw">dim</span>(NHANES)</a></code></pre></div>
<pre><code>## [1] 10000    76</code></pre>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb214-1" data-line-number="1">NHANES <span class="op">%&gt;%</span><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>Height, <span class="dt">y=</span>Weight)) <span class="op">+</span></a>
<a class="sourceLine" id="cb214-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="kw">facet_grid</span>( Gender <span class="op">~</span><span class="st"> </span>PregnantNow ) <span class="op">+</span></a>
<a class="sourceLine" id="cb214-3" data-line-number="3"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;National Health and Nutrition Examination Survey&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-45-1.png" width="480" style="display: block; margin: auto;" /></p>
<ul>
<li>Although we can see a generally positive association (as we would expect), the over plotting may be hiding information.</li>
</ul>
</div>
<div id="using-alpha-opacity" class="section level5 unnumbered">
<h5>Using alpha (opacity)</h5>
<p>One way to deal with over plotting is to set the opacity low.</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb215-1" data-line-number="1">NHANES <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb215-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>Height, <span class="dt">y=</span>Weight)) <span class="op">+</span></a>
<a class="sourceLine" id="cb215-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha=</span><span class="fl">0.01</span>) <span class="op">+</span><span class="st"> </span><span class="kw">facet_grid</span>( Gender <span class="op">~</span><span class="st"> </span>PregnantNow ) <span class="op">+</span></a>
<a class="sourceLine" id="cb215-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;National Health and Nutrition Examination Survey&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-46-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="geom_density2d" class="section level5 unnumbered">
<h5>geom_density2d</h5>
<p>Alternatively (or simultaneously) we might prefer a different <code>geom</code> altogether.</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb216-1" data-line-number="1">NHANES <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb216-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>Height, <span class="dt">y=</span>Weight)) <span class="op">+</span></a>
<a class="sourceLine" id="cb216-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_density2d</span>() <span class="op">+</span><span class="st"> </span><span class="kw">facet_grid</span>( Gender <span class="op">~</span><span class="st"> </span>PregnantNow ) <span class="op">+</span></a>
<a class="sourceLine" id="cb216-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;National Health and Nutrition Examination Survey&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-47-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="multiple-layers" class="section level5 unnumbered">
<h5>Multiple layers</h5>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb217-1" data-line-number="1"><span class="kw">ggplot</span>( <span class="dt">data=</span>HELPrct, <span class="kw">aes</span>(<span class="dt">x=</span>sex, <span class="dt">y=</span>age)) <span class="op">+</span></a>
<a class="sourceLine" id="cb217-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">outlier.size=</span><span class="dv">0</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb217-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">alpha=</span>.<span class="dv">6</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb217-4" data-line-number="4"><span class="st">  </span><span class="kw">coord_flip</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb217-5" data-line-number="5"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-48-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="multiple-layers-1" class="section level5 unnumbered">
<h5>Multiple layers</h5>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb218-1" data-line-number="1"><span class="kw">ggplot</span>( <span class="dt">data=</span>HELPrct, <span class="kw">aes</span>(<span class="dt">x=</span>sex, <span class="dt">y=</span>age)) <span class="op">+</span></a>
<a class="sourceLine" id="cb218-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">outlier.size=</span><span class="dv">0</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb218-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha=</span>.<span class="dv">6</span>, <span class="dt">position=</span><span class="kw">position_jitter</span>(<span class="dt">width=</span>.<span class="dv">1</span>, <span class="dt">height=</span><span class="dv">0</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb218-4" data-line-number="4"><span class="st">  </span><span class="kw">coord_flip</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb218-5" data-line-number="5"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-49-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="things-i-havent-mentioned-much" class="section level5 unnumbered">
<h5>Things I haven’t mentioned (much)</h5>
<ul>
<li><p>coords (<code>coord_flip()</code> is good to know about)</p></li>
<li><p>themes (for customizing appearance)</p></li>
<li><p>position (<code>position_dodge()</code>, <code>position_jitterdodge()</code>, <code>position_stack()</code>, etc.)</p></li>
<li><p>transforming axes</p></li>
</ul>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb219-1" data-line-number="1"><span class="kw">require</span>(ggthemes)</a>
<a class="sourceLine" id="cb219-2" data-line-number="2"><span class="kw">ggplot</span>(Births78, <span class="kw">aes</span>(<span class="dt">x=</span>date, <span class="dt">y=</span>births)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb219-3" data-line-number="3"><span class="st">          </span><span class="kw">theme_wsj</span>()</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-50-1.png" width="1344" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb220-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data=</span>HELPrct, <span class="kw">aes</span>(<span class="dt">x=</span>substance, <span class="dt">y=</span>age, <span class="dt">color=</span>sex)) <span class="op">+</span></a>
<a class="sourceLine" id="cb220-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">coef =</span> <span class="dv">10</span>, <span class="dt">position=</span><span class="kw">position_dodge</span>()) <span class="op">+</span></a>
<a class="sourceLine" id="cb220-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color=</span>sex, <span class="dt">fill=</span>sex), <span class="dt">position=</span><span class="kw">position_jitterdodge</span>()) <span class="op">+</span></a>
<a class="sourceLine" id="cb220-4" data-line-number="4"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-51-1.png" width="1344" style="display: block; margin: auto;" /></p>
</div>
<div id="a-little-bit-of-everything" class="section level5 unnumbered">
<h5>A little bit of everything</h5>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb221-1" data-line-number="1"><span class="kw">ggplot</span>( <span class="dt">data=</span>HELPrct, <span class="kw">aes</span>(<span class="dt">x=</span>substance, <span class="dt">y=</span>age, <span class="dt">color=</span>sex)) <span class="op">+</span></a>
<a class="sourceLine" id="cb221-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">coef =</span> <span class="dv">10</span>, <span class="dt">position=</span><span class="kw">position_dodge</span>(<span class="dt">width=</span><span class="dv">1</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb221-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">fill=</span>sex), <span class="dt">alpha=</span>.<span class="dv">5</span>, </a>
<a class="sourceLine" id="cb221-4" data-line-number="4">             <span class="dt">position=</span><span class="kw">position_jitterdodge</span>(<span class="dt">dodge.width=</span><span class="dv">1</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb221-5" data-line-number="5"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>homeless)<span class="op">+</span></a>
<a class="sourceLine" id="cb221-6" data-line-number="6"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;HELP clinical trial at detoxification unit&quot;</span>)</a></code></pre></div>
<p><img src="03-viz_files/figure-html/unnamed-chunk-52-1.png" width="1344" style="display: block; margin: auto;" /></p>
</div>
<div id="want-to-learn-more" class="section level4 unnumbered">
<h4>Want to learn more?</h4>
<ul>
<li><p><a href="http://docs.ggplot2.org/">docs.ggplot2.org/</a></p></li>
<li><p>Winston Chang’s: <em>R Graphics Cookbook</em></p></li>
</ul>
<p><img src="../images/cookbook.jpg" width="800px" style="display: block; margin: auto;" /></p>
</div>
<div id="what-else-can-we-do" class="section level4 unnumbered">
<h4>What else can we do?</h4>
<p><code>shiny</code></p>
<ul>
<li><p>interactive graphics / modeling</p></li>
<li><p><a href="https://shiny.rstudio.com/" class="uri">https://shiny.rstudio.com/</a></p></li>
</ul>
<p><code>plotly</code></p>
<blockquote>
<p><code>Plotly</code> is an R package for creating interactive web-based graphs via plotly’s JavaScript graphing library, <code>plotly.js</code>. The <code>plotly</code> R library contains the <code>ggplotly</code> function , which will convert <code>ggplot2</code> figures into a Plotly object. Furthermore, you have the option of manipulating the Plotly object with the <code>style</code> function.</p>
</blockquote>
<ul>
<li><a href="https://plot.ly/ggplot2/getting-started/" class="uri">https://plot.ly/ggplot2/getting-started/</a></li>
</ul>
<p>Dynamic documents</p>
<ul>
<li>combination of <code>RMarkdown</code>, <code>ggvis</code>, and <code>shiny</code></li>
</ul>

</div>
</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-MDSR">
<p>Baumer, Kaplan, and Horton. 2017. <em>Modern Data Science with R</em>. CRC Press. <a href="https://mdsr-book.github.io/">https://mdsr-book.github.io/</a>.</p>
</div>
<div id="ref-Wickham14">
<p>Wickham, Hadley. 2014. “Tidy Data.” <em>Journal of Statistical Software</em> 59 (10). <a href="http://www.jstatsoft.org/v59/i10/paper">http://www.jstatsoft.org/v59/i10/paper</a>.</p>
</div>
<div id="ref-Yau">
<p>Yau, Nathan. 2013. <em>Data Points: Visualization That Means Something</em>. Wiley.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="wrang.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/03-viz.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["Starting-R.pdf", "Starting-R.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
