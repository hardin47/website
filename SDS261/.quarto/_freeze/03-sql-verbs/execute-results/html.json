{
  "hash": "b862e8f39559d812052e714641126f74",
  "result": {
    "markdown": "# SQL clauses {#sec-sql-clauses}\n\n\n\n\n\n\nMost of this chapter will focus on the **SQL** commands needed to run queries of the database.  Much of the syntax is strikingly familiar to tidy verbs in **R**.  However, this chapter starts with a few **SQL** specific tools used to learn about the tables in any particular database.\n\n## Looking at the tables in the database\n\nConsider a database of taxi rides from the <a href = \"https://en.wikipedia.org/wiki/Yellow_Cab_Company\" target = \"_blank\">Yellow Cab</a> company in NYC in March of 2014.\n\n<!--\nHadley Wickham discusses how to use Sys.getenv: https://cran.r-project.org/web/packages/httr/vignettes/secrets.html\n-->\n\n\n::: {.cell fig.asp='0.618'}\n\n```{.r .cell-code}\nlibrary(mdsr)\ncon_taxi <- DBI::dbConnect(\n  RMariaDB::MariaDB(),\n  dbname = \"nyctaxi\",\n  host = Sys.getenv(\"MDSR_HOST\"),\n  user = Sys.getenv(\"MDSR_USER\"),\n  password = Sys.getenv(\"MDSR_PWD\")\n)\n```\n:::\n\n::: {.cell output.var='show' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSHOW TABLES;\n```\n:::\n\n::: {#tbl-show .cell tbl-cap='SHOW all the TABLES in the nyctaxi database.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Tables_in_nyctaxi </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> yellow_old </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nThere is only one table in the `nyctaxi` database, called `yellow_old`.\n\n\n\n::: {.cell output.var='select_describe' fig.asp='0.618'}\n\n```{.sql .cell-code}\nDESCRIBE yellow_old;\n```\n:::\n\n::: {#tbl-select-describe .cell tbl-cap='DESCRIBE variables in the yellow_old table.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Field </th>\n   <th style=\"text-align:left;\"> Type </th>\n   <th style=\"text-align:left;\"> Null </th>\n   <th style=\"text-align:left;\"> Key </th>\n   <th style=\"text-align:left;\"> Default </th>\n   <th style=\"text-align:left;\"> Extra </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> vendor_id </td>\n   <td style=\"text-align:left;\"> text </td>\n   <td style=\"text-align:left;\"> YES </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> pickup_datetime </td>\n   <td style=\"text-align:left;\"> text </td>\n   <td style=\"text-align:left;\"> YES </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> dropoff_datetime </td>\n   <td style=\"text-align:left;\"> text </td>\n   <td style=\"text-align:left;\"> YES </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> passenger_count </td>\n   <td style=\"text-align:left;\"> bigint(20) </td>\n   <td style=\"text-align:left;\"> YES </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> trip_distance </td>\n   <td style=\"text-align:left;\"> double </td>\n   <td style=\"text-align:left;\"> YES </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> pickup_longitude </td>\n   <td style=\"text-align:left;\"> double </td>\n   <td style=\"text-align:left;\"> YES </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> pickup_latitude </td>\n   <td style=\"text-align:left;\"> double </td>\n   <td style=\"text-align:left;\"> YES </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> rate_code </td>\n   <td style=\"text-align:left;\"> bigint(20) </td>\n   <td style=\"text-align:left;\"> YES </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> store_and_fwd_flag </td>\n   <td style=\"text-align:left;\"> text </td>\n   <td style=\"text-align:left;\"> YES </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> dropoff_longitude </td>\n   <td style=\"text-align:left;\"> double </td>\n   <td style=\"text-align:left;\"> YES </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> dropoff_latitude </td>\n   <td style=\"text-align:left;\"> double </td>\n   <td style=\"text-align:left;\"> YES </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> payment_type </td>\n   <td style=\"text-align:left;\"> text </td>\n   <td style=\"text-align:left;\"> YES </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> fare_amount </td>\n   <td style=\"text-align:left;\"> double </td>\n   <td style=\"text-align:left;\"> YES </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> surcharge </td>\n   <td style=\"text-align:left;\"> double </td>\n   <td style=\"text-align:left;\"> YES </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> mta_tax </td>\n   <td style=\"text-align:left;\"> double </td>\n   <td style=\"text-align:left;\"> YES </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> tip_amount </td>\n   <td style=\"text-align:left;\"> double </td>\n   <td style=\"text-align:left;\"> YES </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> tolls_amount </td>\n   <td style=\"text-align:left;\"> double </td>\n   <td style=\"text-align:left;\"> YES </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> total_amount </td>\n   <td style=\"text-align:left;\"> double </td>\n   <td style=\"text-align:left;\"> YES </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\nSimilarly, the `DESCRIBE` command shows the 18 field names (variables) in the `yellow_old` table.  Some of the variables are characters (`text`) and some are numeric (either `double` or `bigint`)\n\n\n::: {.callout-tip icon=false}\n\n## <i class=\"fas fa-triangle-exclamation\"></i> Watch out!\n\n**SQL** clauses must be written in the following order.\n:::\n\nMost engagements with SQL are done through queries. Queries in **SQL** start with the `SELECT` keyword and consist of several clauses, which must be written in the following order:^[Taken directly from <a href = \"https://mdsr-book.github.io/mdsr3e/15-sqlI.html#the-sql-data-manipulation-language\" target = \"_blank\">Modern Data Science with R</a>]\n\n* `SELECT` allows you to list the columns, or functions operating on columns, that you want to retrieve. This is an analogous operation to the `select()` verb in **dplyr**, potentially combined with `mutate()` or `summarize()`.\n* `FROM` specifies the table where the data are.\n* `JOIN` allows you to stitch together two or more tables using a key. This is analogous to the `inner_join()` and `left_join()` commands in **dplyr**.  More details of `JOIN` are given in @sec-join.\n* `WHERE` allows you to filter the records according to some criteria and is an analogous operation to the `filter()` verb in **dplyr**.  Note, even though the `WHERE` clause is written after `SELECT` and `JOIN`, it is actually evaluated *before* the `SELECT` or `JOIN` clauses (which is why `WHERE` only works on the original data, not the results set).\n* `GROUP BY` allows you to aggregate the records according to some shared value and is an analogous operation to the `group_by()` verb in **dplyr**.\n* `HAVING` is like a `WHERE` clause that operates on the result set—not the records themselves and is analogous to applying a second `filter()` command in **dplyr**, after the rows have already been aggregated.\n* `ORDER BY` is exactly what it sounds like—it specifies a condition for ordering the rows of the result set and is analogous to the `arrange()` verb in **dplyr**.\n* `LIMIT` restricts the number of rows in the output and is similar to the **R** commands `head()` and `slice()`.\n\n## SELECT ... FROM {#sec-select}\n\n::: {.callout-tip appearance=\"minimal\"}\n\n**R** function: `select()`\n\n:::\n\nA **SQL** query starts with a `SELECT` command and has a corresponding `FROM` to indicate the table being queried.  Columns may be specified, or the `*` will indicate that every column in the table should be returned.\n\nThe shortest **SQL** query is the following `SELECT` command.  Do not run this command!!! The `yellow_old` table has 15 million rows, and we do not want to look at them simultaneously.\n\n\n::: {.cell fig.asp='0.618'}\n\n```{.r .cell-code}\nDO NOT RUN:  SELECT * FROM yellow_old;\n```\n:::\n\n\n::: {.callout-tip icon=false}\n\n## <i class=\"fas fa-triangle-exclamation\"></i> Watch out!\n\nDo not run the following command unless you are **certain** that the table from which you are querying is small enough so that the query results fit easily into your memory.\n\n`SELECT` * `FROM` table;\n:::\n\nInstead, to look at the top of the table, `SELECT` the first few rows.  The `LIMIT` command specifies which rows to select:  the first number is the number of rows to skip (0 rows skipped), the second number is the number of rows to print up to (up to row 14).\n\n\n::: {.cell output.var='select_14' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT * FROM yellow_old LIMIT 0, 14;\n\n```\n:::\n\n::: {#tbl-select-14 .cell tbl-cap='SELECT the first 14 rows of the table.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> vendor_id </th>\n   <th style=\"text-align:left;\"> pickup_datetime </th>\n   <th style=\"text-align:left;\"> dropoff_datetime </th>\n   <th style=\"text-align:right;\"> passenger_count </th>\n   <th style=\"text-align:right;\"> trip_distance </th>\n   <th style=\"text-align:right;\"> pickup_longitude </th>\n   <th style=\"text-align:right;\"> pickup_latitude </th>\n   <th style=\"text-align:right;\"> rate_code </th>\n   <th style=\"text-align:left;\"> store_and_fwd_flag </th>\n   <th style=\"text-align:right;\"> dropoff_longitude </th>\n   <th style=\"text-align:right;\"> dropoff_latitude </th>\n   <th style=\"text-align:left;\"> payment_type </th>\n   <th style=\"text-align:right;\"> fare_amount </th>\n   <th style=\"text-align:right;\"> surcharge </th>\n   <th style=\"text-align:right;\"> mta_tax </th>\n   <th style=\"text-align:right;\"> tip_amount </th>\n   <th style=\"text-align:right;\"> tolls_amount </th>\n   <th style=\"text-align:right;\"> total_amount </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:07:38 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:16:26 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 2.0 </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -73.9 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 9.0 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 2.0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 12.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:08:03 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:12:51 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 1.2 </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 6.0 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 1.0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 8.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:08:51 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:13:18 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> -73.9 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 5.0 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 1.2 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 7.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:09:20 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:24:18 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 3.5 </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.8 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 14.0 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 3.0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 18.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:09:46 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:22:34 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1.8 </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 10.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 1.0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 12.5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:12:41 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:15:38 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 4.0 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 5.5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:12:11 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:27:38 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 3.7 </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.8 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 14.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 3.1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 18.6 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:13:55 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:34:54 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 5.4 </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.8 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 20.0 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 3.0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 24.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:14:06 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:28:25 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 3.5 </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.8 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 13.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 2.9 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 17.4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:13:10 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:38:54 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 5.9 </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.8 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 21.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 2.0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 24.5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:14:13 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:25:49 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1.9 </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.8 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.8 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 10.0 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 2.2 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 13.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:15:22 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:30:04 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 3.2 </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 13.0 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 2.8 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 16.8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:16:28 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:28:05 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 2.8 </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 11.0 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 1.5 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 13.5 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nSpeaking of which, how many rows are there in the `yellow_old` table?  That is, how many taxi rides are recorded?  Now `SELECT` is used with a summary function, `COUNT()`.  Instead of using a separate summary function (like `mutate()` or `summarize()`), all the work is done inside the `SELECT` call.\n\n\n::: {.cell output.var='select_count' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT COUNT(*) FROM yellow_old;\n```\n:::\n\n::: {#tbl-select-count .cell tbl-cap='COUNT(*) the number of rows in the entire yellow_old table.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> COUNT(*) </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 15428128 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nYikes, more than 15 million taxi rides!!!!\n\n\nYou might have noticed that the `yellow_old` table has two different datetime variables (one for pickup, the other for drop-off).  We can use the information to assess the length of each ride (in time, not distance).  However, the variables are stored in SQL as character strings instead of in a DateTime format (even though they **look** like they are stored in a DateTime format!), see @tbl-select-describe.  Fortunately for us, **SQL** has functionality to convert a `text` Type into `DateTime` type (POSIXct is a special type of DateTime formatting).\n\n\n::: {.cell output.var='str_date' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT\n      pickup_datetime, dropoff_datetime,\n      STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\") AS pickup,\n      STR_TO_DATE(dropoff_datetime, \"%Y-%m-%d %T\") AS dropoff\n   FROM yellow_old\n   LIMIT 0, 10;\n```\n:::\n\n::: {#tbl-str-date .cell tbl-cap='Convert the pickup and drop-off times to date objects using STR_TO_DATE.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> pickup_datetime </th>\n   <th style=\"text-align:left;\"> dropoff_datetime </th>\n   <th style=\"text-align:left;\"> pickup </th>\n   <th style=\"text-align:left;\"> dropoff </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:07:38 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:16:26 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:07:38 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:16:26 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:08:03 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:12:51 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:08:03 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:12:51 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:08:51 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:13:18 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:08:51 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:13:18 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:09:20 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:24:18 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:09:20 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:24:18 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:09:46 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:22:34 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:09:46 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:22:34 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:12:41 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:15:38 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:12:41 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:15:38 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:12:11 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:27:38 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:12:11 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:27:38 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:13:55 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:34:54 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:13:55 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:34:54 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:14:06 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:28:25 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:14:06 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:28:25 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nNow that the variables are no longer strings, we can subtract them to figure out the number of minutes for each taxi ride.  Unfortunately, the following code won't run because neither of the variables `pickup` or `dropoff` are in the table `yellow_old`.\n\n\n::: {.cell fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT\n      pickup_datetime, dropoff_datetime,\n      STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\") AS pickup,\n      STR_TO_DATE(dropoff_datetime, \"%Y-%m-%d %T\") AS dropoff.\n      TIMEDIFF(pickup, dropoff) AS length_time\n   FROM yellow_old\n   LIMIT 0, 10;\n```\n:::\n\n\n\nInstead, we need two layers of `SELECT` commands so that the first `SELECT` (i.e., inside) layer creates the new variables, and the second `SELECT` (i.e., outside) layer subtracts the two times.\n\n\n::: {.cell output.var='length_time2' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT \n   pickup,\n   dropoff, \n   TIMEDIFF(pickup, dropoff) AS length_time \nFROM (\n   SELECT\n      STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\") AS pickup,\n      STR_TO_DATE(dropoff_datetime, \"%Y-%m-%d %T\") AS dropoff\n   FROM yellow_old)\n   AS subquery_table\nLIMIT 0, 20;\n```\n:::\n\n::: {#tbl-length-time2 .cell tbl-cap='Use TIMEDIFF to find the length (time) of the ride.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> pickup </th>\n   <th style=\"text-align:left;\"> dropoff </th>\n   <th style=\"text-align:left;\"> length_time </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:07:38 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:16:26 </td>\n   <td style=\"text-align:left;\"> 00:08:48 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:08:03 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:12:51 </td>\n   <td style=\"text-align:left;\"> 00:04:48 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:08:51 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:13:18 </td>\n   <td style=\"text-align:left;\"> 00:04:27 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:09:20 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:24:18 </td>\n   <td style=\"text-align:left;\"> 00:14:58 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:09:46 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:22:34 </td>\n   <td style=\"text-align:left;\"> 00:12:48 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:12:41 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:15:38 </td>\n   <td style=\"text-align:left;\"> 00:02:57 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:12:11 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:27:38 </td>\n   <td style=\"text-align:left;\"> 00:15:27 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:13:55 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:34:54 </td>\n   <td style=\"text-align:left;\"> 00:20:59 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:14:06 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:28:25 </td>\n   <td style=\"text-align:left;\"> 00:14:19 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:13:10 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:38:54 </td>\n   <td style=\"text-align:left;\"> 00:25:44 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:14:13 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:25:49 </td>\n   <td style=\"text-align:left;\"> 00:11:36 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:15:22 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:30:04 </td>\n   <td style=\"text-align:left;\"> 00:14:42 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:16:28 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:28:05 </td>\n   <td style=\"text-align:left;\"> 00:11:37 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:25:34 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 02:01:03 </td>\n   <td style=\"text-align:left;\"> 00:35:29 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:26:39 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:30:03 </td>\n   <td style=\"text-align:left;\"> 00:03:24 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:27:16 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:46:59 </td>\n   <td style=\"text-align:left;\"> 00:19:43 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:28:39 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:30:53 </td>\n   <td style=\"text-align:left;\"> 00:02:14 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:29:40 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:35:01 </td>\n   <td style=\"text-align:left;\"> 00:05:21 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:28:51 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:43:06 </td>\n   <td style=\"text-align:left;\"> 00:14:15 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nAlternatively, the `STR_TO_DATE()` function can be applied inside the `TIMEDIFF()` function so that the full (now only) `SELECT` command is being used only on variables that are in the original table.\n\n\n::: {.cell output.var='length_time3' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT \n   pickup_datetime,\n   dropoff_datetime, \n   TIMEDIFF(STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\"), \n            STR_TO_DATE(dropoff_datetime, \"%Y-%m-%d %T\")) AS length_time \nFROM yellow_old\nLIMIT 0, 20;\n```\n:::\n\n::: {#tbl-length-time3 .cell tbl-cap='Alternative method to find the length (time) of the ride.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> pickup_datetime </th>\n   <th style=\"text-align:left;\"> dropoff_datetime </th>\n   <th style=\"text-align:left;\"> length_time </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:07:38 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:16:26 </td>\n   <td style=\"text-align:left;\"> 00:08:48 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:08:03 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:12:51 </td>\n   <td style=\"text-align:left;\"> 00:04:48 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:08:51 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:13:18 </td>\n   <td style=\"text-align:left;\"> 00:04:27 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:09:20 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:24:18 </td>\n   <td style=\"text-align:left;\"> 00:14:58 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:09:46 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:22:34 </td>\n   <td style=\"text-align:left;\"> 00:12:48 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:12:41 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:15:38 </td>\n   <td style=\"text-align:left;\"> 00:02:57 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:12:11 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:27:38 </td>\n   <td style=\"text-align:left;\"> 00:15:27 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:13:55 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:34:54 </td>\n   <td style=\"text-align:left;\"> 00:20:59 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:14:06 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:28:25 </td>\n   <td style=\"text-align:left;\"> 00:14:19 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:13:10 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:38:54 </td>\n   <td style=\"text-align:left;\"> 00:25:44 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:14:13 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:25:49 </td>\n   <td style=\"text-align:left;\"> 00:11:36 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:15:22 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:30:04 </td>\n   <td style=\"text-align:left;\"> 00:14:42 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:16:28 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:28:05 </td>\n   <td style=\"text-align:left;\"> 00:11:37 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:25:34 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 02:01:03 </td>\n   <td style=\"text-align:left;\"> 00:35:29 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:26:39 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:30:03 </td>\n   <td style=\"text-align:left;\"> 00:03:24 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:27:16 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:46:59 </td>\n   <td style=\"text-align:left;\"> 00:19:43 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:28:39 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:30:53 </td>\n   <td style=\"text-align:left;\"> 00:02:14 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:29:40 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:35:01 </td>\n   <td style=\"text-align:left;\"> 00:05:21 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2014-03-01 01:28:51 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:43:06 </td>\n   <td style=\"text-align:left;\"> 00:14:15 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\nKeep in mind that there is a distinction between clauses that operate on the *variables of the original table* versus those that operate on the *variables of the results set*.  The variables `pickup_datetime` and `dropoff_datetime` are columns in the original table - they are written to disk on the **SQL** server.  The variables `pickup`, `dropoff`, and `length_time` exist only in the results set, which is passed from the server (**SQL** server) to the client (e.g., **RStudio** or **DBeaver**) and is not written to disk.\n\n## SELECT DISTINCT\n\n`SELECT DISTINCT` returns only unique rows.  That is, it filters out all the duplicates of a variable or a combination of variables.  Note that I have a larger limit on the query that I needed, just to make sure I got all the levels.\n\n\n::: {.cell output.var='distinct1' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT DISTINCT payment_type\nFROM yellow_old\nLIMIT 0, 20;\n```\n:::\n\n::: {#tbl-distinct1 .cell tbl-cap='The distinct values of payment types. `CRD` is credit card; `CSH` is cash; `NOC` is no charge; `DIS` is dispute.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> payment_type </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CRD </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> NOC </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> DIS </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> UNK </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n::: {.cell output.var='distinct2' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT DISTINCT vendor_id, payment_type\nFROM yellow_old\nLIMIT 0, 20;\n```\n:::\n\n::: {#tbl-distinct2 .cell tbl-cap='The distinct values of vendor ID and payment types, combined. `VTS` is Verifone Transportation Systems and `CMT` is Mobile Knowledge Systems Inc. `CRD` is credit card; `CSH` is cash; `NOC` is no charge; `DIS` is dispute.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> vendor_id </th>\n   <th style=\"text-align:left;\"> payment_type </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> CRD </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> CSH </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> NOC </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> DIS </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> VTS </td>\n   <td style=\"text-align:left;\"> CRD </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> VTS </td>\n   <td style=\"text-align:left;\"> CSH </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> VTS </td>\n   <td style=\"text-align:left;\"> UNK </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n## WHERE\n\n::: {.callout-tip appearance=\"minimal\"}\n\n**R** function: `filter()`\n\n:::\n\nThe `WHERE` clause is analogous to the `filter()` function in **dplyr**.  However, keep in mind that there are two **SQL** commands that resemble the **dplyr** `filter()` function. `WHERE` operates on the original data in the table and `HAVING` operates on the result set. See below for examples using `HAVING`.\n\nWhat was the fare for those taxi rides where the `tip_amount` was more than $10 and the person used cash? (Note that in **SQL** the equality logical is `=` and in **R** the equality logical is `==`.) \n\n\n::: {.cell output.var='select_10' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT payment_type, fare_amount, tip_amount, total_amount\nFROM yellow_old\nWHERE tip_amount > 10\n   AND payment_type = \"CSH\"\nLIMIT 0, 10;\n\n```\n:::\n\n::: {#tbl-select-10 .cell tbl-cap='WHERE to subset the queried rows.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> payment_type </th>\n   <th style=\"text-align:right;\"> fare_amount </th>\n   <th style=\"text-align:right;\"> tip_amount </th>\n   <th style=\"text-align:right;\"> total_amount </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 65.5 </td>\n   <td style=\"text-align:right;\"> 15.3 </td>\n   <td style=\"text-align:right;\"> 91.8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 52.0 </td>\n   <td style=\"text-align:right;\"> 11.6 </td>\n   <td style=\"text-align:right;\"> 69.4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 52.0 </td>\n   <td style=\"text-align:right;\"> 11.6 </td>\n   <td style=\"text-align:right;\"> 69.4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 55.0 </td>\n   <td style=\"text-align:right;\"> 16.2 </td>\n   <td style=\"text-align:right;\"> 81.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 71.5 </td>\n   <td style=\"text-align:right;\"> 20.0 </td>\n   <td style=\"text-align:right;\"> 103.5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 70.0 </td>\n   <td style=\"text-align:right;\"> 16.2 </td>\n   <td style=\"text-align:right;\"> 97.1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 95.0 </td>\n   <td style=\"text-align:right;\"> 21.9 </td>\n   <td style=\"text-align:right;\"> 131.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 62.5 </td>\n   <td style=\"text-align:right;\"> 15.5 </td>\n   <td style=\"text-align:right;\"> 93.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 66.0 </td>\n   <td style=\"text-align:right;\"> 15.0 </td>\n   <td style=\"text-align:right;\"> 90.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 65.0 </td>\n   <td style=\"text-align:right;\"> 13.2 </td>\n   <td style=\"text-align:right;\"> 79.2 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n`BETWEEN` can be used to specify a range of values for a numeric value. `BETWEEN` is inclusive.\n\n\n::: {.cell output.var='where_1012a' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT payment_type, fare_amount, tip_amount, total_amount\nFROM yellow_old\nWHERE tip_amount BETWEEN 10 and 12\n   AND payment_type = \"CSH\"\nLIMIT 0, 10;\n\n```\n:::\n\n::: {#tbl-where-1012a .cell tbl-cap='BETWEEN in the WHERE clause.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> payment_type </th>\n   <th style=\"text-align:right;\"> fare_amount </th>\n   <th style=\"text-align:right;\"> tip_amount </th>\n   <th style=\"text-align:right;\"> total_amount </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 52.0 </td>\n   <td style=\"text-align:right;\"> 11.6 </td>\n   <td style=\"text-align:right;\"> 69.4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 52.0 </td>\n   <td style=\"text-align:right;\"> 11.6 </td>\n   <td style=\"text-align:right;\"> 69.4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 88.0 </td>\n   <td style=\"text-align:right;\"> 10.0 </td>\n   <td style=\"text-align:right;\"> 107.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 72.0 </td>\n   <td style=\"text-align:right;\"> 10.0 </td>\n   <td style=\"text-align:right;\"> 94.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 64.5 </td>\n   <td style=\"text-align:right;\"> 10.0 </td>\n   <td style=\"text-align:right;\"> 85.5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 66.0 </td>\n   <td style=\"text-align:right;\"> 12.0 </td>\n   <td style=\"text-align:right;\"> 93.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 52.0 </td>\n   <td style=\"text-align:right;\"> 11.6 </td>\n   <td style=\"text-align:right;\"> 69.4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 69.0 </td>\n   <td style=\"text-align:right;\"> 10.0 </td>\n   <td style=\"text-align:right;\"> 88.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 90.0 </td>\n   <td style=\"text-align:right;\"> 10.0 </td>\n   <td style=\"text-align:right;\"> 100.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 52.0 </td>\n   <td style=\"text-align:right;\"> 11.6 </td>\n   <td style=\"text-align:right;\"> 69.4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n`IN` is similar to the **dplyr** `%in%` function which specifies distinct values for the variable.\n\n\n\n::: {.cell output.var='where_1012b' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT payment_type, fare_amount, tip_amount, total_amount\nFROM yellow_old\nWHERE tip_amount IN (10, 12)\n   AND payment_type = \"CSH\"\nLIMIT 0, 10;\n\n```\n:::\n\n::: {#tbl-where-1012b .cell tbl-cap='IN in the WHERE clause.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> payment_type </th>\n   <th style=\"text-align:right;\"> fare_amount </th>\n   <th style=\"text-align:right;\"> tip_amount </th>\n   <th style=\"text-align:right;\"> total_amount </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 88.0 </td>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:right;\"> 107.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 72.0 </td>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:right;\"> 94.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 64.5 </td>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:right;\"> 85.5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 66.0 </td>\n   <td style=\"text-align:right;\"> 12 </td>\n   <td style=\"text-align:right;\"> 93.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 69.0 </td>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:right;\"> 88.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 90.0 </td>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:right;\"> 100.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 74.5 </td>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:right;\"> 90.3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 89.0 </td>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:right;\"> 118.1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 52.0 </td>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:right;\"> 67.8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 66.0 </td>\n   <td style=\"text-align:right;\"> 12 </td>\n   <td style=\"text-align:right;\"> 90.0 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nThe `WHERE` clause can be established by a number of logical commands combined using either `AND` or `OR`.  Usually it is important to use parentheses with `OR` logicals to make sure the desired query is return.  Consider the difference between the following queries.  In **SQL** (as in many programming languages), `AND` takes precedent over `OR` in the order of operations, when there are no parentheses.  (I was taught to remember order of operations using \"please excuse my dear aunt Sally.\")  The order of operations on the first query groups the second two conditions into one because `AND` take precedence over `OR` (as if the query was `tip_amount BETWEEN 10 and 12 OR (total_amount BETWEEN 100 and 112 AND payment_type = \"CSH\")`).\n\n\n::: {.cell output.var='where_1012c' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT payment_type, fare_amount, tip_amount, total_amount\nFROM yellow_old\nWHERE tip_amount BETWEEN 10 and 12 OR \n      total_amount BETWEEN 100 and 112 AND \n      payment_type = \"CSH\"\nLIMIT 0, 10;\n```\n:::\n\n::: {#tbl-where-1012c .cell tbl-cap='OR and AND without parentheses.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> payment_type </th>\n   <th style=\"text-align:right;\"> fare_amount </th>\n   <th style=\"text-align:right;\"> tip_amount </th>\n   <th style=\"text-align:right;\"> total_amount </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 52.0 </td>\n   <td style=\"text-align:right;\"> 10.5 </td>\n   <td style=\"text-align:right;\"> 63.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 35.0 </td>\n   <td style=\"text-align:right;\"> 10.2 </td>\n   <td style=\"text-align:right;\"> 51.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 52.0 </td>\n   <td style=\"text-align:right;\"> 11.6 </td>\n   <td style=\"text-align:right;\"> 69.4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 30.5 </td>\n   <td style=\"text-align:right;\"> 10.8 </td>\n   <td style=\"text-align:right;\"> 47.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 52.0 </td>\n   <td style=\"text-align:right;\"> 10.5 </td>\n   <td style=\"text-align:right;\"> 63.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 52.0 </td>\n   <td style=\"text-align:right;\"> 10.5 </td>\n   <td style=\"text-align:right;\"> 63.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 52.0 </td>\n   <td style=\"text-align:right;\"> 11.6 </td>\n   <td style=\"text-align:right;\"> 69.4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 52.0 </td>\n   <td style=\"text-align:right;\"> 11.6 </td>\n   <td style=\"text-align:right;\"> 69.4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 52.0 </td>\n   <td style=\"text-align:right;\"> 11.6 </td>\n   <td style=\"text-align:right;\"> 69.4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 52.0 </td>\n   <td style=\"text-align:right;\"> 11.6 </td>\n   <td style=\"text-align:right;\"> 69.4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n::: {.cell output.var='where_1012d' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT payment_type, fare_amount, tip_amount, total_amount\nFROM yellow_old\nWHERE (tip_amount BETWEEN 10 and 12 OR \n      total_amount BETWEEN 100 and 112 ) AND \n      payment_type = \"CSH\"\nLIMIT 0, 10;\n```\n:::\n\n::: {#tbl-where-1012d .cell tbl-cap='OR and AND with parentheses.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> payment_type </th>\n   <th style=\"text-align:right;\"> fare_amount </th>\n   <th style=\"text-align:right;\"> tip_amount </th>\n   <th style=\"text-align:right;\"> total_amount </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 107.0 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 108.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 92.5 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 103.5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 99.5 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 105.3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 92.0 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 106.3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 103.0 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 109.3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 107.0 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 107.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 104.5 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 105.5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 112.0 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 112.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 52.0 </td>\n   <td style=\"text-align:right;\"> 11.6 </td>\n   <td style=\"text-align:right;\"> 69.4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:right;\"> 52.0 </td>\n   <td style=\"text-align:right;\"> 11.6 </td>\n   <td style=\"text-align:right;\"> 69.4 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n### NULL in WHERE\n\n**SQL** considers `NULL` values to be unknown. Therefore, when searching for a `NULL` value, you need to ask **SQL** if the value `IS NULL`.  Asking if the value is *equal* to `NULL` doesn't work because `NULL` values don't equal anything (they are unknown).  To keep all values that are not `NULL` values, use `IS NOT NULL` in the `WHERE` clause. \n\n\n::: {.callout-tip icon=false}\n\n## <i class=\"fas fa-triangle-exclamation\"></i> Watch out!\n\nIn order to find the records that are `NULL` use `WHERE variable IS NULL`.\n:::\n\n\n#### A `NULL` example^[taken from: https://cs186berkeley.net/notes/note1/#filtering-null-values]\n\nThe logic of `NULL`:\n\n* If you do anything with `NULL`, you'll just get `NULL`. For instance if $x$ is `NULL`, then $x > 3$, $1 = x$, and $x + 4$ all evaluate to `NULL`. Even $x =$ `NULL` evaluates to `NULL`! if you want to check whether $x$ is `NULL`, use `x IS NULL` or `x IS NOT NULL`.\n* `NULL` short-circuits with boolean operators. That means a boolean expression involving `NULL` will evaluate to:\n   * TRUE, if it'd evaluate to TRUE regardless of whether the `NULL` value is really TRUE or FALSE.\n   * FALSE, if it'd evaluate to FALSE regardless of whether the `NULL` value is really TRUE or FALSE.\n   * Or `NULL`, if it depends on the `NULL` value.\n\nConsider the following table and **SQL** query:\n\n\n\n::: {.cell fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT * FROM (\n   SELECT 'Ace' AS name, 20 AS age, 4 as num_dogs\n   UNION\n   SELECT 'Ada' AS name, NULL AS age, 3 as num_dogs   \n   UNION\n   SELECT 'Ben' AS name, NULL AS age, NULL as num_dogs\n   UNION\n   SELECT 'Cho' AS name, 27 AS age, NULL as num_dogs\n   ) AS temptable;\n```\n\n\n<div class=\"knitsql-table\">\n<table>\n<caption>4 records</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> name </th>\n   <th style=\"text-align:right;\"> age </th>\n   <th style=\"text-align:right;\"> num_dogs </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Ace </td>\n   <td style=\"text-align:right;\"> 20 </td>\n   <td style=\"text-align:right;\"> 4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Ada </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\"> 3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Ben </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Cho </td>\n   <td style=\"text-align:right;\"> 27 </td>\n   <td style=\"text-align:right;\">  </td>\n  </tr>\n</tbody>\n</table>\n\n</div>\n:::\n\n::: {.cell fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT * FROM (\n   SELECT 'Ace' AS name, 20 AS age, 4 as num_dogs\n   UNION\n   SELECT 'Ada' AS name, NULL AS age, 3 as num_dogs   \n   UNION\n   SELECT 'Ben' AS name, NULL AS age, NULL as num_dogs\n   UNION\n   SELECT 'Cho' AS name, 27 AS age, NULL as num_dogs\n   ) AS temptable\nWHERE age <= 20 OR num_dogs = 3;\n```\n\n\n<div class=\"knitsql-table\">\n<table>\n<caption>2 records</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> name </th>\n   <th style=\"text-align:right;\"> age </th>\n   <th style=\"text-align:right;\"> num_dogs </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Ace </td>\n   <td style=\"text-align:right;\"> 20 </td>\n   <td style=\"text-align:right;\"> 4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Ada </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\"> 3 </td>\n  </tr>\n</tbody>\n</table>\n\n</div>\n:::\n\n\nWhere does the `WHERE` clause do? It tells us that we only want to keep the rows satisfying the `age <= 20` OR `num_dogs = 3`. Let’s consider each row one at a time:\n\n* For Ace, `age <= 20` evaluates to TRUE so the claim is satisfied.\n* For Ada, `age <= 20` evaluates to `NULL` but `num_dogs = 3` evaluates to TRUE so the claim is satisfied.\n* For Ben, `age <= 20` evaluates to `NULL` and `num_dogs = 3` evaluates to `NULL` so the overall expression is `NULL` which has a FALSE value.\n* For Cho, `age <= 20` evaluates to FALSE and `num_dogs = 3` evaluates to `NULL` so the overall expression evaluates to `NULL` (because it depends on the value of the `NULL`).\n\nThus we keep only Ace and Ada.\n\n\n\n\n\n\n::: {.cell output.var='where_null1' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT payment_type, fare_amount, tip_amount, total_amount\nFROM yellow_old\nWHERE payment_type IS NULL\nLIMIT 0, 10;\n```\n:::\n\n::: {#tbl-where-null1 .cell tbl-cap='There is **ONE** record with a NULL value for `payment_type`. Note that the way to find NULL values is via `IS NULL`.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> payment_type </th>\n   <th style=\"text-align:right;\"> fare_amount </th>\n   <th style=\"text-align:right;\"> tip_amount </th>\n   <th style=\"text-align:right;\"> total_amount </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n::: {.cell output.var='where_null2' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT payment_type, fare_amount, tip_amount, total_amount\nFROM yellow_old\nWHERE payment_type = NULL\nLIMIT 0, 10;\n```\n:::\n\n::: {#tbl-where-null2 .cell tbl-cap='**NO** rows are selected when the `WHERE` command is specified to indicate if the variable *equals* `NULL`.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> payment_type </th>\n   <th style=\"text-align:right;\"> fare_amount </th>\n   <th style=\"text-align:right;\"> tip_amount </th>\n   <th style=\"text-align:right;\"> total_amount </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n\n\n\n## GROUP BY\n\n::: {.callout-tip appearance=\"minimal\"}\n\n**R** function: `group_by()`\n\n:::\n\nThe `GROUP BY` clause will direct **SQL** to carry out the query separately for each category in the grouped variable.  Using `GROUP BY` is particularly important when aggregating multiple rows into a single number.  Some <a href = \"https://dev.mysql.com/doc/refman/8.0/en/aggregate-functions.html\" target = \"_blank\">aggregate functions</a> include `COUNT()`, `SUM()`, `MAX()`, `MIN()`, and `AVG()`.\n\nNote that `SUM(1)` adds (sums) the number `1` for each row.  Which is the same as counting the number of rows.  `SUM(2)` adds (sums) the number `2` for each row which returns twice as many transactions.\n\n\n\n::: {.cell output.var='group_pay' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT COUNT(*) AS num_transactions, \n       SUM(1) AS num_transactions_also,\n       SUM(2) AS double_transactions,\n       payment_type \nFROM yellow_old\nWHERE tip_amount BETWEEN 10 and 20\nGROUP BY payment_type;\n```\n:::\n\n::: {#tbl-group-pay .cell tbl-cap='GROUP BY on payment_type.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> num_transactions </th>\n   <th style=\"text-align:right;\"> num_transactions_also </th>\n   <th style=\"text-align:right;\"> double_transactions </th>\n   <th style=\"text-align:left;\"> payment_type </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 213872 </td>\n   <td style=\"text-align:right;\"> 213872 </td>\n   <td style=\"text-align:right;\"> 427744 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 78 </td>\n   <td style=\"text-align:right;\"> 78 </td>\n   <td style=\"text-align:right;\"> 156 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 6 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 7 </td>\n   <td style=\"text-align:right;\"> 7 </td>\n   <td style=\"text-align:right;\"> 14 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 609 </td>\n   <td style=\"text-align:right;\"> 609 </td>\n   <td style=\"text-align:right;\"> 1218 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nFor those people who tipped between $10 and $20, what was the lowest and highest fare for each of the types of payments?\n\n\n\n::: {.cell output.var='group_pay2' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT COUNT(*) AS num_transactions, \n       MIN(fare_amount) AS lowest_fare,\n       MAX(fare_amount) AS highest_fare,\n       payment_type \nFROM yellow_old\nWHERE tip_amount BETWEEN 10 and 20\nGROUP BY payment_type;\n```\n:::\n\n::: {#tbl-group-pay2 .cell tbl-cap='GROUP BY with aggregate functions.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> num_transactions </th>\n   <th style=\"text-align:right;\"> lowest_fare </th>\n   <th style=\"text-align:right;\"> highest_fare </th>\n   <th style=\"text-align:left;\"> payment_type </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 213872 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 370.0 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 78 </td>\n   <td style=\"text-align:right;\"> 52.0 </td>\n   <td style=\"text-align:right;\"> 102.0 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 52.0 </td>\n   <td style=\"text-align:right;\"> 79.5 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 7 </td>\n   <td style=\"text-align:right;\"> 58.0 </td>\n   <td style=\"text-align:right;\"> 94.0 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 609 </td>\n   <td style=\"text-align:right;\"> 4.5 </td>\n   <td style=\"text-align:right;\"> 147.0 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n`GROUP BY` will work applied to multiple columns.  Let's tabulate the same results, now broken down by `payment_type` and day of week.  Except that we don't have a day of week variable!  We need to convert the `pickup_datetime` variable to a DateTime object and then pull out the day of the week, using `DAYNAME`.  (Note: `DAYOFWEEK` will give you the day of the week as an integer.  Use your internet sleuthing skills if you are looking for functions that might help your desired query.)\n\n\n\n::: {.cell output.var='group_wday' fig.asp='0.618'}\n\n```{.sql .cell-code}\n\nSELECT COUNT(*) AS num_transactions, \n       MIN(fare_amount) AS lowest_fare,\n       MAX(fare_amount) AS highest_fare,\n       payment_type,\n       DAYNAME(STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\")) AS wday\nFROM yellow_old\nGROUP BY payment_type, wday;\n```\n:::\n\n::: {#tbl-group-wday .cell tbl-cap='GROUP BY with payment_type and wday.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> num_transactions </th>\n   <th style=\"text-align:right;\"> lowest_fare </th>\n   <th style=\"text-align:right;\"> highest_fare </th>\n   <th style=\"text-align:left;\"> payment_type </th>\n   <th style=\"text-align:left;\"> wday </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1247397 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 477 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1278362 </td>\n   <td style=\"text-align:right;\"> -612.4 </td>\n   <td style=\"text-align:right;\"> 500 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Monday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1533796 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 420 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1324394 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 480 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Sunday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1258098 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 500 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Thursday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1121081 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 500 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Tuesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1192892 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 400 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Wednesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 860920 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 444 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 918653 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 873 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Monday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1207305 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 350 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1020438 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 425 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Sunday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 813813 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 475 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Thursday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 751769 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Tuesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 775823 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 400 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Wednesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1592 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 255 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1537 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 102 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Monday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2236 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1821 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Sunday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1357 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 165 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Thursday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1222 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 475 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Tuesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1295 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 373 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Wednesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5252 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 229 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5440 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 950 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Monday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 7217 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 295 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 6383 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Sunday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4840 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 223 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Thursday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4123 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 384 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Tuesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4482 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Wednesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 10131 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 130 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 11263 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 95 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Monday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 12813 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 147 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 11003 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 114 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Sunday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 10197 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Thursday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 9643 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 138 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Tuesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 9539 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 133 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Wednesday </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n## ORDER BY\n\n::: {.callout-tip appearance=\"minimal\"}\n\n**R** function: `arrange()`\n:::\n\nThe `ORDER BY` command can be used with or without the `GROUP BY` and aggregation commands.  It allows us to look at interesting aspects of the data by sorting the data.\n\n\n::: {.cell output.var='order_low' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT COUNT(*) AS num_transactions, \n       MIN(fare_amount) AS lowest_fare,\n       MAX(fare_amount) AS highest_fare,\n       payment_type,\n       DAYNAME(STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\")) AS wday\nFROM yellow_old\nGROUP BY payment_type, wday\nORDER BY lowest_fare ASC;\n```\n:::\n\n::: {#tbl-order-low .cell tbl-cap='ORDER BY lowest_fare, ascending.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> num_transactions </th>\n   <th style=\"text-align:right;\"> lowest_fare </th>\n   <th style=\"text-align:right;\"> highest_fare </th>\n   <th style=\"text-align:left;\"> payment_type </th>\n   <th style=\"text-align:left;\"> wday </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1278362 </td>\n   <td style=\"text-align:right;\"> -612.4 </td>\n   <td style=\"text-align:right;\"> 500 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Monday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 918653 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 873 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Monday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5440 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 950 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Monday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1537 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 102 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Monday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1533796 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 420 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1121081 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 500 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Tuesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1192892 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 400 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Wednesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1258098 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 500 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Thursday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1247397 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 477 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1324394 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 480 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Sunday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 813813 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 475 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Thursday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1207305 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 350 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 751769 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Tuesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 775823 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 400 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Wednesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1020438 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 425 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Sunday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 7217 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 295 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 860920 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 444 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1295 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 373 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Wednesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1821 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Sunday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4123 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 384 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Tuesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1222 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 475 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Tuesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5252 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 229 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 6383 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Sunday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4840 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 223 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Thursday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4482 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Wednesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1357 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 165 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Thursday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1592 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 255 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2236 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 11003 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 114 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Sunday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 12813 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 147 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 11263 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 95 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Monday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 9643 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 138 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Tuesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 9539 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 133 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Wednesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 10197 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Thursday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 10131 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 130 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nWHAT?!?!!  How in the world was one of the fares -$612.40? It doesn't make any sense that a fare would be negative.  Some additional inquiry into the observation corresponding to a fare of -$612.40 is absolutely warranted.  If the observation is found to be a typo, it would need to be removed from the data set.  If the observation is somehow legitimate, it would need to be included in the analysis, with the information provided about its legitimacy.\n\n\n\n::: {.cell output.var='order_high' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT COUNT(*) AS num_transactions, \n       MIN(fare_amount) AS lowest_fare,\n       MAX(fare_amount) AS highest_fare,\n       payment_type,\n       DAYNAME(STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\")) AS wday\nFROM yellow_old\nGROUP BY payment_type, wday\nORDER BY highest_fare DESC;\n```\n:::\n\n::: {#tbl-order-high .cell tbl-cap='ORDER BY highest_fare, descending' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> num_transactions </th>\n   <th style=\"text-align:right;\"> lowest_fare </th>\n   <th style=\"text-align:right;\"> highest_fare </th>\n   <th style=\"text-align:left;\"> payment_type </th>\n   <th style=\"text-align:left;\"> wday </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 5440 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 950 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Monday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 918653 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 873 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Monday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1278362 </td>\n   <td style=\"text-align:right;\"> -612.4 </td>\n   <td style=\"text-align:right;\"> 500 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Monday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1121081 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 500 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Tuesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1258098 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 500 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Thursday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1324394 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 480 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Sunday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1247397 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 477 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1222 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 475 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Tuesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 813813 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 475 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Thursday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 860920 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 444 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1020438 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 425 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Sunday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1533796 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 420 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1192892 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 400 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Wednesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 775823 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 400 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Wednesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4123 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 384 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Tuesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1295 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 373 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Wednesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1207305 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 350 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 751769 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Tuesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 6383 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Sunday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 7217 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 295 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1592 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 255 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5252 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 229 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4840 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 223 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Thursday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4482 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Wednesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1821 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Sunday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2236 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 10197 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Thursday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1357 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 165 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Thursday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 12813 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 147 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 9643 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 138 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Tuesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 9539 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 133 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Wednesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 10131 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 130 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 11003 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 114 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Sunday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1537 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 102 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Monday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 11263 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 95 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Monday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n$950 is a lot to pay for a cab ride!  But in NYC, I'd believe it.\n\n\n\n::: {.cell output.var='order_wday' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT COUNT(*) AS num_transactions, \n       MIN(fare_amount) AS lowest_fare,\n       MAX(fare_amount) AS highest_fare,\n       payment_type,\n       DAYNAME(STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\")) AS wday\nFROM yellow_old\nGROUP BY payment_type, wday\nORDER BY wday, payment_type;\n```\n:::\n\n::: {#tbl-order-wday .cell tbl-cap='ORDER BY wday and payment_type.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> num_transactions </th>\n   <th style=\"text-align:right;\"> lowest_fare </th>\n   <th style=\"text-align:right;\"> highest_fare </th>\n   <th style=\"text-align:left;\"> payment_type </th>\n   <th style=\"text-align:left;\"> wday </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1247397 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 477 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 860920 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 444 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1592 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 255 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5252 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 229 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 10131 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 130 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1278362 </td>\n   <td style=\"text-align:right;\"> -612.4 </td>\n   <td style=\"text-align:right;\"> 500 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Monday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 918653 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 873 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Monday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1537 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 102 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Monday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5440 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 950 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Monday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 11263 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 95 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Monday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1533796 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 420 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1207305 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 350 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2236 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 7217 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 295 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 12813 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 147 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1324394 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 480 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Sunday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1020438 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 425 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Sunday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1821 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Sunday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 6383 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Sunday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 11003 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 114 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Sunday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1258098 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 500 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Thursday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 813813 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 475 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Thursday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1357 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 165 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Thursday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4840 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 223 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Thursday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 10197 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Thursday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1121081 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 500 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Tuesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 751769 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Tuesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1222 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 475 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Tuesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4123 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 384 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Tuesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 9643 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 138 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Tuesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1192892 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 400 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Wednesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 775823 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 400 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Wednesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1295 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 373 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Wednesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4482 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Wednesday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 9539 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 133 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Wednesday </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n::: {.callout-tip appearance=\"minimal\"}\n\nNote that both `GROUP BY` and `ORDER BY` evaluate the data after it has been retrieved.  Therefore, the functions operate on the *results set*, not the original rows of the data. \n:::\n\nAs above, we were able to `GROUP BY` and `ORDER BY` on the new variables we had created, `wday`.\n\n## HAVING\n\n::: {.callout-tip appearance=\"minimal\"}\n\n**R** function: `filter()`\n:::\n\nRecall that `WHERE` acts only on the original data.  If we are interested in rides that took place on `Friday`, we need to use the derived variable `wday` instead of the raw variable `pickup_datetime`.  Fortunately, `HAVING` works on the results set.  Note that **SQL** uses `''` for strings, not `\"\"`.  In **SQL**, `\"\"` is used to identify variables (not values of variables), like **R**'s `&grave;&grave;`.\n\n\n\n\n::: {.cell output.var='having_fri' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT COUNT(*) AS num_transactions, \n       MIN(fare_amount) AS lowest_fare,\n       MAX(fare_amount) AS highest_fare,\n       payment_type,\n       DAYNAME(STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\")) AS wday\nFROM yellow_old\nGROUP BY payment_type, wday\nHAVING wday = 'Friday';\n```\n:::\n\n::: {#tbl-having-fri .cell tbl-cap='HAVING to filter only Friday rides.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> num_transactions </th>\n   <th style=\"text-align:right;\"> lowest_fare </th>\n   <th style=\"text-align:right;\"> highest_fare </th>\n   <th style=\"text-align:left;\"> payment_type </th>\n   <th style=\"text-align:left;\"> wday </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 1247397 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 477 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 860920 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 444 </td>\n   <td style=\"text-align:left;\"> CSH </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1592 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 255 </td>\n   <td style=\"text-align:left;\"> DIS </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5252 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 229 </td>\n   <td style=\"text-align:left;\"> NOC </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 10131 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 130 </td>\n   <td style=\"text-align:left;\"> UNK </td>\n   <td style=\"text-align:left;\"> Friday </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nWhile it worked out quite well for us that `HAVING` was able to filter the data based on the results set, the use of `HAVING` was quite onerous because the entire data set was considered before the filter was applied.  That is, if the filter can be done on the original data using `WHERE`, the query will be much faster and more efficient.\n\nNote: `HAVING` requires a `GROUP BY` clause.  And the variable(s) used in `HAVING` must also be part of the `GROUP BY` clause.\n\n\n::: {.callout-tip appearance=\"minimal\"}\n\nWhenever possible, use `WHERE` instead of `HAVING` to make your queries as efficient as possible.\n:::\n\n\n## LIMIT\n\n::: {.callout-tip appearance=\"minimal\"}\n\n**R** function: `head()` or `slice()`\n:::\n\nAs we've seen, `LIMIT` truncates the query to specified rows. The `LIMIT` command specifies which rows to select:  the first number is the number of rows to skip (0 rows skipped), the second number is the number of rows to print up to (up to row 14).  The query below shows the last 10 rows of the entire data set.\n\n\n::: {.cell output.var='limit_last' fig.asp='0.618'}\n\n```{.sql .cell-code}\nSELECT * FROM yellow_old LIMIT 15428118, 10;\n\n```\n:::\n\n::: {#tbl-limit-last .cell tbl-cap='LIMIT on the last 10 rows of the table.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> vendor_id </th>\n   <th style=\"text-align:left;\"> pickup_datetime </th>\n   <th style=\"text-align:left;\"> dropoff_datetime </th>\n   <th style=\"text-align:right;\"> passenger_count </th>\n   <th style=\"text-align:right;\"> trip_distance </th>\n   <th style=\"text-align:right;\"> pickup_longitude </th>\n   <th style=\"text-align:right;\"> pickup_latitude </th>\n   <th style=\"text-align:right;\"> rate_code </th>\n   <th style=\"text-align:left;\"> store_and_fwd_flag </th>\n   <th style=\"text-align:right;\"> dropoff_longitude </th>\n   <th style=\"text-align:right;\"> dropoff_latitude </th>\n   <th style=\"text-align:left;\"> payment_type </th>\n   <th style=\"text-align:right;\"> fare_amount </th>\n   <th style=\"text-align:right;\"> surcharge </th>\n   <th style=\"text-align:right;\"> mta_tax </th>\n   <th style=\"text-align:right;\"> tip_amount </th>\n   <th style=\"text-align:right;\"> tolls_amount </th>\n   <th style=\"text-align:right;\"> total_amount </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-18 14:35:21 </td>\n   <td style=\"text-align:left;\"> 2014-03-18 14:52:01 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 2.7 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 13.0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 2.50 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 16.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-18 14:08:23 </td>\n   <td style=\"text-align:left;\"> 2014-03-18 14:19:29 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 1.3 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 9.0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 1.90 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 11.4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-18 09:18:38 </td>\n   <td style=\"text-align:left;\"> 2014-03-18 09:19:41 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0.2 </td>\n   <td style=\"text-align:right;\"> -74 </td>\n   <td style=\"text-align:right;\"> 40.8 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74 </td>\n   <td style=\"text-align:right;\"> 40.8 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 3.0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 4.5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-18 06:28:12 </td>\n   <td style=\"text-align:left;\"> 2014-03-18 06:49:49 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 9.9 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 30.0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 7.16 </td>\n   <td style=\"text-align:right;\"> 5.33 </td>\n   <td style=\"text-align:right;\"> 43.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-18 17:39:28 </td>\n   <td style=\"text-align:left;\"> 2014-03-18 17:53:01 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 4.9 </td>\n   <td style=\"text-align:right;\"> -74 </td>\n   <td style=\"text-align:right;\"> 40.8 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 16.5 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 3.00 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 21.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-18 18:14:19 </td>\n   <td style=\"text-align:left;\"> 2014-03-18 18:27:22 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0.3 </td>\n   <td style=\"text-align:right;\"> -74 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 3.5 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 6.00 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 11.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-18 10:12:33 </td>\n   <td style=\"text-align:left;\"> 2014-03-18 10:28:09 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 3.3 </td>\n   <td style=\"text-align:right;\"> -74 </td>\n   <td style=\"text-align:right;\"> 40.8 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74 </td>\n   <td style=\"text-align:right;\"> 40.8 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 13.5 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 4.20 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 18.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-18 09:02:37 </td>\n   <td style=\"text-align:left;\"> 2014-03-18 09:16:29 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 6.2 </td>\n   <td style=\"text-align:right;\"> -74 </td>\n   <td style=\"text-align:right;\"> 40.8 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 19.5 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 21.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-18 10:10:19 </td>\n   <td style=\"text-align:left;\"> 2014-03-18 10:19:25 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1.7 </td>\n   <td style=\"text-align:right;\"> -74 </td>\n   <td style=\"text-align:right;\"> 40.8 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74 </td>\n   <td style=\"text-align:right;\"> 40.8 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 8.5 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 1.80 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 10.8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-18 15:24:53 </td>\n   <td style=\"text-align:left;\"> 2014-03-18 15:42:42 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1.7 </td>\n   <td style=\"text-align:right;\"> -74 </td>\n   <td style=\"text-align:right;\"> 40.8 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 12.5 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 2.60 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n   <td style=\"text-align:right;\"> 15.6 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n \n\n\n\n## Saving **SQL** queries as **R** objects\n\nIf you are working in **R** to run **SQL** commands, you may want to use the query output for further analysis or visualizations.  In that case, use `#|output.var: \"name_of_variable\"` inside the `{sql}` chunk.  The variable called `name_of_variable` will then be available to be used in the R environment.\n\n\n\n::: {.cell output.var='new_table' fig.asp='0.618'}\n\n````{.cell-code}\n```{{sql}}\n#| connection: con_taxi\n#| label: new-table\n#| output.var: \"new_table\"\n\nSELECT *, DAYNAME(STR_TO_DATE(pickup_datetime, \"%Y-%m-%d %T\")) AS wday\nFROM yellow_old \nLIMIT 0, 1000;\n\n```\n````\n:::\n\n::: {#tbl-new-table .cell tbl-cap='New data.frame saved to R called new_table.' fig.asp='0.618'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-condensed\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> vendor_id </th>\n   <th style=\"text-align:left;\"> pickup_datetime </th>\n   <th style=\"text-align:left;\"> dropoff_datetime </th>\n   <th style=\"text-align:right;\"> passenger_count </th>\n   <th style=\"text-align:right;\"> trip_distance </th>\n   <th style=\"text-align:right;\"> pickup_longitude </th>\n   <th style=\"text-align:right;\"> pickup_latitude </th>\n   <th style=\"text-align:right;\"> rate_code </th>\n   <th style=\"text-align:left;\"> store_and_fwd_flag </th>\n   <th style=\"text-align:right;\"> dropoff_longitude </th>\n   <th style=\"text-align:right;\"> dropoff_latitude </th>\n   <th style=\"text-align:left;\"> payment_type </th>\n   <th style=\"text-align:right;\"> fare_amount </th>\n   <th style=\"text-align:right;\"> surcharge </th>\n   <th style=\"text-align:right;\"> mta_tax </th>\n   <th style=\"text-align:right;\"> tip_amount </th>\n   <th style=\"text-align:right;\"> tolls_amount </th>\n   <th style=\"text-align:right;\"> total_amount </th>\n   <th style=\"text-align:left;\"> wday </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:right;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:07:38 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:16:26 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 2.0 </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -73.9 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 9.0 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 2.0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 12.0 </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:08:03 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:12:51 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 1.2 </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 6.0 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 1.0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 8.0 </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:08:51 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:13:18 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> -73.9 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 5.0 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 1.2 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 7.2 </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:09:20 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:24:18 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 3.5 </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.8 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 14.0 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 3.0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 18.0 </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> CMT </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:09:46 </td>\n   <td style=\"text-align:left;\"> 2014-03-01 01:22:34 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1.8 </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> N </td>\n   <td style=\"text-align:right;\"> -74.0 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:left;\"> CRD </td>\n   <td style=\"text-align:right;\"> 10.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 1.0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 12.5 </td>\n   <td style=\"text-align:left;\"> Saturday </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n::: {.cell fig.asp='0.618'}\n\n````{.cell-code}\n```{{r}}\nnew_table |>\n  drop_na(wday) |>\n  ggplot(aes(x = fare_amount, y = tip_amount, color = wday)) + \n  geom_point() \n```\n````\n\n::: {.cell-output-display}\n![](03-sql-verbs_files/figure-html/unnamed-chunk-57-1.png){width=90%}\n:::\n:::\n\n\n\n## Best practice\n\nIt is always a good idea to terminate the **SQL** connection when you are done with it.\n\n\n\n::: {.cell fig.asp='0.618'}\n\n```{.r .cell-code}\ndbDisconnect(con_taxi, shutdown = TRUE)\n```\n:::\n\n\n\n## <i class=\"fas fa-lightbulb\"></i> Reflection questions  \n\n1. Why don't we usually want to run the query: `SELECT * FROM table;`?\n\n2. What is the difference between the original table and the results set?\n\n3. In SQL does the `WHERE` clause use `=` or `==` to indicate equality?\n\n4. Does `BETWEEN` work only on numeric variables or also on character strings?\n\n5. What syntax is used to direct `ORDER BY` to sort by biggest to smallest or smallest to biggest?\n\n6. What is the difference between `WHERE` and `HAVING`?\n\n## <i class=\"fas fa-balance-scale\"></i> Ethics considerations \n\n1. What are different ways to look at the dataset to identify possible typos or rogue values?  \n\n2. Why are such tasks so much harder with large datasets (versus small datasets)?\n\n3. Why are such tasks to much more important with large datasets (versus small datasets)?\n",
    "supporting": [
      "03-sql-verbs_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/font-awesome-6.4.2/css/all.min.css\" rel=\"stylesheet\" />\n<link href=\"site_libs/font-awesome-6.4.2/css/v4-shims.min.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n<link href=\"site_libs/bsTable-3.3.7/bootstrapTable.min.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/bsTable-3.3.7/bootstrapTable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}