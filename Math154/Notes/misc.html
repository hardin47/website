<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 10 Misc | Computational Statistics</title>
  <meta name="description" content="Class notes for Math 154 at Pomona College: Computational Statistics. The notes are based extensively on An Introduction to Statistical Learning by James, Witten, Hastie, and Tibshirani as well as Modern Data Science with R by Baumer, Kaplan, and Horton." />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 10 Misc | Computational Statistics" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Class notes for Math 154 at Pomona College: Computational Statistics. The notes are based extensively on An Introduction to Statistical Learning by James, Witten, Hastie, and Tibshirani as well as Modern Data Science with R by Baumer, Kaplan, and Horton." />
  <meta name="github-repo" content="hardin47/website/Math154/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 10 Misc | Computational Statistics" />
  
  <meta name="twitter:description" content="Class notes for Math 154 at Pomona College: Computational Statistics. The notes are based extensively on An Introduction to Statistical Learning by James, Witten, Hastie, and Tibshirani as well as Modern Data Science with R by Baumer, Kaplan, and Horton." />
  

<meta name="author" content="Jo Hardin" />


<meta name="date" content="2019-11-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="unsup.html"/>
<link rel="next" href="references.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Computational Statistics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Class Information</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#Sep3"><i class="fa fa-check"></i><b>1.1</b> 9/3/19 Agenda</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#course-logistics"><i class="fa fa-check"></i><b>1.2</b> Course Logistics</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#course-content"><i class="fa fa-check"></i><b>1.3</b> Course Content</a><ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#topics"><i class="fa fa-check"></i><b>1.3.1</b> Topics</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro.html"><a href="intro.html#vocabulary"><i class="fa fa-check"></i><b>1.3.2</b> Vocabulary</a></li>
<li class="chapter" data-level="1.3.3" data-path="intro.html"><a href="intro.html#the-workflow"><i class="fa fa-check"></i><b>1.3.3</b> The Workflow</a></li>
<li class="chapter" data-level="1.3.4" data-path="intro.html"><a href="intro.html#principles-for-the-data-science-process-tldr"><i class="fa fa-check"></i><b>1.3.4</b> Principles for the Data Science Process tl;dr</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#Sep5"><i class="fa fa-check"></i><b>1.4</b> 9/5/19 Agenda</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#repro"><i class="fa fa-check"></i><b>1.5</b> Reproducibility</a><ul>
<li class="chapter" data-level="1.5.1" data-path="intro.html"><a href="intro.html#need-for-reproducibility"><i class="fa fa-check"></i><b>1.5.1</b> Need for Reproducibility</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#example-1"><i class="fa fa-check"></i>Example 1</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#example-2"><i class="fa fa-check"></i>Example 2</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#example-3"><i class="fa fa-check"></i>Example 3</a></li>
<li class="chapter" data-level="" data-path="intro.html"><a href="intro.html#example-4"><i class="fa fa-check"></i>Example 4</a></li>
<li class="chapter" data-level="1.5.2" data-path="intro.html"><a href="intro.html#the-reproducible-data-analysis-process"><i class="fa fa-check"></i><b>1.5.2</b> The reproducible data analysis process</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#data-examples"><i class="fa fa-check"></i><b>1.6</b> Data Examples</a><ul>
<li class="chapter" data-level="1.6.1" data-path="intro.html"><a href="intro.html#college-rankings-systems"><i class="fa fa-check"></i><b>1.6.1</b> College Rankings Systems</a></li>
<li class="chapter" data-level="1.6.2" data-path="intro.html"><a href="intro.html#trump-and-twitter"><i class="fa fa-check"></i><b>1.6.2</b> Trump and Twitter</a></li>
<li class="chapter" data-level="1.6.3" data-path="intro.html"><a href="intro.html#can-twitter-predict-election-results"><i class="fa fa-check"></i><b>1.6.3</b> Can Twitter Predict Election Results?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>2</b> Visualization</a><ul>
<li class="chapter" data-level="2.1" data-path="visualization.html"><a href="visualization.html#Sep10"><i class="fa fa-check"></i><b>2.1</b> 9/10/19 Agenda</a></li>
<li class="chapter" data-level="2.2" data-path="visualization.html"><a href="visualization.html#examples"><i class="fa fa-check"></i><b>2.2</b> Examples</a><ul>
<li class="chapter" data-level="2.2.1" data-path="visualization.html"><a href="visualization.html#cholera-via-tufte"><i class="fa fa-check"></i><b>2.2.1</b> Cholera via Tufte</a></li>
<li class="chapter" data-level="2.2.2" data-path="visualization.html"><a href="visualization.html#challenger-via-tufte"><i class="fa fa-check"></i><b>2.2.2</b> Challenger via Tufte</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="visualization.html"><a href="visualization.html#thoughts"><i class="fa fa-check"></i><b>2.3</b> Thoughts on Plotting</a><ul>
<li class="chapter" data-level="2.3.1" data-path="visualization.html"><a href="visualization.html#advice"><i class="fa fa-check"></i><b>2.3.1</b> Advice</a></li>
<li class="chapter" data-level="2.3.2" data-path="visualization.html"><a href="visualization.html#an-example-from-information-is-beautiful"><i class="fa fa-check"></i><b>2.3.2</b> An example from Information is Beautiful</a></li>
<li class="chapter" data-level="2.3.3" data-path="visualization.html"><a href="visualization.html#assessing-graphics-and-other-analyses"><i class="fa fa-check"></i><b>2.3.3</b> Assessing Graphics (and Other Analyses)</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="visualization.html"><a href="visualization.html#Sep12"><i class="fa fa-check"></i><b>2.4</b> 9/12/19 Agenda</a></li>
<li class="chapter" data-level="2.5" data-path="visualization.html"><a href="visualization.html#deconstruct"><i class="fa fa-check"></i><b>2.5</b> Deconstructing a graph</a><ul>
<li class="chapter" data-level="2.5.1" data-path="visualization.html"><a href="visualization.html#gg"><i class="fa fa-check"></i><b>2.5.1</b> The Grammar of Graphics (<code>gg</code>)</a></li>
<li class="chapter" data-level="2.5.2" data-path="visualization.html"><a href="visualization.html#ggplot2"><i class="fa fa-check"></i><b>2.5.2</b> <code>ggplot2</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="wrang.html"><a href="wrang.html"><i class="fa fa-check"></i><b>3</b> Data Wrangling</a><ul>
<li class="chapter" data-level="3.1" data-path="wrang.html"><a href="wrang.html#Sep17"><i class="fa fa-check"></i><b>3.1</b> 9/17/19 Agenda</a></li>
<li class="chapter" data-level="3.2" data-path="wrang.html"><a href="wrang.html#datastruc"><i class="fa fa-check"></i><b>3.2</b> Structure of Data</a><ul>
<li class="chapter" data-level="3.2.1" data-path="wrang.html"><a href="wrang.html#building-tidy-data"><i class="fa fa-check"></i><b>3.2.1</b> Building Tidy Data</a></li>
<li class="chapter" data-level="3.2.2" data-path="wrang.html"><a href="wrang.html#examples-of-chaining"><i class="fa fa-check"></i><b>3.2.2</b> Examples of Chaining</a></li>
<li class="chapter" data-level="3.2.3" data-path="wrang.html"><a href="wrang.html#data-verbs-on-single-data-frames"><i class="fa fa-check"></i><b>3.2.3</b> Data Verbs (on single data frames)</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="wrang.html"><a href="wrang.html#r-examples-basic-verbs"><i class="fa fa-check"></i><b>3.3</b> R examples, basic verbs</a><ul>
<li class="chapter" data-level="3.3.1" data-path="wrang.html"><a href="wrang.html#datasets"><i class="fa fa-check"></i><b>3.3.1</b> Datasets</a></li>
<li class="chapter" data-level="3.3.2" data-path="wrang.html"><a href="wrang.html#examples-of-chaining-1"><i class="fa fa-check"></i><b>3.3.2</b> Examples of Chaining</a></li>
<li class="chapter" data-level="3.3.3" data-path="wrang.html"><a href="wrang.html#data-verbs"><i class="fa fa-check"></i><b>3.3.3</b> Data Verbs</a></li>
<li class="chapter" data-level="3.3.4" data-path="wrang.html"><a href="wrang.html#summarize-and-group_by"><i class="fa fa-check"></i><b>3.3.4</b> <code>summarize</code> and <code>group_by</code></a></li>
<li class="chapter" data-level="3.3.5" data-path="wrang.html"><a href="wrang.html#babynames"><i class="fa fa-check"></i><b>3.3.5</b> babynames</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="wrang.html"><a href="wrang.html#Sep19"><i class="fa fa-check"></i><b>3.4</b> 9/19/19 Agenda</a></li>
<li class="chapter" data-level="3.5" data-path="wrang.html"><a href="wrang.html#highverb"><i class="fa fa-check"></i><b>3.5</b> Higher Level Data Verbs</a></li>
<li class="chapter" data-level="3.6" data-path="wrang.html"><a href="wrang.html#r-examples-higher-level-verbs"><i class="fa fa-check"></i><b>3.6</b> R examples, higher level verbs</a><ul>
<li class="chapter" data-level="3.6.1" data-path="wrang.html"><a href="wrang.html#pivot_longer"><i class="fa fa-check"></i><b>3.6.1</b> <code>pivot_longer</code></a></li>
<li class="chapter" data-level="3.6.2" data-path="wrang.html"><a href="wrang.html#pivot_wider"><i class="fa fa-check"></i><b>3.6.2</b> <code>pivot_wider</code></a></li>
<li class="chapter" data-level="3.6.3" data-path="wrang.html"><a href="wrang.html#join-use-join-to-merge-two-datasets"><i class="fa fa-check"></i><b>3.6.3</b> <code>join</code> (use <code>join</code> to <strong>merge</strong> two datasets)</a></li>
<li class="chapter" data-level="3.6.4" data-path="wrang.html"><a href="wrang.html#lubridate"><i class="fa fa-check"></i><b>3.6.4</b> <code>lubridate</code></a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="wrang.html"><a href="wrang.html#reprex"><i class="fa fa-check"></i><b>3.7</b> <code>reprex</code></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="sims.html"><a href="sims.html"><i class="fa fa-check"></i><b>4</b> Simulating</a><ul>
<li class="chapter" data-level="4.1" data-path="sims.html"><a href="sims.html#Sep24"><i class="fa fa-check"></i><b>4.1</b> 9/24/19 Agenda</a></li>
<li class="chapter" data-level="4.2" data-path="sims.html"><a href="sims.html#simmodels"><i class="fa fa-check"></i><b>4.2</b> Simulating Complicated Models</a><ul>
<li class="chapter" data-level="4.2.1" data-path="sims.html"><a href="sims.html#goals-of-simulating-complicated-models"><i class="fa fa-check"></i><b>4.2.1</b> Goals of Simulating Complicated Models</a></li>
<li class="chapter" data-level="4.2.2" data-path="sims.html"><a href="sims.html#examples-of-pigs-and-blackjack"><i class="fa fa-check"></i><b>4.2.2</b> Examples of Pigs and Blackjack</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="sims.html"><a href="sims.html#Sep26"><i class="fa fa-check"></i><b>4.3</b> 9/26/19 Agenda</a></li>
<li class="chapter" data-level="4.4" data-path="sims.html"><a href="sims.html#simsens"><i class="fa fa-check"></i><b>4.4</b> Simulating to Assess Sensitivity</a><ul>
<li class="chapter" data-level="4.4.1" data-path="sims.html"><a href="sims.html#biasmodels"><i class="fa fa-check"></i><b>4.4.1</b> Bias in Models</a></li>
<li class="chapter" data-level="4.4.2" data-path="sims.html"><a href="sims.html#technical-conditions"><i class="fa fa-check"></i><b>4.4.2</b> Technical Conditions</a></li>
<li class="chapter" data-level="4.4.3" data-path="sims.html"><a href="sims.html#generating-random-numbers"><i class="fa fa-check"></i><b>4.4.3</b> Generating random numbers</a></li>
<li class="chapter" data-level="4.4.4" data-path="sims.html"><a href="sims.html#generating-other-rvs-the-inverse-transform-method"><i class="fa fa-check"></i><b>4.4.4</b> Generating other RVs: <strong>The Inverse Transform Method</strong></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="permschp.html"><a href="permschp.html"><i class="fa fa-check"></i><b>5</b> Permutation Tests</a><ul>
<li class="chapter" data-level="5.1" data-path="permschp.html"><a href="permschp.html#Oct1"><i class="fa fa-check"></i><b>5.1</b> 10/1/19 Agenda</a></li>
<li class="chapter" data-level="5.2" data-path="permschp.html"><a href="permschp.html#algs"><i class="fa fa-check"></i><b>5.2</b> Inference Algorithms</a><ul>
<li class="chapter" data-level="5.2.1" data-path="permschp.html"><a href="permschp.html#hypothesis-test-algorithm"><i class="fa fa-check"></i><b>5.2.1</b> Hypothesis Test Algorithm</a></li>
<li class="chapter" data-level="5.2.2" data-path="permschp.html"><a href="permschp.html#permutation-tests-algorithm"><i class="fa fa-check"></i><b>5.2.2</b> Permutation Tests Algorithm</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="permschp.html"><a href="permschp.html#Oct3"><i class="fa fa-check"></i><b>5.3</b> 10/3/19 Agenda</a></li>
<li class="chapter" data-level="5.4" data-path="permschp.html"><a href="permschp.html#perms"><i class="fa fa-check"></i><b>5.4</b> Permutation tests in practice</a><ul>
<li class="chapter" data-level="5.4.1" data-path="permschp.html"><a href="permschp.html#permutation-vs.randomization-tests"><i class="fa fa-check"></i><b>5.4.1</b> Permutation vs. Randomization Tests</a></li>
<li class="chapter" data-level="5.4.2" data-path="permschp.html"><a href="permschp.html#ci-from-permutation-tests"><i class="fa fa-check"></i><b>5.4.2</b> CI from Permutation Tests</a></li>
<li class="chapter" data-level="5.4.3" data-path="permschp.html"><a href="permschp.html#randomization-example"><i class="fa fa-check"></i><b>5.4.3</b> Randomization Example</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="permschp.html"><a href="permschp.html#r-examples"><i class="fa fa-check"></i><b>5.5</b> R examples</a><ul>
<li class="chapter" data-level="5.5.1" data-path="permschp.html"><a href="permschp.html#cloud-seeding-two-sample-test-computationally-very-difficult-to-do-a-randomization-test"><i class="fa fa-check"></i><b>5.5.1</b> Cloud Seeding (Two sample test – computationally very difficult to do a randomization test)</a></li>
<li class="chapter" data-level="5.5.2" data-path="permschp.html"><a href="permschp.html#macnell-teaching-evaluations-stratified-two-sample-t-test"><i class="fa fa-check"></i><b>5.5.2</b> MacNell Teaching Evaluations (Stratified two-sample t-test)</a></li>
<li class="chapter" data-level="5.5.3" data-path="permschp.html"><a href="permschp.html#income-and-health-f-like-test"><i class="fa fa-check"></i><b>5.5.3</b> Income and Health (F-like test)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="boot.html"><a href="boot.html"><i class="fa fa-check"></i><b>6</b> Bootstrapping</a><ul>
<li class="chapter" data-level="6.1" data-path="boot.html"><a href="boot.html#Oct8"><i class="fa fa-check"></i><b>6.1</b> 10/8/19 Agenda</a></li>
<li class="chapter" data-level="6.2" data-path="boot.html"><a href="boot.html#introduction"><i class="fa fa-check"></i><b>6.2</b> Introduction</a></li>
<li class="chapter" data-level="6.3" data-path="boot.html"><a href="boot.html#BSnotation"><i class="fa fa-check"></i><b>6.3</b> Basics &amp; Notation</a><ul>
<li class="chapter" data-level="6.3.1" data-path="boot.html"><a href="boot.html#the-plug-in-principle"><i class="fa fa-check"></i><b>6.3.1</b> The Plug-in Principle</a></li>
<li class="chapter" data-level="6.3.2" data-path="boot.html"><a href="boot.html#the-bootstrap-idea"><i class="fa fa-check"></i><b>6.3.2</b> The Bootstrap Idea</a></li>
<li class="chapter" data-level="6.3.3" data-path="boot.html"><a href="boot.html#bootstrap-procedure"><i class="fa fa-check"></i><b>6.3.3</b> Bootstrap Procedure</a></li>
<li class="chapter" data-level="6.3.4" data-path="boot.html"><a href="boot.html#bootstrap-notation"><i class="fa fa-check"></i><b>6.3.4</b> Bootstrap Notation</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="boot.html"><a href="boot.html#Oct10"><i class="fa fa-check"></i><b>6.4</b> 10/10/19 Agenda</a></li>
<li class="chapter" data-level="6.5" data-path="boot.html"><a href="boot.html#BSCI"><i class="fa fa-check"></i><b>6.5</b> Bootstrap Confidence Intervals</a><ul>
<li class="chapter" data-level="6.5.1" data-path="boot.html"><a href="boot.html#normal-standard-ci-with-bs-se-typenorm"><i class="fa fa-check"></i><b>6.5.1</b> Normal (standard) CI with BS SE: <code>type=&quot;norm&quot;</code></a></li>
<li class="chapter" data-level="6.5.2" data-path="boot.html"><a href="boot.html#bootstrap-t-confidence-intervals-typestud"><i class="fa fa-check"></i><b>6.5.2</b> Bootstrap-t Confidence Intervals: <code>type=&quot;stud&quot;</code></a></li>
<li class="chapter" data-level="6.5.3" data-path="boot.html"><a href="boot.html#percentile-confidence-intervals-typeperc"><i class="fa fa-check"></i><b>6.5.3</b> Percentile Confidence Intervals: <code>type=&quot;perc&quot;</code></a></li>
<li class="chapter" data-level="6.5.4" data-path="boot.html"><a href="boot.html#what-makes-a-ci-good"><i class="fa fa-check"></i><b>6.5.4</b> What makes a CI good?</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="boot.html"><a href="boot.html#r-example-heroin"><i class="fa fa-check"></i><b>6.6</b> R example: Heroin</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ethics.html"><a href="ethics.html"><i class="fa fa-check"></i><b>7</b> Ethics</a><ul>
<li class="chapter" data-level="7.1" data-path="ethics.html"><a href="ethics.html#Oct24"><i class="fa fa-check"></i><b>7.1</b> 10/24/19 Agenda</a></li>
<li class="chapter" data-level="7.2" data-path="ethics.html"><a href="ethics.html#doing-data-science"><i class="fa fa-check"></i><b>7.2</b> Doing Data Science</a></li>
<li class="chapter" data-level="7.3" data-path="ethics.html"><a href="ethics.html#graphics"><i class="fa fa-check"></i><b>7.3</b> Graphics</a></li>
<li class="chapter" data-level="7.4" data-path="ethics.html"><a href="ethics.html#p-hacking"><i class="fa fa-check"></i><b>7.4</b> p-hacking</a><ul>
<li class="chapter" data-level="7.4.1" data-path="ethics.html"><a href="ethics.html#multiple-studies"><i class="fa fa-check"></i><b>7.4.1</b> Multiple Studies</a></li>
<li class="chapter" data-level="7.4.2" data-path="ethics.html"><a href="ethics.html#p-values"><i class="fa fa-check"></i><b>7.4.2</b> p-values</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="ethics.html"><a href="ethics.html#human-subjects-research"><i class="fa fa-check"></i><b>7.5</b> Human Subjects Research</a></li>
<li class="chapter" data-level="7.6" data-path="ethics.html"><a href="ethics.html#authorship"><i class="fa fa-check"></i><b>7.6</b> Authorship</a></li>
<li class="chapter" data-level="7.7" data-path="ethics.html"><a href="ethics.html#algorithms"><i class="fa fa-check"></i><b>7.7</b> Algorithms</a><ul>
<li class="chapter" data-level="" data-path="ethics.html"><a href="ethics.html#sentencing"><i class="fa fa-check"></i>Sentencing</a></li>
<li class="chapter" data-level="" data-path="ethics.html"><a href="ethics.html#algorithmic-justice-league"><i class="fa fa-check"></i>Algorithmic Justice League</a></li>
<li class="chapter" data-level="" data-path="ethics.html"><a href="ethics.html#sentiment-analysis"><i class="fa fa-check"></i>Sentiment Analysis</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="ethics.html"><a href="ethics.html#guiding-ethical-principles"><i class="fa fa-check"></i><b>7.8</b> Guiding Ethical Principles</a><ul>
<li class="chapter" data-level="" data-path="ethics.html"><a href="ethics.html#asa-ethical-guidelines-for-statistical-practice"><i class="fa fa-check"></i>ASA Ethical Guidelines for Statistical Practice</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="class.html"><a href="class.html"><i class="fa fa-check"></i><b>8</b> Classification</a><ul>
<li class="chapter" data-level="8.1" data-path="class.html"><a href="class.html#Oct29"><i class="fa fa-check"></i><b>8.1</b> 10/29/19 Agenda</a></li>
<li class="chapter" data-level="8.2" data-path="class.html"><a href="class.html#cv"><i class="fa fa-check"></i><b>8.2</b> Cross Validation</a><ul>
<li class="chapter" data-level="8.2.1" data-path="class.html"><a href="class.html#bias-variance-trade-off"><i class="fa fa-check"></i><b>8.2.1</b> Bias-variance trade-off</a></li>
<li class="chapter" data-level="8.2.2" data-path="class.html"><a href="class.html#implementing-cross-validation"><i class="fa fa-check"></i><b>8.2.2</b> Implementing Cross Validation</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="class.html"><a href="class.html#knn"><i class="fa fa-check"></i><b>8.3</b> <span class="math inline">\(k\)</span>-Nearest Neighbors</a><ul>
<li class="chapter" data-level="8.3.1" data-path="class.html"><a href="class.html#k-nn-algorithm"><i class="fa fa-check"></i><b>8.3.1</b> <span class="math inline">\(k\)</span>-NN algorithm</a></li>
<li class="chapter" data-level="8.3.2" data-path="class.html"><a href="class.html#r-knn-example"><i class="fa fa-check"></i><b>8.3.2</b> R knn Example</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="class.html"><a href="class.html#Oct31"><i class="fa fa-check"></i><b>8.4</b> 10/31/19 Agenda</a></li>
<li class="chapter" data-level="8.5" data-path="class.html"><a href="class.html#cart"><i class="fa fa-check"></i><b>8.5</b> CART</a><ul>
<li class="chapter" data-level="8.5.1" data-path="class.html"><a href="class.html#cart-algorithm"><i class="fa fa-check"></i><b>8.5.1</b> CART algorithm</a></li>
<li class="chapter" data-level="8.5.2" data-path="class.html"><a href="class.html#r-cart-example"><i class="fa fa-check"></i><b>8.5.2</b> R CART Example</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="class.html"><a href="class.html#Nov5"><i class="fa fa-check"></i><b>8.6</b> 11/5/19 Agenda</a></li>
<li class="chapter" data-level="8.7" data-path="class.html"><a href="class.html#bagging"><i class="fa fa-check"></i><b>8.7</b> Bagging</a><ul>
<li class="chapter" data-level="8.7.1" data-path="class.html"><a href="class.html#bagging-algorithm"><i class="fa fa-check"></i><b>8.7.1</b> Bagging algorithm</a></li>
<li class="chapter" data-level="8.7.2" data-path="class.html"><a href="class.html#out-of-bag-oob-error-rate"><i class="fa fa-check"></i><b>8.7.2</b> Out Of Bag (OOB) error rate</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="class.html"><a href="class.html#Nov7"><i class="fa fa-check"></i><b>8.8</b> 11/7/19 Agenda</a></li>
<li class="chapter" data-level="8.9" data-path="class.html"><a href="class.html#rf"><i class="fa fa-check"></i><b>8.9</b> Random Forests</a><ul>
<li class="chapter" data-level="8.9.1" data-path="class.html"><a href="class.html#random-forest-algorithm"><i class="fa fa-check"></i><b>8.9.1</b> Random Forest algorithm</a></li>
<li class="chapter" data-level="8.9.2" data-path="class.html"><a href="class.html#r-rf-example"><i class="fa fa-check"></i><b>8.9.2</b> R RF Example</a></li>
</ul></li>
<li class="chapter" data-level="8.10" data-path="class.html"><a href="class.html#model-choices"><i class="fa fa-check"></i><b>8.10</b> Model Choices</a></li>
<li class="chapter" data-level="8.11" data-path="class.html"><a href="class.html#Nov12"><i class="fa fa-check"></i><b>8.11</b> 11/12/19 Agenda</a></li>
<li class="chapter" data-level="8.12" data-path="class.html"><a href="class.html#support-vector-machines"><i class="fa fa-check"></i><b>8.12</b> Support Vector Machines</a><ul>
<li class="chapter" data-level="8.12.1" data-path="class.html"><a href="class.html#Nov14"><i class="fa fa-check"></i><b>8.12.1</b> 11/14/19 Agenda</a></li>
<li class="chapter" data-level="8.12.2" data-path="class.html"><a href="class.html#notlinsvm"><i class="fa fa-check"></i><b>8.12.2</b> Not Linearly Separable</a></li>
<li class="chapter" data-level="8.12.3" data-path="class.html"><a href="class.html#Nov19"><i class="fa fa-check"></i><b>8.12.3</b> 11/19/19 Agenda</a></li>
<li class="chapter" data-level="8.12.4" data-path="class.html"><a href="class.html#support-vector-machine-algorithm"><i class="fa fa-check"></i><b>8.12.4</b> Support Vector Machine algorithm</a></li>
<li class="chapter" data-level="8.12.5" data-path="class.html"><a href="class.html#classifying-more-than-one-group"><i class="fa fa-check"></i><b>8.12.5</b> Classifying more than one group</a></li>
<li class="chapter" data-level="8.12.6" data-path="class.html"><a href="class.html#r-svm-example"><i class="fa fa-check"></i><b>8.12.6</b> R SVM Example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="unsup.html"><a href="unsup.html"><i class="fa fa-check"></i><b>9</b> Unsupervised Methods</a><ul>
<li class="chapter" data-level="9.1" data-path="unsup.html"><a href="unsup.html#Nov21"><i class="fa fa-check"></i><b>9.1</b> 11/21/19 Agenda</a></li>
<li class="chapter" data-level="9.2" data-path="unsup.html"><a href="unsup.html#latent-dirichlet-allocation"><i class="fa fa-check"></i><b>9.2</b> Latent Dirichlet Allocation</a></li>
<li class="chapter" data-level="9.3" data-path="unsup.html"><a href="unsup.html#dissimilarities"><i class="fa fa-check"></i><b>9.3</b> Dissimilarities</a></li>
<li class="chapter" data-level="9.4" data-path="unsup.html"><a href="unsup.html#hier"><i class="fa fa-check"></i><b>9.4</b> Hierarchical Clustering</a></li>
<li class="chapter" data-level="9.5" data-path="unsup.html"><a href="unsup.html#part"><i class="fa fa-check"></i><b>9.5</b> Partitioning Clustering</a><ul>
<li class="chapter" data-level="9.5.1" data-path="unsup.html"><a href="unsup.html#k-means-clustering"><i class="fa fa-check"></i><b>9.5.1</b> <span class="math inline">\(k\)</span>-means Clustering</a></li>
<li class="chapter" data-level="9.5.2" data-path="unsup.html"><a href="unsup.html#partitioning-around-medoids"><i class="fa fa-check"></i><b>9.5.2</b> Partitioning Around Medoids</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="unsup.html"><a href="unsup.html#evaluation-metrics"><i class="fa fa-check"></i><b>9.6</b> Evaluation Metrics</a></li>
<li class="chapter" data-level="9.7" data-path="unsup.html"><a href="unsup.html#em-algorithm"><i class="fa fa-check"></i><b>9.7</b> EM algorithm</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="misc.html"><a href="misc.html"><i class="fa fa-check"></i><b>10</b> Misc</a><ul>
<li class="chapter" data-level="10.1" data-path="misc.html"><a href="misc.html#Nov26"><i class="fa fa-check"></i><b>10.1</b> 11/26/19 Agenda</a></li>
<li class="chapter" data-level="10.2" data-path="misc.html"><a href="misc.html#api"><i class="fa fa-check"></i><b>10.2</b> API</a></li>
<li class="chapter" data-level="10.3" data-path="misc.html"><a href="misc.html#parallel-computing"><i class="fa fa-check"></i><b>10.3</b> Parallel Computing</a></li>
<li class="chapter" data-level="10.4" data-path="misc.html"><a href="misc.html#cloud-computing"><i class="fa fa-check"></i><b>10.4</b> Cloud Computing</a></li>
<li class="chapter" data-level="10.5" data-path="misc.html"><a href="misc.html#reticulate"><i class="fa fa-check"></i><b>10.5</b> <code>reticulate</code></a><ul>
<li class="chapter" data-level="" data-path="misc.html"><a href="misc.html#connect-to-python-within-rstudio"><i class="fa fa-check"></i>Connect to Python within RStudio</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="misc.html"><a href="misc.html#sql-in-r"><i class="fa fa-check"></i><b>10.6</b> SQL (in R)</a></li>
<li class="chapter" data-level="10.7" data-path="misc.html"><a href="misc.html#Dec10"><i class="fa fa-check"></i><b>10.7</b> 12/10/19 Agenda</a></li>
<li class="chapter" data-level="10.8" data-path="misc.html"><a href="misc.html#regexpr"><i class="fa fa-check"></i><b>10.8</b> Regular Expressions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://st47s.com/Math154" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Computational Statistics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="misc" class="section level1">
<h1><span class="header-section-number">Chapter 10</span> Misc</h1>
<div id="Nov26" class="section level2">
<h2><span class="header-section-number">10.1</span> 11/26/19 Agenda</h2>
<ol style="list-style-type: decimal">
<li>API / authenticating</li>
<li>parallel computing</li>
<li>cloud computing</li>
<li><code>reticulate</code> (Python in R!)</li>
<li>SQL</li>
</ol>
</div>
<div id="api" class="section level2">
<h2><span class="header-section-number">10.2</span> API</h2>
<div style="float:right;position: relative; top: -30px;">
<div class="figure" style="text-align: right"><span id="fig:unnamed-chunk-2"></span>
<img src="figs/api_xkcd.png" alt="xkcd, https://xkcd.com/1481/" width="80%" />
<p class="caption">
Figure 1.2: xkcd, <a href="https://xkcd.com/1481/" class="uri">https://xkcd.com/1481/</a>
</p>
</div>
</div>
<p>What is an API? (Application Programming Interface)</p>
<p>Think of an API as a restaurant menu. The menu provides a list of what the restaurant has to offer, and you order off the menu by choosing the dish that you want. After you order, the restaurant figures out how to bring the food from the kitchen to your table in the way that you’ve specified.</p>
<p>An API is an intermediary that allows two applications to talk to one another. It is not the database or the server, instead it is the <em>code</em> that allows communication.</p>
<div id="examples-of-apis" class="section level4 unnumbered">
<h4>Examples of APIs</h4>
<ul>
<li><p>When you use an app on your phone, the app connects to the internet and sends information to a server somewhere. The server retrieves the data, interprets is, does what it does, and sends it back to you. The application which takes the data from the server and presents it to you in a readable way is an API.</p></li>
<li><p>Let’s say you are booking a flight on United. You choose all the details, you interact with the airline’s website. BUT INSTEAD, what if you are interacting with a software like Expedia? Then Expedia has to talk to United’s API to get all the information about available flights, costs, seats, etc.</p></li>
<li><p>If you’ve ever been to a third party site and clicked on “Share on Facebook” or “Share on Twitter” your third party site is communicating with the Facebook API or the Twitter API.</p></li>
<li><p>You sign up to go to a concert, and StubHub asks whether you want to add the concert to your Google calendar. StubHub needs to talk to Google via Google’s API.</p></li>
<li><p>What if you want some Twitter data? How might you get it? Well, you could email Twitter and ask someone for it. <strong>Instead</strong> Twitter provides information about how their data is stored, and allows you to query their data in an automated way.</p></li>
</ul>
<div class="figure" style="text-align: right"><span id="fig:unnamed-chunk-3"></span>
<img src="figs/API_weather.png" alt="Image taken from https://rigor.com/blog/what-is-an-api-a-brief-intro" width="80%" />
<p class="caption">
Figure 1.3: Image taken from <a href="https://rigor.com/blog/what-is-an-api-a-brief-intro" class="uri">https://rigor.com/blog/what-is-an-api-a-brief-intro</a>
</p>
</div>
</div>
</div>
<div id="parallel-computing" class="section level2">
<h2><span class="header-section-number">10.3</span> Parallel Computing</h2>
<p>To demonstrate what parallel computing is, we’ll perform tasks that are <strong>embarrassingly parallel</strong> which means there is no dependency or communication between the parallel tasks. Again, parallel computing can be powerful in ways that link computational tasks in complicated ways. But we believe that as a <em>first</em> pass at teaching parallel computing, we should teach the parallel structure before bringing in dependence across the parallel tasks. Examples of <a href="https://en.wikipedia.org/wiki/Embarrassingly_parallel">embarrassingly parallel</a> algorithms include: Monte Carlo analysis, bootstrapping, growing trees for Random Forests, <code>group_by</code> analyses, and cross-validation. Additionally, data science methods increasingly use <a href="https://en.wikipedia.org/wiki/Randomized_algorithm">randomized algorithms</a> which can often be written in parallel.</p>
<p>Indeed, it isn’t always easy to know when to use a parallel construction. Because of existing overhead processes (e.g., copying data across many threads, bring results together, etc.) an algorithm run on 10 parallel strands will not reduce an original (non-parallel) run time by 10-fold. Figuring out when a parallel implementation is appropriate is beyond the scope of this blog but should be carefully considered before embarking on large projects.</p>
<div id="some-parallel-examples" class="section level4 unnumbered">
<h4>Some parallel examples</h4>
<p>Before running code in parallel, it is valuable to know how many cores your computer has to work with. Note that the <code>detectCores</code> function will provide information about the specific device you are using (<code>logical = FALSE</code> tells you only the physical cores which is likely what you want). Note that after <code>makeCluster</code> the separate threads have information. After <code>stopCluster</code>, the code is no longer connecting to the cluster structure.</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb509-1" data-line-number="1"><span class="kw">library</span>(parallel)</a>
<a class="sourceLine" id="cb509-2" data-line-number="2">P &lt;-<span class="st"> </span><span class="kw">detectCores</span>(<span class="dt">logical=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb509-3" data-line-number="3">P</a></code></pre></div>
<pre><code>## [1] 8</code></pre>
<div class="sourceCode" id="cb511"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb511-1" data-line-number="1">cl &lt;-<span class="st"> </span><span class="kw">makeCluster</span>(P)</a>
<a class="sourceLine" id="cb511-2" data-line-number="2">cl[[<span class="dv">1</span>]]</a></code></pre></div>
<pre><code>## node of a socket cluster on host &#39;localhost&#39; with pid 38688</code></pre>
<div class="sourceCode" id="cb513"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb513-1" data-line-number="1"><span class="kw">stopCluster</span>(cl)</a>
<a class="sourceLine" id="cb513-2" data-line-number="2">cl[[<span class="dv">1</span>]]</a></code></pre></div>
<pre><code>## Error in summary.connection(connection): invalid connection</code></pre>
</div>
<div id="embarrassingly-embarrassing-example" class="section level4 unnumbered">
<h4>Embarrassingly embarrassing example</h4>
<p>In the example below, we generate some Cauchy data and find the max of each sample. Note that for the current device there are 8 cores, so the process will happen 100/P = 12.5 times on each core. The second argument of <code>clusterApply</code> is a sequence of numbers that gets passed to each worker as the (first) argument of <code>func1</code>. Below, I’ve specified that the value 50 (number of reps) should be passed separately to 100 different workers.</p>
<div class="sourceCode" id="cb515"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb515-1" data-line-number="1">W &lt;-<span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb515-2" data-line-number="2">P &lt;-<span class="st"> </span><span class="kw">detectCores</span>(<span class="dt">logical=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb515-3" data-line-number="3">cl &lt;-<span class="st"> </span><span class="kw">makeCluster</span>(P)</a>
<a class="sourceLine" id="cb515-4" data-line-number="4"></a>
<a class="sourceLine" id="cb515-5" data-line-number="5">func1 &lt;-<span class="st"> </span><span class="cf">function</span>(reps){</a>
<a class="sourceLine" id="cb515-6" data-line-number="6">  <span class="kw">max</span>(<span class="kw">rcauchy</span>(reps))</a>
<a class="sourceLine" id="cb515-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb515-8" data-line-number="8"></a>
<a class="sourceLine" id="cb515-9" data-line-number="9"></a>
<a class="sourceLine" id="cb515-10" data-line-number="10"><span class="kw">clusterApply</span>(cl, <span class="kw">rep</span>(<span class="dv">50</span>,W), <span class="dt">fun =</span> func1) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">3</span>)</a></code></pre></div>
<pre><code>## [[1]]
## [1] 17.37151
## 
## [[2]]
## [1] 20.73513
## 
## [[3]]
## [1] 13.80041</code></pre>
<div class="sourceCode" id="cb517"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb517-1" data-line-number="1"><span class="kw">stopCluster</span>(cl)</a></code></pre></div>
<p>There are many R functions which implement parallel processing. For example, the same code from above can be processed using <code>foreach</code>.</p>
<div class="sourceCode" id="cb518"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb518-1" data-line-number="1"><span class="kw">library</span>(doParallel)</a>
<a class="sourceLine" id="cb518-2" data-line-number="2">cl &lt;-<span class="st"> </span>parallel<span class="op">::</span><span class="kw">makeCluster</span>(P)</a>
<a class="sourceLine" id="cb518-3" data-line-number="3"></a>
<a class="sourceLine" id="cb518-4" data-line-number="4">doParallel<span class="op">::</span><span class="kw">registerDoParallel</span>(cl)</a>
<a class="sourceLine" id="cb518-5" data-line-number="5"><span class="kw">foreach</span>(<span class="dt">reps =</span> <span class="kw">rep</span>(<span class="dv">50</span>, <span class="dv">100</span>), <span class="dt">.combine =</span> <span class="st">&#39;c&#39;</span>) <span class="op">%dopar%</span><span class="st"> </span>{</a>
<a class="sourceLine" id="cb518-6" data-line-number="6">  <span class="kw">max</span>(<span class="kw">rcauchy</span>(reps))</a>
<a class="sourceLine" id="cb518-7" data-line-number="7">       } <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">3</span>)</a></code></pre></div>
<pre><code>## [1]  5.881646  5.374148 43.051650</code></pre>
<div class="sourceCode" id="cb520"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb520-1" data-line-number="1"><span class="kw">stopCluster</span>(cl)</a></code></pre></div>
</div>
<div id="example-bootstrapping" class="section level4 unnumbered">
<h4>Example bootstrapping</h4>
<p>A slightly less embarrassingly parallel example comes with bootstrapping. Below we have used parallel implementation to bootstrap the mean of the iris data petal length (Virginica only).</p>
<div class="sourceCode" id="cb521"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb521-1" data-line-number="1"><span class="kw">data</span>(iris)</a>
<a class="sourceLine" id="cb521-2" data-line-number="2"></a>
<a class="sourceLine" id="cb521-3" data-line-number="3">iris_bs &lt;-<span class="st"> </span>iris <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb521-4" data-line-number="4"><span class="st">  </span><span class="kw">filter</span>(Species <span class="op">==</span><span class="st"> &quot;virginica&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb521-5" data-line-number="5"><span class="st">  </span><span class="kw">select</span>(Petal.Length)</a></code></pre></div>
<div class="sourceCode" id="cb522"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb522-1" data-line-number="1">cl &lt;-<span class="st"> </span>parallel<span class="op">::</span><span class="kw">makeCluster</span>(P)</a>
<a class="sourceLine" id="cb522-2" data-line-number="2"></a>
<a class="sourceLine" id="cb522-3" data-line-number="3">doParallel<span class="op">::</span><span class="kw">registerDoParallel</span>(cl)</a>
<a class="sourceLine" id="cb522-4" data-line-number="4">bsmean_PL &lt;-<span class="st"> </span><span class="kw">foreach</span>(<span class="dt">i =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">.combine =</span> <span class="st">&#39;c&#39;</span>) <span class="op">%dopar%</span><span class="st"> </span>{</a>
<a class="sourceLine" id="cb522-5" data-line-number="5">  <span class="kw">mean</span>(<span class="kw">sample</span>(iris_bs<span class="op">$</span>Petal.Length, <span class="dt">replace =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb522-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb522-7" data-line-number="7">bootstrap &lt;-<span class="st"> </span><span class="kw">tibble</span>(bsmean_PL)</a>
<a class="sourceLine" id="cb522-8" data-line-number="8"><span class="kw">stopCluster</span>(cl)</a>
<a class="sourceLine" id="cb522-9" data-line-number="9"></a>
<a class="sourceLine" id="cb522-10" data-line-number="10"><span class="kw">ggplot</span>(bootstrap, <span class="kw">aes</span>(<span class="dt">x =</span> bsmean_PL)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>(<span class="dt">bins =</span> <span class="dv">25</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ggtitle</span>(<span class="st">&quot;Histogram of 100 Bootstrapped Means using foreach&quot;</span>)</a></code></pre></div>
<p><img src="10-misc_files/figure-html/unnamed-chunk-8-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="spark-and-sparklyr" class="section level4 unnumbered">
<h4>Spark and <code>sparklyr</code></h4>
<p>Some of you may be familiar with <a href="http://spark.apache.org/">Apache Spark</a> which is an open-source product for distributed cluster-computing. You may want to learn more about its capabilities, including scheduling workflow, dispatching tasks, and consolidating end results. While incredibly powerful, there has historically been a steep learning curve to getting R to work smoothly with a Spark connection. Recently, RStudio has come out with a new package <a href="https://spark.rstudio.com/"><code>sparklyr</code></a> which integrates R and Spark seamlessly. Note that in the example below, we’ve set up a local connection just for the purposes of the example. For your work, you may want to connect to a cluster or cloud space with many cores.</p>
<p>The <a href="https://spark.rstudio.com/">RStudio <code>sparklyr</code> webpage</a> provides a plethora of good examples demonstrating the sophistication and power of the technology. <code>sparklyr</code> has particularly strong connections to the suite of <code>tidyverse</code> functions. Indeed, the power of <code>sparklyr</code> is more about distributing the computing than about parallelizing it. For example, with <code>sparklyr</code> the computations are delayed until you need the results. Additionally, Spark is doing the heavy lifting and only at the very end (when your results are called) do you need to worry about the size of the table, results, or computational space. The example below repeats the bootstrapping work that was done previously.</p>
<p>Note, it is important to look at your data structures and variables names. For example, when copying the local dataframe <code>iris_samps</code> to the remote data source called <code>iris_samps_tbl</code>, the variable <code>Petal.Length</code> was changed to <code>Petal_Length</code>.</p>
<div class="sourceCode" id="cb523"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb523-1" data-line-number="1"><span class="kw">library</span>(sparklyr)</a>
<a class="sourceLine" id="cb523-2" data-line-number="2"><span class="kw">spark_install</span>()</a>
<a class="sourceLine" id="cb523-3" data-line-number="3"></a>
<a class="sourceLine" id="cb523-4" data-line-number="4">sc &lt;-<span class="st"> </span><span class="kw">spark_connect</span>(<span class="dt">master =</span> <span class="st">&quot;local&quot;</span>)</a>
<a class="sourceLine" id="cb523-5" data-line-number="5"></a>
<a class="sourceLine" id="cb523-6" data-line-number="6">n_sim =<span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb523-7" data-line-number="7">iris_samps &lt;-<span class="st"> </span>iris <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(Species <span class="op">==</span><span class="st"> &quot;virginica&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb523-8" data-line-number="8"><span class="st">  </span><span class="kw">sapply</span>(rep.int, <span class="dt">times=</span>n_sim) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">cbind</span>(<span class="dt">replicate =</span> <span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span>n_sim, <span class="dt">each =</span> <span class="dv">50</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb523-9" data-line-number="9"><span class="st">  </span><span class="kw">data.frame</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb523-10" data-line-number="10"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(replicate) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb523-11" data-line-number="11"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">sample_n</span>(<span class="dv">50</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb523-12" data-line-number="12"></a>
<a class="sourceLine" id="cb523-13" data-line-number="13">iris_samps_tbl &lt;-<span class="st"> </span><span class="kw">copy_to</span>(sc, iris_samps)</a>
<a class="sourceLine" id="cb523-14" data-line-number="14"></a>
<a class="sourceLine" id="cb523-15" data-line-number="15">iris_samps_tbl <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb523-16" data-line-number="16"><span class="st">  </span><span class="kw">spark_apply</span>(<span class="cf">function</span>(x) {<span class="kw">mean</span>(x<span class="op">$</span>Petal_Length)}, </a>
<a class="sourceLine" id="cb523-17" data-line-number="17">    <span class="dt">group_by =</span> <span class="st">&quot;replicate&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb523-18" data-line-number="18"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> result)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>(<span class="dt">bins =</span> <span class="dv">20</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ggtitle</span>(<span class="st">&quot;Histogram of 100 Bootstrapped Means using sparklyr&quot;</span>)</a></code></pre></div>
<p><img src="10-misc_files/figure-html/unnamed-chunk-9-1.png" width="480" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb524-1" data-line-number="1"><span class="kw">spark_disconnect</span>(sc)</a></code></pre></div>
<p>For our particular application, the adept reader has probably noticed that the average of a variable using <code>group_by</code> is a very quick and easy task for <code>dplyr</code>. Indeed, the use of <code>sparklyr</code> above is overkill and is presented only as a way to demonstrate using <code>sparklyr</code>. If you are working with big datasets that require large computing infrastructure, the RStudio help pages on <code>sparklyr</code> are fantastic. Additionally, there are many instances of working with <code>Spark</code> in the wild, and you might consider working through someone else’s <code>Spark</code> analysis like this <a href="https://livefreeordichotomize.com/2019/06/04/using_awk_and_r_to_parse_25tb/">fantastic example</a> on splitting up large amounts of raw DNA sequencing to get data for a given genetic location.</p>
<div class="sourceCode" id="cb525"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb525-1" data-line-number="1">iris_samps <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(replicate) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb525-2" data-line-number="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">summarize</span>(<span class="dt">result =</span> <span class="kw">mean</span>(Petal.Length)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb525-3" data-line-number="3"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> result)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>(<span class="dt">bins =</span> <span class="dv">25</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ggtitle</span>(<span class="st">&quot;Histogram of 100 Bootstrapped Means using dplyr&quot;</span>)</a></code></pre></div>
<p><img src="10-misc_files/figure-html/unnamed-chunk-10-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>While an introduction to parallel and cloud computing will help you become more adept and less apprehensive about using the tools, there is also a recognition that sufficient background in computer science is needed to be able to fully engage with principles of high performance computing.</p>
</div>
<div id="learn-more" class="section level4 unnumbered">
<h4>Learn more</h4>
<ul>
<li>Hana Sevcikova <a href="https://channel9.msdn.com/Events/useR-international-R-User-conferences/useR-International-R-User-2017-Conference/Introduction-to-parallel-computing-with-R">Introduction to parallel computing with R</a> useR 2017 in Brussels, <a href="https://rawgit.com/PPgp/useR2017public/master/tutorial.html">tutorial here</a></li>
<li><code>sparklyr</code> to do <a href="https://blog.rstudio.com/2018/05/14/sparklyr-0-8/">parallel cross-validation</a></li>
<li><a href="https://www.rstudio.com/resources/cheatsheets/" class="uri">https://www.rstudio.com/resources/cheatsheets/</a>
<ul>
<li><a href="https://www.rstudio.com/resources/cheatsheets/#sparklyr" class="uri">https://www.rstudio.com/resources/cheatsheets/#sparklyr</a><br />
</li>
<li><a href="https://github.com/rstudio/cheatsheets/raw/master/parallel_computation.pdf" class="uri">https://github.com/rstudio/cheatsheets/raw/master/parallel_computation.pdf</a></li>
</ul></li>
<li>Great blog <a href="https://thecodeforest.github.io/post/two_flavors_of_parallel_simulation.html">Two Flavors of Parallel Simulation</a> by Mark LeBoeuf comparing different ways to process code in parallel.</li>
</ul>
</div>
</div>
<div id="cloud-computing" class="section level2">
<h2><span class="header-section-number">10.4</span> Cloud Computing</h2>
<p>The R package <code>parallel</code> is designed to send tasks to each of multiple cores. Today’s computers (even small laptops!) typically have multiple cores, and any server or cloud computing infrastructure can easily handle dozens or hundreds of parallel tasks. The structure of the R <code>parallel</code> implementation sends tasks to workers that don’t talk to one another until compiling their results at the end. In her <a href="https://rawgit.com/PPgp/useR2017public/master/tutorial.html">2017 UseR! tutorial</a>, Hana Sevcikova describes the function of workers which run code/functions/iterations separately before results are subsequently combined.</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-11"></span>
<img src="figs/flow.png" alt="Image from Sevcikova UseR! 2017 [tutorial on parallel computing](https://rawgit.com/PPgp/useR2017public/master/tutorial.html" width="65%" />
<p class="caption">
Figure 1.7: Image from Sevcikova UseR! 2017 [tutorial on parallel computing](<a href="https://rawgit.com/PPgp/useR2017public/master/tutorial.html" class="uri">https://rawgit.com/PPgp/useR2017public/master/tutorial.html</a>
</p>
</div>
<p>As computing infrastructure becomes more sophisticated, it is important to have the language to describe how connected components work. Parallel processing allows for a conversation on the <a href="https://en.wikipedia.org/wiki/Grid_computing">differences between</a> distributed computing, cluster computing, and grid computing, and generally, the framework of high performance computing. The benefit of parallel computing as an introduction to the larger infrastructure is that the task of each worker is clear, important, and easy to describe.</p>
</div>
<div id="reticulate" class="section level2">
<h2><span class="header-section-number">10.5</span> <code>reticulate</code></h2>
<div id="connect-to-python-within-rstudio" class="section level3 unnumbered">
<h3>Connect to Python within RStudio</h3>
<p>For many statisticians, the go-to software language is R. However, there is no doubt that Python is a very important language in data science. Why not do both??</p>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb526-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb526-2" data-line-number="2"><span class="kw">library</span>(reticulate)</a>
<a class="sourceLine" id="cb526-3" data-line-number="3"><span class="kw">use_virtualenv</span>(<span class="st">&quot;r-reticulate&quot;</span>)</a>
<a class="sourceLine" id="cb526-4" data-line-number="4">reticulate<span class="op">::</span><span class="kw">import</span>(<span class="st">&quot;statsmodels&quot;</span>)</a></code></pre></div>
<pre><code>## Module(statsmodels)</code></pre>
<div id="i-can-run-python-inside-r" class="section level4 unnumbered">
<h4>I can run Python inside R??</h4>
<p><img src="figs/pychunk1.png" width="65%" style="display: block; margin: auto auto auto 0;" />
<img src="figs/pychunk2.png" width="65%" style="display: block; margin: auto 0 auto auto;" /></p>
<ul>
<li><code>pandas</code> for data wrangling.<br />
</li>
<li>In R, the chunk is specified to be a Python chunk (RStudio is now running Python).</li>
</ul>
<pre><code>```{python}
import pandas
flights = pandas.read_csv(&quot;flights.csv&quot;)
flights = flights[flights[&quot;dest&quot;] == &quot;ORD&quot;]
flights = flights[[&#39;carrier&#39;, &#39;dep_delay&#39;, &#39;arr_delay&#39;]]
flights = flights.dropna()
```</code></pre>
<p>A view of the Python chunk which is actually run:</p>
<div class="sourceCode" id="cb529"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb529-1" data-line-number="1"><span class="im">import</span> pandas</a>
<a class="sourceLine" id="cb529-2" data-line-number="2">flights <span class="op">=</span> pandas.read_csv(<span class="st">&quot;flights.csv&quot;</span>)</a>
<a class="sourceLine" id="cb529-3" data-line-number="3">flights <span class="op">=</span> flights[flights[<span class="st">&quot;dest&quot;</span>] <span class="op">==</span> <span class="st">&quot;ORD&quot;</span>]</a>
<a class="sourceLine" id="cb529-4" data-line-number="4">flights <span class="op">=</span> flights[[<span class="st">&#39;carrier&#39;</span>, <span class="st">&#39;dep_delay&#39;</span>, <span class="st">&#39;arr_delay&#39;</span>]]</a>
<a class="sourceLine" id="cb529-5" data-line-number="5">flights <span class="op">=</span> flights.dropna()</a></code></pre></div>
</div>
<div id="learn-about-the-dataset" class="section level4 unnumbered">
<h4>Learn about the dataset</h4>
<pre><code>```{python}
flights.shape
flights.head(3)
flights.describe()
```</code></pre>
<div class="sourceCode" id="cb531"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb531-1" data-line-number="1">flights.shape</a></code></pre></div>
<pre><code>## (12590, 3)</code></pre>
<div class="sourceCode" id="cb533"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb533-1" data-line-number="1">flights.head(<span class="dv">3</span>)</a></code></pre></div>
<pre><code>##    carrier  dep_delay  arr_delay
## 4       UA       -4.0       12.0
## 5       AA       -2.0        8.0
## 22      AA       -1.0       14.0</code></pre>
<div class="sourceCode" id="cb535"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb535-1" data-line-number="1">flights.describe()</a></code></pre></div>
<pre><code>##           dep_delay     arr_delay
## count  12590.000000  12590.000000
## mean      11.709770      2.917951
## std       39.409704     44.885155
## min      -20.000000    -62.000000
## 25%       -6.000000    -22.000000
## 50%       -2.000000    -10.000000
## 75%        9.000000     10.000000
## max      466.000000    448.000000</code></pre>
</div>
<div id="computations-using-pandas" class="section level4 unnumbered">
<h4>Computations using <code>pandas</code></h4>
<pre><code>```{python}
flights = pandas.read_csv(&quot;flights.csv&quot;)
flights = flights[[&#39;carrier&#39;, &#39;dep_delay&#39;, &#39;arr_delay&#39;]]
flights.groupby(&quot;carrier&quot;).mean()
```</code></pre>
<div class="sourceCode" id="cb538"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb538-1" data-line-number="1">flights <span class="op">=</span> pandas.read_csv(<span class="st">&quot;flights.csv&quot;</span>)</a>
<a class="sourceLine" id="cb538-2" data-line-number="2">flights <span class="op">=</span> flights[[<span class="st">&#39;carrier&#39;</span>, <span class="st">&#39;dep_delay&#39;</span>, <span class="st">&#39;arr_delay&#39;</span>]]</a>
<a class="sourceLine" id="cb538-3" data-line-number="3">flights.groupby(<span class="st">&quot;carrier&quot;</span>).mean()</a></code></pre></div>
<pre><code>##          dep_delay  arr_delay
## carrier                      
## AA        8.586016   0.364291
## AS        5.804775  -9.930889
## DL        9.264505   1.644341
## UA       12.106073   3.558011
## US        3.782418   2.129595</code></pre>
</div>
<div id="from-python-chunk-to-r-chunk" class="section level4 unnumbered">
<h4>From Python chunk to R chunk</h4>
<ul>
<li><code>py$x</code> accesses an <code>x</code> variable created within Python from R</li>
<li><code>r.x</code> accesses an <code>x</code> variable created within R from Python</li>
</ul>
<div class="sourceCode" id="cb540"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb540-1" data-line-number="1"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb540-2" data-line-number="2"><span class="kw">ggplot</span>(py<span class="op">$</span>flights, </a>
<a class="sourceLine" id="cb540-3" data-line-number="3">       <span class="kw">aes</span>(<span class="dt">x=</span>carrier, </a>
<a class="sourceLine" id="cb540-4" data-line-number="4">           <span class="dt">y=</span>arr_delay)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb540-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb540-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_jitter</span>()</a></code></pre></div>
<p><img src="10-misc_files/figure-html/unnamed-chunk-18-1.png" width="480" style="display: block; margin: auto;" /></p>
</div>
<div id="from-r-chunk-to-python-chunk" class="section level4 unnumbered">
<h4>From R chunk to Python chunk</h4>
<div class="sourceCode" id="cb541"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb541-1" data-line-number="1"><span class="kw">data</span>(diamonds)</a>
<a class="sourceLine" id="cb541-2" data-line-number="2"><span class="kw">head</span>(diamonds)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 10
##   carat cut       color clarity depth table price     x     y     z
##   &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 0.23  Ideal     E     SI2      61.5    55   326  3.95  3.98  2.43
## 2 0.21  Premium   E     SI1      59.8    61   326  3.89  3.84  2.31
## 3 0.23  Good      E     VS1      56.9    65   327  4.05  4.07  2.31
## 4 0.290 Premium   I     VS2      62.4    58   334  4.2   4.23  2.63
## 5 0.31  Good      J     SI2      63.3    58   335  4.34  4.35  2.75
## 6 0.24  Very Good J     VVS2     62.8    57   336  3.94  3.96  2.48</code></pre>
</div>
<div id="python-chunks" class="section level4 unnumbered">
<h4>Python chunks</h4>
<p>Note that we’re calling Python code on an R object.</p>
<div class="sourceCode" id="cb543"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb543-1" data-line-number="1"><span class="bu">print</span>(r.diamonds.describe())</a></code></pre></div>
<pre><code>##               carat         depth  ...             y             z
## count  53940.000000  53940.000000  ...  53940.000000  53940.000000
## mean       0.797940     61.749405  ...      5.734526      3.538734
## std        0.474011      1.432621  ...      1.142135      0.705699
## min        0.200000     43.000000  ...      0.000000      0.000000
## 25%        0.400000     61.000000  ...      4.720000      2.910000
## 50%        0.700000     61.800000  ...      5.710000      3.530000
## 75%        1.040000     62.500000  ...      6.540000      4.040000
## max        5.010000     79.000000  ...     58.900000     31.800000
## 
## [8 rows x 7 columns]</code></pre>
<div class="sourceCode" id="cb545"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb545-1" data-line-number="1"><span class="im">import</span> statsmodels.formula.api <span class="im">as</span> smf</a>
<a class="sourceLine" id="cb545-2" data-line-number="2">model <span class="op">=</span> smf.ols(<span class="st">&#39;price ~ carat&#39;</span>, data <span class="op">=</span> r.diamonds).fit()</a>
<a class="sourceLine" id="cb545-3" data-line-number="3"><span class="bu">print</span>(model.summary())</a></code></pre></div>
<pre><code>##                             OLS Regression Results                            
## ==============================================================================
## Dep. Variable:                  price   R-squared:                       0.849
## Model:                            OLS   Adj. R-squared:                  0.849
## Method:                 Least Squares   F-statistic:                 3.041e+05
## Date:                Mon, 25 Nov 2019   Prob (F-statistic):               0.00
## Time:                        10:58:53   Log-Likelihood:            -4.7273e+05
## No. Observations:               53940   AIC:                         9.455e+05
## Df Residuals:                   53938   BIC:                         9.455e+05
## Df Model:                           1                                         
## Covariance Type:            nonrobust                                         
## ==============================================================================
##                  coef    std err          t      P&gt;|t|      [0.025      0.975]
## ------------------------------------------------------------------------------
## Intercept  -2256.3606     13.055   -172.830      0.000   -2281.949   -2230.772
## carat       7756.4256     14.067    551.408      0.000    7728.855    7783.996
## ==============================================================================
## Omnibus:                    14025.341   Durbin-Watson:                   0.986
## Prob(Omnibus):                  0.000   Jarque-Bera (JB):           153030.525
## Skew:                           0.939   Prob(JB):                         0.00
## Kurtosis:                      11.035   Cond. No.                         3.65
## ==============================================================================
## 
## Warnings:
## [1] Standard Errors assume that the covariance matrix of the errors is correctly specified.</code></pre>
</div>
<div id="running-just-python" class="section level4 unnumbered">
<h4>Running just Python</h4>
<p><img src="figs/PyScript.png" width="120%" style="display: block; margin: auto;" /></p>
</div>
<div id="full-disclosure" class="section level4 unnumbered">
<h4>Full disclosure</h4>
<p><code>reticulate</code> is not always trivial to set up. Indeed, I’ve had trouble figuring out which Python version is talking to R and where different module versions live.</p>
</div>
<div id="learn-more-1" class="section level4 unnumbered">
<h4>Learn more</h4>
<ul>
<li><a href="https://rstudio.github.io/reticulate/">RStudio R Interface to Python</a></li>
</ul>
<p><a href="https://rstudio.github.io/reticulate/" class="uri">https://rstudio.github.io/reticulate/</a></p>
<ul>
<li><a href="https://blog.rstudio.com/2018/10/09/rstudio-1-2-preview-reticulated-python/">RStudio blog on Reticulated Python</a></li>
</ul>
<p><a href="https://blog.rstudio.com/2018/10/09/rstudio-1-2-preview-reticulated-python" class="uri">https://blog.rstudio.com/2018/10/09/rstudio-1-2-preview-reticulated-python</a></p>
</div>
</div>
</div>
<div id="sql-in-r" class="section level2">
<h2><span class="header-section-number">10.6</span> SQL (in R)</h2>
<p>Note that there exists an R interface to work with SQL commands from within an R Markdown file. For consistency with the class notes, we’ve continued to use the R Markdown structure to demonstrate the course material.</p>
<p>(Taken from the Teach Data Science blog: <a href="https://teachdatascience.com/sql/" class="uri">https://teachdatascience.com/sql/</a>, this entry written by Nick Horton)</p>
<p>SQL (pronounced <em>sequel</em>) stands for <a href="https://en.wikipedia.org/wiki/SQL">Structured Query Language</a>; it is a language designed to manage data in a relational database system.</p>
<p>We will use a public facing MySQL <a href="http://www.science.smith.edu/wai-database/home/about">database</a> containing wideband acoustic immittance (WAI) measures made on normal ears of adults. (The project is funded by the National Institutes of Health, NIDCD, and hosted on a server at Smith College, <a href="https://projectreporter.nih.gov/project_info_description.cfm?aid=8769352&amp;icde=44962011&amp;ddparam=&amp;ddvalue=&amp;ddsub=&amp;cr=46&amp;csb=default&amp;cs=ASC&amp;pball=">PI Susan Voss, R15 DC014129-01</a>.) The database was created to enable auditory researchers to share WAI measurements and combine analyses over multiple datasets.</p>
<p>We begin by demonstrating how SQL queries can be sent to a database. It is necessary to set up a connection using the <code>dbConnect()</code> function.</p>
<div class="sourceCode" id="cb547"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb547-1" data-line-number="1"><span class="kw">library</span>(mosaic)</a>
<a class="sourceLine" id="cb547-2" data-line-number="2"><span class="kw">library</span>(RMySQL)  </a>
<a class="sourceLine" id="cb547-3" data-line-number="3">con &lt;-<span class="st"> </span><span class="kw">dbConnect</span>(</a>
<a class="sourceLine" id="cb547-4" data-line-number="4">  <span class="kw">MySQL</span>(), <span class="dt">host =</span> <span class="st">&quot;scidb.smith.edu&quot;</span>, <span class="dt">user =</span> <span class="st">&quot;waiuser&quot;</span>, </a>
<a class="sourceLine" id="cb547-5" data-line-number="5">  <span class="dt">password =</span> <span class="st">&quot;smith_waiDB&quot;</span>, <span class="dt">dbname =</span> <span class="st">&quot;wai&quot;</span>)</a></code></pre></div>
<p>Next a series of SQL queries can be sent to the database using the <code>DBI::dbGetQuery()</code> function: each query returns an R dataframe.</p>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb548-1" data-line-number="1"><span class="kw">class</span>(<span class="kw">dbGetQuery</span>(con, <span class="st">&quot;SHOW TABLES&quot;</span>))</a></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>There are multiple tables within the <code>wai</code> database.</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb550-1" data-line-number="1"><span class="kw">dbGetQuery</span>(con, <span class="st">&quot;SHOW TABLES&quot;</span>)</a></code></pre></div>
<pre><code>##   Tables_in_wai
## 1  Measurements
## 2       PI_Info
## 3       Subject</code></pre>
<p>The <code>EXPLAIN</code> command describes the ten field names (variables) in the <code>PI_Info</code> table.</p>
<div class="sourceCode" id="cb552"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb552-1" data-line-number="1"><span class="kw">dbGetQuery</span>(con, <span class="st">&quot;EXPLAIN PI_Info&quot;</span>)</a></code></pre></div>
<pre><code>##          Field           Type Null Key Default Extra
## 1   Identifier    varchar(20)  YES        &lt;NA&gt;      
## 2      PI_Year        int(11)  YES        &lt;NA&gt;      
## 3           PI   varchar(500)  YES        &lt;NA&gt;      
## 4  Affiliation   varchar(500)  YES        &lt;NA&gt;      
## 5        Email    varchar(30)  YES        &lt;NA&gt;      
## 6        Title   varchar(140)  YES        &lt;NA&gt;      
## 7          Pub varchar(10000)  YES        &lt;NA&gt;      
## 8         Date       char(20)  YES        &lt;NA&gt;      
## 9          URL   varchar(140)  YES        &lt;NA&gt;      
## 10    PI_Notes           text   NO        &lt;NA&gt;</code></pre>
<p>The <code>SELECT</code> statement can be used to select all fields for eight observations in the <code>Measurements</code> table.</p>
<div class="sourceCode" id="cb554"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb554-1" data-line-number="1">eightobs &lt;-<span class="st"> </span><span class="kw">dbGetQuery</span>(con, <span class="st">&quot;SELECT * FROM Measurements LIMIT 8&quot;</span>)</a>
<a class="sourceLine" id="cb554-2" data-line-number="2">eightobs</a></code></pre></div>
<pre><code>##   Identifier Sub_Number Session Left_Ear MEP Instrument    Freq Absorbance
## 1  Abur_2014          1       1        0  -5          1 210.938  0.0451375
## 2  Abur_2014          1       1        0  -5          1 234.375  0.0441247
## 3  Abur_2014          1       1        0  -5          1 257.812  0.0495935
## 4  Abur_2014          1       1        0  -5          1 281.250  0.0516088
## 5  Abur_2014          1       1        0  -5          1 304.688  0.0590836
## 6  Abur_2014          1       1        0  -5          1 328.125  0.0628038
## 7  Abur_2014          1       1        0  -5          1 351.562  0.0682962
## 8  Abur_2014          1       1        0  -5          1 375.000  0.0738373
##        Zmag      Zang Canal_Area
## 1 110638000 -0.228113         NA
## 2 100482000 -0.230561         NA
## 3  90561100 -0.230213         NA
## 4  83515500 -0.230959         NA
## 5  77476800 -0.229652         NA
## 6  71229100 -0.230026         NA
## 7  66615500 -0.229576         NA
## 8  61996200 -0.229327         NA</code></pre>
<p>More interesting and complicated <code>SELECT</code> calls can be used to undertake grouping and aggregation. Here we calculate the sample size for each study</p>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb556-1" data-line-number="1"><span class="kw">dbGetQuery</span>(con, </a>
<a class="sourceLine" id="cb556-2" data-line-number="2">  <span class="st">&quot;SELECT Identifier, count(*) AS NUM FROM Measurements GROUP BY Identifier ORDER BY NUM&quot;</span>)</a></code></pre></div>
<pre><code>##       Identifier    NUM
## 1       Sun_2016   2604
## 2    Shaver_2013   2880
## 3    Feeney_2017   3162
## 4      Voss_1994   5120
## 5       Liu_2008   5520
## 6    Werner_2010   7935
## 7  Rosowski_2012  14384
## 8      Voss_2010  14880
## 9      Abur_2014  21328
## 10    Groon_2015  35469
## 11  Shahnaz_2006  58776
## 12    Lewis_2015 114716</code></pre>
<div id="accessing-a-database-using-dplyr-commands" class="section level4 unnumbered">
<h4>Accessing a database using <code>dplyr</code> commands</h4>
<p>Alternatively, a connection can be made to the server by creating a series of <code>dplyr</code> tbl
objects. Connecting with familiar <code>dplyr</code> syntax is attractive because, as <a href="https://dbplyr.tidyverse.org/articles/dbplyr.html">Hadley Wickham</a> has noted, SQL and R have similar syntax (but sufficiently different to be confusing).</p>
<p>The setup process looks similar.</p>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb558-1" data-line-number="1">db &lt;-<span class="st"> </span><span class="kw">src_mysql</span>(<span class="dt">dbname =</span> <span class="st">&quot;wai&quot;</span>, <span class="dt">host =</span> <span class="st">&quot;scidb.smith.edu&quot;</span>, <span class="dt">user =</span> <span class="st">&quot;waiuser&quot;</span>, </a>
<a class="sourceLine" id="cb558-2" data-line-number="2">          <span class="dt">password=</span><span class="st">&quot;smith_waiDB&quot;</span>)</a>
<a class="sourceLine" id="cb558-3" data-line-number="3">Measurements &lt;-<span class="st"> </span><span class="kw">tbl</span>(db, <span class="st">&quot;Measurements&quot;</span>)</a>
<a class="sourceLine" id="cb558-4" data-line-number="4"><span class="kw">class</span>(Measurements)</a></code></pre></div>
<pre><code>## [1] &quot;tbl_MySQLConnection&quot; &quot;tbl_dbi&quot;             &quot;tbl_sql&quot;            
## [4] &quot;tbl_lazy&quot;            &quot;tbl&quot;</code></pre>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb560-1" data-line-number="1">PI_Info &lt;-<span class="st"> </span><span class="kw">tbl</span>(db, <span class="st">&quot;PI_Info&quot;</span>)</a>
<a class="sourceLine" id="cb560-2" data-line-number="2">Subject &lt;-<span class="st"> </span><span class="kw">tbl</span>(db, <span class="st">&quot;Subject&quot;</span>)</a></code></pre></div>
<p>We explore the <code>PI_Info</code> table using the <code>collect()</code> function used to force computation on the database (and return the results). One attractive aspect of database systems is that they feature <a href="https://en.wikipedia.org/wiki/Lazy_evaluation"><em>lazy evaluation</em></a>, where computation is optimized and postponed as long as possible.</p>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb561-1" data-line-number="1">PI_Info  <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">total =</span> <span class="kw">n</span>())</a></code></pre></div>
<pre><code>## # Source:   lazy query [?? x 1]
## # Database: mysql 5.5.58-0ubuntu0.14.04.1-log
## #   [waiuser@scidb.smith.edu:/wai]
##   total
##   &lt;dbl&gt;
## 1    12</code></pre>
<div class="sourceCode" id="cb563"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb563-1" data-line-number="1">PI_Info <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">-</span>Email) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">collect</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">data.frame</span>()   </a></code></pre></div>
<pre><code>##       Identifier PI_Year
## 1    Werner_2010    2010
## 2      Voss_1994    1994
## 3     Lewis_2015    2015
## 4      Voss_2010    2010
## 5       Sun_2016    2016
## 6    Shaver_2013    2013
## 7  Rosowski_2012    2012
## 8       Liu_2008    2008
## 9      Abur_2014    2014
## 10   Feeney_2017    2017
## 11    Groon_2015    2015
## 12  Shahnaz_2006    2006
##                                                                                                         PI
## 1                                                                                            Douglas Keefe
## 2                                                                                            Susan E. Voss
## 3                                                                            James D. Lewis; Stephen Neely
## 4                                                                                            Susan E. Voss
## 5                                                                                            Xiao-Ming Sun
## 6                                                                            Mark D. Shaver, Xiao-Ming Sun
## 7                                                                                         John J. Rosowski
## 8  Yi-Wen Liu; Chris A. Sanford; John C. Ellison; Denis F. Fitzpatrick; Michael P. Gorga; Douglas H. Keefe
## 9                                                            Defne Abur; Nicholas J. Horton; Susan E. Voss
## 10                                                                     M. Patrick Feeney; Douglas H. Keefe
## 11                                                                                           Stephen Neely
## 12                                                                               Navid Shahnaz; Karin Bork
##                                                                                              Affiliation
## 1                                                                 Boys Town National Research Laboratory
## 2                                                                  Smith College, formerly ATT Bell Labs
## 3                                                                 Boys Town National Research Laboratory
## 4                                                                                          Smith College
## 5                                                                               Wichita State University
## 6                                                                               Wichita State University
## 7                                  Eaton-Peabody Laboratory, Massachusetts Eye and Ear Infirmary, Boston
## 8                                                                   Boys Town National Research Hospital
## 9                                                                                          Smith College
## 10 National Center for Rehabilitative Auditory Research (NCRAR) and Boys Town National Research Hospital
## 11                                                                  Boys Town National Research Hospital
## 12                                                                        University of British Columbia
##                                                                                                                                     Title
## 1                                             Ear-Canal Wideband Acoustic Transfer Functions of Adults and Two- to Nine-Month-Old Infants
## 2                                                                Measurement of acoustic impedance and reflectance in the human ear canal
## 3                                                                    Non-invasive estimation of middle-ear input impedance and efficiency
## 4                                                                Posture systematically alters ear-canal reflectance and DPOAE properties
## 5                       Wideband acoustic immittance: Normative study and test-retest reliability of tympanometric measurements in adults
## 6  Wideband energy reflectance measurements: Effects of negative middle ear pressure and application of a pressure compensation procedure
## 7                                                          Ear-Canal Reflectance, Umbo Velocity, and Tympanometry in Normal-Hearing Adult
## 8                    Wideband absorbance tympanometry using pressure sweeps: System development and results on adults with normal hearing
## 9                                                                                           Intrasubject Variability in Power Reflectance
## 10      Normative wideband reflectance, equivalent admittance at the tympanic membrane, and acoustic stapedius reflex threshold in adults
## 11                                                                                      Air-Leak Effects on Ear-Canal Acoustic Absorbance
## 12                                                                      Wideband Reflectance Norms for Caucasian and Chinese Young Adults
##                                                  Pub       Date
## 1                                    Ear and Hearing   9/1/2017
## 2       Journal of the Acoustical Society of America 02/08/2017
## 3       Journal of the Acoustical Society of America 10/10/2018
## 4                                   Hearing Research 06/05/2018
## 5  Journal of Speech, Language, and Hearing Research 10/31/2017
## 6   The Journal of the Acoustical Society of America 10/06/2018
## 7                                    Ear and Hearing 11/06/2015
## 8   The Journal of the Acoustical Society of America  6/26/2018
## 9                                   J Am Acad Audiol 08/24/2016
## 10                                   Ear and Hearing 06/07/2018
## 11                                   Ear and Hearing 06/18/2019
## 12                                   Ear and Hearing 08/24/2016
##                                                                                                                   URL
## 1                                                                        https://www.ncbi.nlm.nih.gov/pubmed/20517155
## 2                                                                  https://asa.scitation.org/doi/abs/10.1121/1.408329
## 3                                                                 https://asa.scitation.org/doi/abs/10.1121/1.4927408
## 4                                                                        https://www.ncbi.nlm.nih.gov/pubmed/20227475
## 5                                                                        https://www.ncbi.nlm.nih.gov/pubmed/27517667
## 6                                                                        https://www.ncbi.nlm.nih.gov/pubmed/23862811
## 7                                                                         http://www.ncbi.nlm.nih.gov/pubmed/21857517
## 8                                                                        https://www.ncbi.nlm.nih.gov/pubmed/19206798
## 9                                                                        https://www.ncbi.nlm.nih.gov/pubmed/25257718
## 10                                                                       https://www.ncbi.nlm.nih.gov/pubmed/28045835
## 11 https://journals.lww.com/ear-hearing/fulltext/2015/01000/Air_Leak_Effects_on_Ear_Canal_Acoustic_Absorbance.16.aspx
## 12       http://journals.lww.com/ear-hearing/Abstract/2006/12000/Wideband_Reflectance_Norms_for_Caucasian_and.15.aspx
##                                                                                                                                                                                                                                                                                                                                   PI_Notes
## 1                                                    Used an ER-1 earphone and ER-7C microphone.  Data provided by Doug Keefe and formatted by Susan Voss with help.  Lynne Werner is retired.  In Subject Table, Sub_Notes=1  means part of 183 subjects included in the  means in paper and Sub_Notes=0 means not part of mean in paper.
## 2                                                                                                                                                                                                                       Measurements taken with a system using sysid and the Etymotic ER-2 pressure transducer and ER-7c probe microphone.
## 3                                                                                                                                                                                                                                            Used acoustically calculated areas for absorbance calculations, included in Measurement Table
## 4                                                                                                                                                                                                                                                                                                                                 No notes
## 5                                                                                                                                                                                                                                                                                                                                 No notes
## 6  A research version of Titan (Interacoustics) was used. In this study, a total of five reflectance measurements at ambient pressure were taken per ear (detailed in the article). But, results from only two sessions were reported in this article. Included in this database is the second session (baseline), as the normative data. 
## 7                                                                                                                                                                                                                                                                                                                                No Notes 
## 8                                                                                                                                                                                                                                                                                                                                No Notes 
## 9                                                                                                                                                                                                                                                                          Database includes measurements at Position 1 and Channel B only
## 10                                                                                                                                                                                                                                     Sub_Notes=Boys Town National Lab are data taken by Keefe; Sub_Notes=NCRAR are data taken by Feeney 
## 11                                                                                                                                                                                                                  First author is Groon, PI for grant is Steve Neely, data collected on system described in Rasetshwane and Neely (2011)
## 12                                                                                                                                                                                                                                                                                          Impedance angles not available and set to Null</code></pre>
<div class="sourceCode" id="cb565"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb565-1" data-line-number="1"><span class="co"># be careful with collect() when dealing with large tables!</span></a></code></pre></div>
<p>Note how the number of rows is unknown (<code>??</code> at the top of the output above) for the lazy query.</p>
<p>Similarly, we can explore the <code>Subjects</code> table.</p>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb566-1" data-line-number="1">Subject  <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">total =</span> <span class="kw">n</span>())</a></code></pre></div>
<pre><code>## # Source:   lazy query [?? x 1]
## # Database: mysql 5.5.58-0ubuntu0.14.04.1-log
## #   [waiuser@scidb.smith.edu:/wai]
##   total
##   &lt;dbl&gt;
## 1   640</code></pre>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb568-1" data-line-number="1">Subject <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">collect</span>()  <span class="co"># be careful with collect() with large tables!</span></a></code></pre></div>
<pre><code>## # A tibble: 640 x 10
##    Identifier Sub_Number Session_Total   Age Female  Race Ethnicity
##    &lt;chr&gt;      &lt;chr&gt;              &lt;int&gt; &lt;int&gt;  &lt;int&gt; &lt;int&gt;     &lt;int&gt;
##  1 Voss_2010  1                      5    20      1     0         0
##  2 Voss_2010  2                      5    39      1     0         0
##  3 Voss_2010  3                      5    18      1     0         0
##  4 Voss_2010  4                      5    19      1     0         0
##  5 Voss_2010  5                      5    21      1     0         0
##  6 Voss_2010  6                      5    21      1     0         0
##  7 Voss_2010  7                      5    21      1     0         0
##  8 Voss_2010  8                      5    42      1     0         0
##  9 Voss_2010  9                      5    38      0     0         0
## 10 Voss_2010  10                     5    20      1     0         0
## # … with 630 more rows, and 3 more variables: Left_Ear_Status &lt;int&gt;,
## #   Right_Ear_Status &lt;int&gt;, Sub_Notes &lt;chr&gt;</code></pre>
<p>Let’s explore the <code>Measurements</code> table.</p>
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb570-1" data-line-number="1">Measurements <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">total =</span> <span class="kw">n</span>())</a></code></pre></div>
<pre><code>## # Source:   lazy query [?? x 1]
## # Database: mysql 5.5.58-0ubuntu0.14.04.1-log
## #   [waiuser@scidb.smith.edu:/wai]
##    total
##    &lt;dbl&gt;
## 1 286774</code></pre>
<p>There are more than a quarter million observations.</p>
<p>In the next step, we will download the data from a given subject for a specific study, in this case a paper by Rosowski et al. (2012) entitled <a href="https://www.ncbi.nlm.nih.gov/pubmed/21857517">“Ear-canal reflectance, umbo velocity, and tympanometry in normal-hearing adults”</a>.</p>
<p>Arbitrarily we choose to collect data from subject number three.</p>
<div class="sourceCode" id="cb572"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb572-1" data-line-number="1">onesubj &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb572-2" data-line-number="2"><span class="st">  </span>Measurements <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb572-3" data-line-number="3"><span class="st">  </span><span class="kw">filter</span>(Identifier <span class="op">==</span><span class="st"> &quot;Rosowski_2012&quot;</span>, Sub_Number <span class="op">==</span><span class="st"> </span><span class="dv">3</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb572-4" data-line-number="4"><span class="st">  </span>collect <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb572-5" data-line-number="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">SessionNum =</span> <span class="kw">as.factor</span>(Session))</a>
<a class="sourceLine" id="cb572-6" data-line-number="6"><span class="kw">head</span>(onesubj)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 12
##   Identifier Sub_Number Session Left_Ear   MEP Instrument  Freq Absorbance
##   &lt;chr&gt;           &lt;int&gt;   &lt;int&gt;    &lt;int&gt; &lt;dbl&gt;      &lt;int&gt; &lt;dbl&gt;      &lt;dbl&gt;
## 1 Rosowski_…          3       1        1    NA          1  211.     0.0852
## 2 Rosowski_…          3       1        1    NA          1  234.     0.0903
## 3 Rosowski_…          3       1        1    NA          1  258.     0.112 
## 4 Rosowski_…          3       1        1    NA          1  281.     0.103 
## 5 Rosowski_…          3       1        1    NA          1  305.     0.129 
## 6 Rosowski_…          3       1        1    NA          1  328.     0.136 
## # … with 4 more variables: Zmag &lt;dbl&gt;, Zang &lt;dbl&gt;, Canal_Area &lt;dbl&gt;,
## #   SessionNum &lt;fct&gt;</code></pre>
<p>Finally we can display the results of the measurements as a function of frequency and which ear (left or right) that was used.</p>
<div class="sourceCode" id="cb574"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb574-1" data-line-number="1">onesubj &lt;-<span class="st"> </span><span class="kw">mutate</span>(onesubj, <span class="dt">Ear =</span> <span class="kw">ifelse</span>(Left_Ear <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;Left&quot;</span>, <span class="st">&quot;Right&quot;</span>))</a>
<a class="sourceLine" id="cb574-2" data-line-number="2"><span class="kw">ggplot</span>(onesubj, <span class="kw">aes</span>(<span class="dt">x =</span> Freq, <span class="dt">y =</span> Absorbance)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb574-3" data-line-number="3"><span class="st">  </span><span class="kw">aes</span>(<span class="dt">colour =</span> Ear) <span class="op">+</span><span class="st"> </span><span class="kw">scale_x_log10</span>() <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Absorbance by ear Rosowski subject 3&quot;</span>)</a></code></pre></div>
<p><img src="10-misc_files/figure-html/unnamed-chunk-34-1.png" width="480" style="display: block; margin: auto;" /></p>
<p>We note that a number of relational database systems exist, including MySQL (illustrated here), PostgreSQL, and SQLite. More information about databases within R can be found in the CRAN <a href="https://cran.r-project.org/web/views/Databases.html">Databases with R</a> Task View.</p>
<p>Setting up and managing a database is a topic for a different day: here we focused on how SQL can be used within R to access data in a flexible and powerful manner.</p>
</div>
<div id="learn-more-2" class="section level4 unnumbered">
<h4>Learn more</h4>
<ul>
<li><a href="https://chance.amstat.org/2015/04/setting-the-stage/" class="uri">https://chance.amstat.org/2015/04/setting-the-stage/</a> (Setting the stage for data technologies)</li>
<li><a href="https://www.w3schools.com/sql/sql_intro.asp" class="uri">https://www.w3schools.com/sql/sql_intro.asp</a> (Intro to SQL)</li>
<li><a href="http://www.science.smith.edu/wai-database/home/about/" class="uri">http://www.science.smith.edu/wai-database/home/about/</a> (WAI SQL Database)</li>
<li><a href="https://cran.r-project.org/web/views/Databases.html" class="uri">https://cran.r-project.org/web/views/Databases.html</a> (CRAN Task View on Databases with R)</li>
<li><a href="https://db.rstudio.com" class="uri">https://db.rstudio.com</a> (RStudio Database resources)</li>
<li><a href="https://dbplyr.tidyverse.org/articles/dbplyr.html" class="uri">https://dbplyr.tidyverse.org/articles/dbplyr.html</a> (dbplyr package)</li>
</ul>
</div>
</div>
<div id="Dec10" class="section level2">
<h2><span class="header-section-number">10.7</span> 12/10/19 Agenda</h2>
<ol style="list-style-type: decimal">
<li>Regular Expressions</li>
</ol>
</div>
<div id="regexpr" class="section level2">
<h2><span class="header-section-number">10.8</span> Regular Expressions</h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="unsup.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/10-misc.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["Math-154-Notes.pdf", "Math-154-Notes.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
